(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function df(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var yc={exports:{}},wi={},wc={exports:{}},z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ss=Symbol.for("react.element"),hf=Symbol.for("react.portal"),ff=Symbol.for("react.fragment"),pf=Symbol.for("react.strict_mode"),mf=Symbol.for("react.profiler"),gf=Symbol.for("react.provider"),vf=Symbol.for("react.context"),yf=Symbol.for("react.forward_ref"),wf=Symbol.for("react.suspense"),_f=Symbol.for("react.memo"),xf=Symbol.for("react.lazy"),$l=Symbol.iterator;function bf(e){return e===null||typeof e!="object"?null:(e=$l&&e[$l]||e["@@iterator"],typeof e=="function"?e:null)}var _c={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xc=Object.assign,bc={};function on(e,t,r){this.props=e,this.context=t,this.refs=bc,this.updater=r||_c}on.prototype.isReactComponent={};on.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};on.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function kc(){}kc.prototype=on.prototype;function Ia(e,t,r){this.props=e,this.context=t,this.refs=bc,this.updater=r||_c}var La=Ia.prototype=new kc;La.constructor=Ia;xc(La,on.prototype);La.isPureReactComponent=!0;var Ul=Array.isArray,Sc=Object.prototype.hasOwnProperty,$a={current:null},Ec={key:!0,ref:!0,__self:!0,__source:!0};function Nc(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Sc.call(t,n)&&!Ec.hasOwnProperty(n)&&(s[n]=t[n]);var a=arguments.length-2;if(a===1)s.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)s[n]===void 0&&(s[n]=a[n]);return{$$typeof:ss,type:e,key:i,ref:o,props:s,_owner:$a.current}}function kf(e,t){return{$$typeof:ss,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ua(e){return typeof e=="object"&&e!==null&&e.$$typeof===ss}function Sf(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Dl=/\/+/g;function Mi(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Sf(""+e.key):t.toString(36)}function Is(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case ss:case hf:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+Mi(o,0):n,Ul(s)?(r="",e!=null&&(r=e.replace(Dl,"$&/")+"/"),Is(s,t,r,"",function(c){return c})):s!=null&&(Ua(s)&&(s=kf(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Dl,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",Ul(e))for(var a=0;a<e.length;a++){i=e[a];var l=n+Mi(i,a);o+=Is(i,t,r,l,s)}else if(l=bf(e),typeof l=="function")for(e=l.call(e),a=0;!(i=e.next()).done;)i=i.value,l=n+Mi(i,a++),o+=Is(i,t,r,l,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function hs(e,t,r){if(e==null)return e;var n=[],s=0;return Is(e,n,"","",function(i){return t.call(r,i,s++)}),n}function Ef(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Te={current:null},Ls={transition:null},Nf={ReactCurrentDispatcher:Te,ReactCurrentBatchConfig:Ls,ReactCurrentOwner:$a};function jc(){throw Error("act(...) is not supported in production builds of React.")}z.Children={map:hs,forEach:function(e,t,r){hs(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return hs(e,function(){t++}),t},toArray:function(e){return hs(e,function(t){return t})||[]},only:function(e){if(!Ua(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};z.Component=on;z.Fragment=ff;z.Profiler=mf;z.PureComponent=Ia;z.StrictMode=pf;z.Suspense=wf;z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nf;z.act=jc;z.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=xc({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=$a.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)Sc.call(t,l)&&!Ec.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:ss,type:e.type,key:s,ref:i,props:n,_owner:o}};z.createContext=function(e){return e={$$typeof:vf,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:gf,_context:e},e.Consumer=e};z.createElement=Nc;z.createFactory=function(e){var t=Nc.bind(null,e);return t.type=e,t};z.createRef=function(){return{current:null}};z.forwardRef=function(e){return{$$typeof:yf,render:e}};z.isValidElement=Ua;z.lazy=function(e){return{$$typeof:xf,_payload:{_status:-1,_result:e},_init:Ef}};z.memo=function(e,t){return{$$typeof:_f,type:e,compare:t===void 0?null:t}};z.startTransition=function(e){var t=Ls.transition;Ls.transition={};try{e()}finally{Ls.transition=t}};z.unstable_act=jc;z.useCallback=function(e,t){return Te.current.useCallback(e,t)};z.useContext=function(e){return Te.current.useContext(e)};z.useDebugValue=function(){};z.useDeferredValue=function(e){return Te.current.useDeferredValue(e)};z.useEffect=function(e,t){return Te.current.useEffect(e,t)};z.useId=function(){return Te.current.useId()};z.useImperativeHandle=function(e,t,r){return Te.current.useImperativeHandle(e,t,r)};z.useInsertionEffect=function(e,t){return Te.current.useInsertionEffect(e,t)};z.useLayoutEffect=function(e,t){return Te.current.useLayoutEffect(e,t)};z.useMemo=function(e,t){return Te.current.useMemo(e,t)};z.useReducer=function(e,t,r){return Te.current.useReducer(e,t,r)};z.useRef=function(e){return Te.current.useRef(e)};z.useState=function(e){return Te.current.useState(e)};z.useSyncExternalStore=function(e,t,r){return Te.current.useSyncExternalStore(e,t,r)};z.useTransition=function(){return Te.current.useTransition()};z.version="18.3.1";wc.exports=z;var P=wc.exports;const Tc=df(P);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jf=P,Tf=Symbol.for("react.element"),Cf=Symbol.for("react.fragment"),Of=Object.prototype.hasOwnProperty,Rf=jf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Af={key:!0,ref:!0,__self:!0,__source:!0};function Cc(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)Of.call(t,n)&&!Af.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:Tf,type:e,key:i,ref:o,props:s,_owner:Rf.current}}wi.Fragment=Cf;wi.jsx=Cc;wi.jsxs=Cc;yc.exports=wi;var u=yc.exports,jo={},Oc={exports:{}},We={},Rc={exports:{}},Ac={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(b,C){var A=b.length;b.push(C);e:for(;0<A;){var W=A-1>>>1,V=b[W];if(0<s(V,C))b[W]=C,b[A]=V,A=W;else break e}}function r(b){return b.length===0?null:b[0]}function n(b){if(b.length===0)return null;var C=b[0],A=b.pop();if(A!==C){b[0]=A;e:for(var W=0,V=b.length,Xt=V>>>1;W<Xt;){var ut=2*(W+1)-1,zi=b[ut],Zt=ut+1,ds=b[Zt];if(0>s(zi,A))Zt<V&&0>s(ds,zi)?(b[W]=ds,b[Zt]=A,W=Zt):(b[W]=zi,b[ut]=A,W=ut);else if(Zt<V&&0>s(ds,A))b[W]=ds,b[Zt]=A,W=Zt;else break e}}return C}function s(b,C){var A=b.sortIndex-C.sortIndex;return A!==0?A:b.id-C.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,p=null,f=3,v=!1,w=!1,y=!1,E=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(b){for(var C=r(c);C!==null;){if(C.callback===null)n(c);else if(C.startTime<=b)n(c),C.sortIndex=C.expirationTime,t(l,C);else break;C=r(c)}}function _(b){if(y=!1,m(b),!w)if(r(l)!==null)w=!0,M(S);else{var C=r(c);C!==null&&re(_,C.startTime-b)}}function S(b,C){w=!1,y&&(y=!1,g(T),T=-1),v=!0;var A=f;try{for(m(C),p=r(l);p!==null&&(!(p.expirationTime>C)||b&&!oe());){var W=p.callback;if(typeof W=="function"){p.callback=null,f=p.priorityLevel;var V=W(p.expirationTime<=C);C=e.unstable_now(),typeof V=="function"?p.callback=V:p===r(l)&&n(l),m(C)}else n(l);p=r(l)}if(p!==null)var Xt=!0;else{var ut=r(c);ut!==null&&re(_,ut.startTime-C),Xt=!1}return Xt}finally{p=null,f=A,v=!1}}var x=!1,k=null,T=-1,U=5,D=-1;function oe(){return!(e.unstable_now()-D<U)}function Xe(){if(k!==null){var b=e.unstable_now();D=b;var C=!0;try{C=k(!0,b)}finally{C?He():(x=!1,k=null)}}else x=!1}var He;if(typeof h=="function")He=function(){h(Xe)};else if(typeof MessageChannel<"u"){var _r=new MessageChannel,j=_r.port2;_r.port1.onmessage=Xe,He=function(){j.postMessage(null)}}else He=function(){E(Xe,0)};function M(b){k=b,x||(x=!0,He())}function re(b,C){T=E(function(){b(e.unstable_now())},C)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(b){b.callback=null},e.unstable_continueExecution=function(){w||v||(w=!0,M(S))},e.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<b?Math.floor(1e3/b):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(b){switch(f){case 1:case 2:case 3:var C=3;break;default:C=f}var A=f;f=C;try{return b()}finally{f=A}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(b,C){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var A=f;f=b;try{return C()}finally{f=A}},e.unstable_scheduleCallback=function(b,C,A){var W=e.unstable_now();switch(typeof A=="object"&&A!==null?(A=A.delay,A=typeof A=="number"&&0<A?W+A:W):A=W,b){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=A+V,b={id:d++,callback:C,priorityLevel:b,startTime:A,expirationTime:V,sortIndex:-1},A>W?(b.sortIndex=A,t(c,b),r(l)===null&&b===r(c)&&(y?(g(T),T=-1):y=!0,re(_,A-W))):(b.sortIndex=V,t(l,b),w||v||(w=!0,M(S))),b},e.unstable_shouldYield=oe,e.unstable_wrapCallback=function(b){var C=f;return function(){var A=f;f=C;try{return b.apply(this,arguments)}finally{f=A}}}})(Ac);Rc.exports=Ac;var Pf=Rc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var If=P,Fe=Pf;function N(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Pc=new Set,Ln={};function yr(e,t){Xr(e,t),Xr(e+"Capture",t)}function Xr(e,t){for(Ln[e]=t,e=0;e<t.length;e++)Pc.add(t[e])}var kt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),To=Object.prototype.hasOwnProperty,Lf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zl={},Ml={};function $f(e){return To.call(Ml,e)?!0:To.call(zl,e)?!1:Lf.test(e)?Ml[e]=!0:(zl[e]=!0,!1)}function Uf(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Df(e,t,r,n){if(t===null||typeof t>"u"||Uf(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ce(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var we={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){we[e]=new Ce(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];we[t]=new Ce(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){we[e]=new Ce(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){we[e]=new Ce(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){we[e]=new Ce(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){we[e]=new Ce(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){we[e]=new Ce(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){we[e]=new Ce(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){we[e]=new Ce(e,5,!1,e.toLowerCase(),null,!1,!1)});var Da=/[\-:]([a-z])/g;function za(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Da,za);we[t]=new Ce(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Da,za);we[t]=new Ce(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Da,za);we[t]=new Ce(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){we[e]=new Ce(e,1,!1,e.toLowerCase(),null,!1,!1)});we.xlinkHref=new Ce("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){we[e]=new Ce(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ma(e,t,r,n){var s=we.hasOwnProperty(t)?we[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Df(t,r,s,n)&&(r=null),n||s===null?$f(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var jt=If.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fs=Symbol.for("react.element"),Ar=Symbol.for("react.portal"),Pr=Symbol.for("react.fragment"),Ba=Symbol.for("react.strict_mode"),Co=Symbol.for("react.profiler"),Ic=Symbol.for("react.provider"),Lc=Symbol.for("react.context"),Fa=Symbol.for("react.forward_ref"),Oo=Symbol.for("react.suspense"),Ro=Symbol.for("react.suspense_list"),Wa=Symbol.for("react.memo"),Rt=Symbol.for("react.lazy"),$c=Symbol.for("react.offscreen"),Bl=Symbol.iterator;function un(e){return e===null||typeof e!="object"?null:(e=Bl&&e[Bl]||e["@@iterator"],typeof e=="function"?e:null)}var te=Object.assign,Bi;function yn(e){if(Bi===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Bi=t&&t[1]||""}return`
`+Bi+e}var Fi=!1;function Wi(e,t){if(!e||Fi)return"";Fi=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{Fi=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?yn(e):""}function zf(e){switch(e.tag){case 5:return yn(e.type);case 16:return yn("Lazy");case 13:return yn("Suspense");case 19:return yn("SuspenseList");case 0:case 2:case 15:return e=Wi(e.type,!1),e;case 11:return e=Wi(e.type.render,!1),e;case 1:return e=Wi(e.type,!0),e;default:return""}}function Ao(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Pr:return"Fragment";case Ar:return"Portal";case Co:return"Profiler";case Ba:return"StrictMode";case Oo:return"Suspense";case Ro:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Lc:return(e.displayName||"Context")+".Consumer";case Ic:return(e._context.displayName||"Context")+".Provider";case Fa:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Wa:return t=e.displayName||null,t!==null?t:Ao(e.type)||"Memo";case Rt:t=e._payload,e=e._init;try{return Ao(e(t))}catch{}}return null}function Mf(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ao(t);case 8:return t===Ba?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function qt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Uc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Bf(e){var t=Uc(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ps(e){e._valueTracker||(e._valueTracker=Bf(e))}function Dc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Uc(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Ks(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Po(e,t){var r=t.checked;return te({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Fl(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=qt(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function zc(e,t){t=t.checked,t!=null&&Ma(e,"checked",t,!1)}function Io(e,t){zc(e,t);var r=qt(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Lo(e,t.type,r):t.hasOwnProperty("defaultValue")&&Lo(e,t.type,qt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Wl(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Lo(e,t,r){(t!=="number"||Ks(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var wn=Array.isArray;function Hr(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+qt(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function $o(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(N(91));return te({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Vl(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(N(92));if(wn(r)){if(1<r.length)throw Error(N(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:qt(r)}}function Mc(e,t){var r=qt(t.value),n=qt(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Hl(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Bc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Uo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Bc(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ms,Fc=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ms=ms||document.createElement("div"),ms.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ms.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function $n(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var kn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ff=["Webkit","ms","Moz","O"];Object.keys(kn).forEach(function(e){Ff.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),kn[t]=kn[e]})});function Wc(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||kn.hasOwnProperty(e)&&kn[e]?(""+t).trim():t+"px"}function Vc(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Wc(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var Wf=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Do(e,t){if(t){if(Wf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(N(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(N(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(N(61))}if(t.style!=null&&typeof t.style!="object")throw Error(N(62))}}function zo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mo=null;function Va(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Bo=null,Kr=null,qr=null;function Kl(e){if(e=as(e)){if(typeof Bo!="function")throw Error(N(280));var t=e.stateNode;t&&(t=Si(t),Bo(e.stateNode,e.type,t))}}function Hc(e){Kr?qr?qr.push(e):qr=[e]:Kr=e}function Kc(){if(Kr){var e=Kr,t=qr;if(qr=Kr=null,Kl(e),t)for(e=0;e<t.length;e++)Kl(t[e])}}function qc(e,t){return e(t)}function Gc(){}var Vi=!1;function Jc(e,t,r){if(Vi)return e(t,r);Vi=!0;try{return qc(e,t,r)}finally{Vi=!1,(Kr!==null||qr!==null)&&(Gc(),Kc())}}function Un(e,t){var r=e.stateNode;if(r===null)return null;var n=Si(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(N(231,t,typeof r));return r}var Fo=!1;if(kt)try{var cn={};Object.defineProperty(cn,"passive",{get:function(){Fo=!0}}),window.addEventListener("test",cn,cn),window.removeEventListener("test",cn,cn)}catch{Fo=!1}function Vf(e,t,r,n,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(d){this.onError(d)}}var Sn=!1,qs=null,Gs=!1,Wo=null,Hf={onError:function(e){Sn=!0,qs=e}};function Kf(e,t,r,n,s,i,o,a,l){Sn=!1,qs=null,Vf.apply(Hf,arguments)}function qf(e,t,r,n,s,i,o,a,l){if(Kf.apply(this,arguments),Sn){if(Sn){var c=qs;Sn=!1,qs=null}else throw Error(N(198));Gs||(Gs=!0,Wo=c)}}function wr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Qc(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ql(e){if(wr(e)!==e)throw Error(N(188))}function Gf(e){var t=e.alternate;if(!t){if(t=wr(e),t===null)throw Error(N(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return ql(s),e;if(i===n)return ql(s),t;i=i.sibling}throw Error(N(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o)throw Error(N(189))}}if(r.alternate!==n)throw Error(N(190))}if(r.tag!==3)throw Error(N(188));return r.stateNode.current===r?e:t}function Yc(e){return e=Gf(e),e!==null?Xc(e):null}function Xc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Xc(e);if(t!==null)return t;e=e.sibling}return null}var Zc=Fe.unstable_scheduleCallback,Gl=Fe.unstable_cancelCallback,Jf=Fe.unstable_shouldYield,Qf=Fe.unstable_requestPaint,ie=Fe.unstable_now,Yf=Fe.unstable_getCurrentPriorityLevel,Ha=Fe.unstable_ImmediatePriority,ed=Fe.unstable_UserBlockingPriority,Js=Fe.unstable_NormalPriority,Xf=Fe.unstable_LowPriority,td=Fe.unstable_IdlePriority,_i=null,pt=null;function Zf(e){if(pt&&typeof pt.onCommitFiberRoot=="function")try{pt.onCommitFiberRoot(_i,e,void 0,(e.current.flags&128)===128)}catch{}}var ot=Math.clz32?Math.clz32:rp,ep=Math.log,tp=Math.LN2;function rp(e){return e>>>=0,e===0?32:31-(ep(e)/tp|0)|0}var gs=64,vs=4194304;function _n(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Qs(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var a=o&~s;a!==0?n=_n(a):(i&=o,i!==0&&(n=_n(i)))}else o=r&~s,o!==0?n=_n(o):i!==0&&(n=_n(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-ot(t),s=1<<r,n|=e[r],t&=~s;return n}function np(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sp(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ot(i),a=1<<o,l=s[o];l===-1?(!(a&r)||a&n)&&(s[o]=np(a,t)):l<=t&&(e.expiredLanes|=a),i&=~a}}function Vo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function rd(){var e=gs;return gs<<=1,!(gs&4194240)&&(gs=64),e}function Hi(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function is(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ot(t),e[t]=r}function ip(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-ot(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function Ka(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ot(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var H=0;function nd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var sd,qa,id,od,ad,Ho=!1,ys=[],zt=null,Mt=null,Bt=null,Dn=new Map,zn=new Map,It=[],op="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jl(e,t){switch(e){case"focusin":case"focusout":zt=null;break;case"dragenter":case"dragleave":Mt=null;break;case"mouseover":case"mouseout":Bt=null;break;case"pointerover":case"pointerout":Dn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":zn.delete(t.pointerId)}}function dn(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=as(t),t!==null&&qa(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function ap(e,t,r,n,s){switch(t){case"focusin":return zt=dn(zt,e,t,r,n,s),!0;case"dragenter":return Mt=dn(Mt,e,t,r,n,s),!0;case"mouseover":return Bt=dn(Bt,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return Dn.set(i,dn(Dn.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,zn.set(i,dn(zn.get(i)||null,e,t,r,n,s)),!0}return!1}function ld(e){var t=ar(e.target);if(t!==null){var r=wr(t);if(r!==null){if(t=r.tag,t===13){if(t=Qc(r),t!==null){e.blockedOn=t,ad(e.priority,function(){id(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $s(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Ko(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Mo=n,r.target.dispatchEvent(n),Mo=null}else return t=as(r),t!==null&&qa(t),e.blockedOn=r,!1;t.shift()}return!0}function Ql(e,t,r){$s(e)&&r.delete(t)}function lp(){Ho=!1,zt!==null&&$s(zt)&&(zt=null),Mt!==null&&$s(Mt)&&(Mt=null),Bt!==null&&$s(Bt)&&(Bt=null),Dn.forEach(Ql),zn.forEach(Ql)}function hn(e,t){e.blockedOn===t&&(e.blockedOn=null,Ho||(Ho=!0,Fe.unstable_scheduleCallback(Fe.unstable_NormalPriority,lp)))}function Mn(e){function t(s){return hn(s,e)}if(0<ys.length){hn(ys[0],e);for(var r=1;r<ys.length;r++){var n=ys[r];n.blockedOn===e&&(n.blockedOn=null)}}for(zt!==null&&hn(zt,e),Mt!==null&&hn(Mt,e),Bt!==null&&hn(Bt,e),Dn.forEach(t),zn.forEach(t),r=0;r<It.length;r++)n=It[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<It.length&&(r=It[0],r.blockedOn===null);)ld(r),r.blockedOn===null&&It.shift()}var Gr=jt.ReactCurrentBatchConfig,Ys=!0;function up(e,t,r,n){var s=H,i=Gr.transition;Gr.transition=null;try{H=1,Ga(e,t,r,n)}finally{H=s,Gr.transition=i}}function cp(e,t,r,n){var s=H,i=Gr.transition;Gr.transition=null;try{H=4,Ga(e,t,r,n)}finally{H=s,Gr.transition=i}}function Ga(e,t,r,n){if(Ys){var s=Ko(e,t,r,n);if(s===null)to(e,t,n,Xs,r),Jl(e,n);else if(ap(s,e,t,r,n))n.stopPropagation();else if(Jl(e,n),t&4&&-1<op.indexOf(e)){for(;s!==null;){var i=as(s);if(i!==null&&sd(i),i=Ko(e,t,r,n),i===null&&to(e,t,n,Xs,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else to(e,t,n,null,r)}}var Xs=null;function Ko(e,t,r,n){if(Xs=null,e=Va(n),e=ar(e),e!==null)if(t=wr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Qc(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xs=e,null}function ud(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yf()){case Ha:return 1;case ed:return 4;case Js:case Xf:return 16;case td:return 536870912;default:return 16}default:return 16}}var Ut=null,Ja=null,Us=null;function cd(){if(Us)return Us;var e,t=Ja,r=t.length,n,s="value"in Ut?Ut.value:Ut.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return Us=s.slice(e,1<n?1-n:void 0)}function Ds(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ws(){return!0}function Yl(){return!1}function Ve(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ws:Yl,this.isPropagationStopped=Yl,this}return te(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ws)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ws)},persist:function(){},isPersistent:ws}),t}var an={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qa=Ve(an),os=te({},an,{view:0,detail:0}),dp=Ve(os),Ki,qi,fn,xi=te({},os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ya,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fn&&(fn&&e.type==="mousemove"?(Ki=e.screenX-fn.screenX,qi=e.screenY-fn.screenY):qi=Ki=0,fn=e),Ki)},movementY:function(e){return"movementY"in e?e.movementY:qi}}),Xl=Ve(xi),hp=te({},xi,{dataTransfer:0}),fp=Ve(hp),pp=te({},os,{relatedTarget:0}),Gi=Ve(pp),mp=te({},an,{animationName:0,elapsedTime:0,pseudoElement:0}),gp=Ve(mp),vp=te({},an,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yp=Ve(vp),wp=te({},an,{data:0}),Zl=Ve(wp),_p={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=bp[e])?!!t[e]:!1}function Ya(){return kp}var Sp=te({},os,{key:function(e){if(e.key){var t=_p[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ds(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?xp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ya,charCode:function(e){return e.type==="keypress"?Ds(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ds(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ep=Ve(Sp),Np=te({},xi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eu=Ve(Np),jp=te({},os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ya}),Tp=Ve(jp),Cp=te({},an,{propertyName:0,elapsedTime:0,pseudoElement:0}),Op=Ve(Cp),Rp=te({},xi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ap=Ve(Rp),Pp=[9,13,27,32],Xa=kt&&"CompositionEvent"in window,En=null;kt&&"documentMode"in document&&(En=document.documentMode);var Ip=kt&&"TextEvent"in window&&!En,dd=kt&&(!Xa||En&&8<En&&11>=En),tu=" ",ru=!1;function hd(e,t){switch(e){case"keyup":return Pp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ir=!1;function Lp(e,t){switch(e){case"compositionend":return fd(t);case"keypress":return t.which!==32?null:(ru=!0,tu);case"textInput":return e=t.data,e===tu&&ru?null:e;default:return null}}function $p(e,t){if(Ir)return e==="compositionend"||!Xa&&hd(e,t)?(e=cd(),Us=Ja=Ut=null,Ir=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return dd&&t.locale!=="ko"?null:t.data;default:return null}}var Up={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Up[e.type]:t==="textarea"}function pd(e,t,r,n){Hc(n),t=Zs(t,"onChange"),0<t.length&&(r=new Qa("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Nn=null,Bn=null;function Dp(e){Ed(e,0)}function bi(e){var t=Ur(e);if(Dc(t))return e}function zp(e,t){if(e==="change")return t}var md=!1;if(kt){var Ji;if(kt){var Qi="oninput"in document;if(!Qi){var su=document.createElement("div");su.setAttribute("oninput","return;"),Qi=typeof su.oninput=="function"}Ji=Qi}else Ji=!1;md=Ji&&(!document.documentMode||9<document.documentMode)}function iu(){Nn&&(Nn.detachEvent("onpropertychange",gd),Bn=Nn=null)}function gd(e){if(e.propertyName==="value"&&bi(Bn)){var t=[];pd(t,Bn,e,Va(e)),Jc(Dp,t)}}function Mp(e,t,r){e==="focusin"?(iu(),Nn=t,Bn=r,Nn.attachEvent("onpropertychange",gd)):e==="focusout"&&iu()}function Bp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return bi(Bn)}function Fp(e,t){if(e==="click")return bi(t)}function Wp(e,t){if(e==="input"||e==="change")return bi(t)}function Vp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var lt=typeof Object.is=="function"?Object.is:Vp;function Fn(e,t){if(lt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!To.call(t,s)||!lt(e[s],t[s]))return!1}return!0}function ou(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function au(e,t){var r=ou(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ou(r)}}function vd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?vd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function yd(){for(var e=window,t=Ks();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ks(e.document)}return t}function Za(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Hp(e){var t=yd(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&vd(r.ownerDocument.documentElement,r)){if(n!==null&&Za(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=au(r,i);var o=au(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Kp=kt&&"documentMode"in document&&11>=document.documentMode,Lr=null,qo=null,jn=null,Go=!1;function lu(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Go||Lr==null||Lr!==Ks(n)||(n=Lr,"selectionStart"in n&&Za(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),jn&&Fn(jn,n)||(jn=n,n=Zs(qo,"onSelect"),0<n.length&&(t=new Qa("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Lr)))}function _s(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var $r={animationend:_s("Animation","AnimationEnd"),animationiteration:_s("Animation","AnimationIteration"),animationstart:_s("Animation","AnimationStart"),transitionend:_s("Transition","TransitionEnd")},Yi={},wd={};kt&&(wd=document.createElement("div").style,"AnimationEvent"in window||(delete $r.animationend.animation,delete $r.animationiteration.animation,delete $r.animationstart.animation),"TransitionEvent"in window||delete $r.transitionend.transition);function ki(e){if(Yi[e])return Yi[e];if(!$r[e])return e;var t=$r[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in wd)return Yi[e]=t[r];return e}var _d=ki("animationend"),xd=ki("animationiteration"),bd=ki("animationstart"),kd=ki("transitionend"),Sd=new Map,uu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jt(e,t){Sd.set(e,t),yr(t,[e])}for(var Xi=0;Xi<uu.length;Xi++){var Zi=uu[Xi],qp=Zi.toLowerCase(),Gp=Zi[0].toUpperCase()+Zi.slice(1);Jt(qp,"on"+Gp)}Jt(_d,"onAnimationEnd");Jt(xd,"onAnimationIteration");Jt(bd,"onAnimationStart");Jt("dblclick","onDoubleClick");Jt("focusin","onFocus");Jt("focusout","onBlur");Jt(kd,"onTransitionEnd");Xr("onMouseEnter",["mouseout","mouseover"]);Xr("onMouseLeave",["mouseout","mouseover"]);Xr("onPointerEnter",["pointerout","pointerover"]);Xr("onPointerLeave",["pointerout","pointerover"]);yr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yr("onBeforeInput",["compositionend","keypress","textInput","paste"]);yr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jp=new Set("cancel close invalid load scroll toggle".split(" ").concat(xn));function cu(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,qf(n,t,void 0,e),e.currentTarget=null}function Ed(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;cu(s,a,c),i=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;cu(s,a,c),i=l}}}if(Gs)throw e=Wo,Gs=!1,Wo=null,e}function G(e,t){var r=t[Zo];r===void 0&&(r=t[Zo]=new Set);var n=e+"__bubble";r.has(n)||(Nd(t,e,2,!1),r.add(n))}function eo(e,t,r){var n=0;t&&(n|=4),Nd(r,e,n,t)}var xs="_reactListening"+Math.random().toString(36).slice(2);function Wn(e){if(!e[xs]){e[xs]=!0,Pc.forEach(function(r){r!=="selectionchange"&&(Jp.has(r)||eo(r,!1,e),eo(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[xs]||(t[xs]=!0,eo("selectionchange",!1,t))}}function Nd(e,t,r,n){switch(ud(t)){case 1:var s=up;break;case 4:s=cp;break;default:s=Ga}r=s.bind(null,t,r,e),s=void 0,!Fo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function to(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=ar(a),o===null)return;if(l=o.tag,l===5||l===6){n=i=o;continue e}a=a.parentNode}}n=n.return}Jc(function(){var c=i,d=Va(r),p=[];e:{var f=Sd.get(e);if(f!==void 0){var v=Qa,w=e;switch(e){case"keypress":if(Ds(r)===0)break e;case"keydown":case"keyup":v=Ep;break;case"focusin":w="focus",v=Gi;break;case"focusout":w="blur",v=Gi;break;case"beforeblur":case"afterblur":v=Gi;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Xl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=fp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=Tp;break;case _d:case xd:case bd:v=gp;break;case kd:v=Op;break;case"scroll":v=dp;break;case"wheel":v=Ap;break;case"copy":case"cut":case"paste":v=yp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=eu}var y=(t&4)!==0,E=!y&&e==="scroll",g=y?f!==null?f+"Capture":null:f;y=[];for(var h=c,m;h!==null;){m=h;var _=m.stateNode;if(m.tag===5&&_!==null&&(m=_,g!==null&&(_=Un(h,g),_!=null&&y.push(Vn(h,_,m)))),E)break;h=h.return}0<y.length&&(f=new v(f,w,null,r,d),p.push({event:f,listeners:y}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",f&&r!==Mo&&(w=r.relatedTarget||r.fromElement)&&(ar(w)||w[St]))break e;if((v||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,v?(w=r.relatedTarget||r.toElement,v=c,w=w?ar(w):null,w!==null&&(E=wr(w),w!==E||w.tag!==5&&w.tag!==6)&&(w=null)):(v=null,w=c),v!==w)){if(y=Xl,_="onMouseLeave",g="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(y=eu,_="onPointerLeave",g="onPointerEnter",h="pointer"),E=v==null?f:Ur(v),m=w==null?f:Ur(w),f=new y(_,h+"leave",v,r,d),f.target=E,f.relatedTarget=m,_=null,ar(d)===c&&(y=new y(g,h+"enter",w,r,d),y.target=m,y.relatedTarget=E,_=y),E=_,v&&w)t:{for(y=v,g=w,h=0,m=y;m;m=xr(m))h++;for(m=0,_=g;_;_=xr(_))m++;for(;0<h-m;)y=xr(y),h--;for(;0<m-h;)g=xr(g),m--;for(;h--;){if(y===g||g!==null&&y===g.alternate)break t;y=xr(y),g=xr(g)}y=null}else y=null;v!==null&&du(p,f,v,y,!1),w!==null&&E!==null&&du(p,E,w,y,!0)}}e:{if(f=c?Ur(c):window,v=f.nodeName&&f.nodeName.toLowerCase(),v==="select"||v==="input"&&f.type==="file")var S=zp;else if(nu(f))if(md)S=Wp;else{S=Bp;var x=Mp}else(v=f.nodeName)&&v.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=Fp);if(S&&(S=S(e,c))){pd(p,S,r,d);break e}x&&x(e,f,c),e==="focusout"&&(x=f._wrapperState)&&x.controlled&&f.type==="number"&&Lo(f,"number",f.value)}switch(x=c?Ur(c):window,e){case"focusin":(nu(x)||x.contentEditable==="true")&&(Lr=x,qo=c,jn=null);break;case"focusout":jn=qo=Lr=null;break;case"mousedown":Go=!0;break;case"contextmenu":case"mouseup":case"dragend":Go=!1,lu(p,r,d);break;case"selectionchange":if(Kp)break;case"keydown":case"keyup":lu(p,r,d)}var k;if(Xa)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Ir?hd(e,r)&&(T="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(T="onCompositionStart");T&&(dd&&r.locale!=="ko"&&(Ir||T!=="onCompositionStart"?T==="onCompositionEnd"&&Ir&&(k=cd()):(Ut=d,Ja="value"in Ut?Ut.value:Ut.textContent,Ir=!0)),x=Zs(c,T),0<x.length&&(T=new Zl(T,e,null,r,d),p.push({event:T,listeners:x}),k?T.data=k:(k=fd(r),k!==null&&(T.data=k)))),(k=Ip?Lp(e,r):$p(e,r))&&(c=Zs(c,"onBeforeInput"),0<c.length&&(d=new Zl("onBeforeInput","beforeinput",null,r,d),p.push({event:d,listeners:c}),d.data=k))}Ed(p,t)})}function Vn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Zs(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Un(e,r),i!=null&&n.unshift(Vn(e,i,s)),i=Un(e,t),i!=null&&n.push(Vn(e,i,s))),e=e.return}return n}function xr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function du(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,c=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&c!==null&&(a=c,s?(l=Un(r,i),l!=null&&o.unshift(Vn(r,l,a))):s||(l=Un(r,i),l!=null&&o.push(Vn(r,l,a)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var Qp=/\r\n?/g,Yp=/\u0000|\uFFFD/g;function hu(e){return(typeof e=="string"?e:""+e).replace(Qp,`
`).replace(Yp,"")}function bs(e,t,r){if(t=hu(t),hu(e)!==t&&r)throw Error(N(425))}function ei(){}var Jo=null,Qo=null;function Yo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Xo=typeof setTimeout=="function"?setTimeout:void 0,Xp=typeof clearTimeout=="function"?clearTimeout:void 0,fu=typeof Promise=="function"?Promise:void 0,Zp=typeof queueMicrotask=="function"?queueMicrotask:typeof fu<"u"?function(e){return fu.resolve(null).then(e).catch(em)}:Xo;function em(e){setTimeout(function(){throw e})}function ro(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Mn(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Mn(t)}function Ft(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function pu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var ln=Math.random().toString(36).slice(2),ft="__reactFiber$"+ln,Hn="__reactProps$"+ln,St="__reactContainer$"+ln,Zo="__reactEvents$"+ln,tm="__reactListeners$"+ln,rm="__reactHandles$"+ln;function ar(e){var t=e[ft];if(t)return t;for(var r=e.parentNode;r;){if(t=r[St]||r[ft]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=pu(e);e!==null;){if(r=e[ft])return r;e=pu(e)}return t}e=r,r=e.parentNode}return null}function as(e){return e=e[ft]||e[St],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ur(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(N(33))}function Si(e){return e[Hn]||null}var ea=[],Dr=-1;function Qt(e){return{current:e}}function Q(e){0>Dr||(e.current=ea[Dr],ea[Dr]=null,Dr--)}function q(e,t){Dr++,ea[Dr]=e.current,e.current=t}var Gt={},Se=Qt(Gt),Ae=Qt(!1),fr=Gt;function Zr(e,t){var r=e.type.contextTypes;if(!r)return Gt;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pe(e){return e=e.childContextTypes,e!=null}function ti(){Q(Ae),Q(Se)}function mu(e,t,r){if(Se.current!==Gt)throw Error(N(168));q(Se,t),q(Ae,r)}function jd(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(N(108,Mf(e)||"Unknown",s));return te({},r,n)}function ri(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Gt,fr=Se.current,q(Se,e),q(Ae,Ae.current),!0}function gu(e,t,r){var n=e.stateNode;if(!n)throw Error(N(169));r?(e=jd(e,t,fr),n.__reactInternalMemoizedMergedChildContext=e,Q(Ae),Q(Se),q(Se,e)):Q(Ae),q(Ae,r)}var wt=null,Ei=!1,no=!1;function Td(e){wt===null?wt=[e]:wt.push(e)}function nm(e){Ei=!0,Td(e)}function Yt(){if(!no&&wt!==null){no=!0;var e=0,t=H;try{var r=wt;for(H=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}wt=null,Ei=!1}catch(s){throw wt!==null&&(wt=wt.slice(e+1)),Zc(Ha,Yt),s}finally{H=t,no=!1}}return null}var zr=[],Mr=0,ni=null,si=0,Ke=[],qe=0,pr=null,_t=1,xt="";function rr(e,t){zr[Mr++]=si,zr[Mr++]=ni,ni=e,si=t}function Cd(e,t,r){Ke[qe++]=_t,Ke[qe++]=xt,Ke[qe++]=pr,pr=e;var n=_t;e=xt;var s=32-ot(n)-1;n&=~(1<<s),r+=1;var i=32-ot(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,_t=1<<32-ot(t)+s|r<<s|n,xt=i+e}else _t=1<<i|r<<s|n,xt=e}function el(e){e.return!==null&&(rr(e,1),Cd(e,1,0))}function tl(e){for(;e===ni;)ni=zr[--Mr],zr[Mr]=null,si=zr[--Mr],zr[Mr]=null;for(;e===pr;)pr=Ke[--qe],Ke[qe]=null,xt=Ke[--qe],Ke[qe]=null,_t=Ke[--qe],Ke[qe]=null}var Be=null,Me=null,Y=!1,it=null;function Od(e,t){var r=Ge(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function vu(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Be=e,Me=Ft(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Be=e,Me=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=pr!==null?{id:_t,overflow:xt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ge(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Be=e,Me=null,!0):!1;default:return!1}}function ta(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ra(e){if(Y){var t=Me;if(t){var r=t;if(!vu(e,t)){if(ta(e))throw Error(N(418));t=Ft(r.nextSibling);var n=Be;t&&vu(e,t)?Od(n,r):(e.flags=e.flags&-4097|2,Y=!1,Be=e)}}else{if(ta(e))throw Error(N(418));e.flags=e.flags&-4097|2,Y=!1,Be=e}}}function yu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Be=e}function ks(e){if(e!==Be)return!1;if(!Y)return yu(e),Y=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Yo(e.type,e.memoizedProps)),t&&(t=Me)){if(ta(e))throw Rd(),Error(N(418));for(;t;)Od(e,t),t=Ft(t.nextSibling)}if(yu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(N(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Me=Ft(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Me=null}}else Me=Be?Ft(e.stateNode.nextSibling):null;return!0}function Rd(){for(var e=Me;e;)e=Ft(e.nextSibling)}function en(){Me=Be=null,Y=!1}function rl(e){it===null?it=[e]:it.push(e)}var sm=jt.ReactCurrentBatchConfig;function pn(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(N(309));var n=r.stateNode}if(!n)throw Error(N(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(N(284));if(!r._owner)throw Error(N(290,e))}return e}function Ss(e,t){throw e=Object.prototype.toString.call(t),Error(N(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function wu(e){var t=e._init;return t(e._payload)}function Ad(e){function t(g,h){if(e){var m=g.deletions;m===null?(g.deletions=[h],g.flags|=16):m.push(h)}}function r(g,h){if(!e)return null;for(;h!==null;)t(g,h),h=h.sibling;return null}function n(g,h){for(g=new Map;h!==null;)h.key!==null?g.set(h.key,h):g.set(h.index,h),h=h.sibling;return g}function s(g,h){return g=Kt(g,h),g.index=0,g.sibling=null,g}function i(g,h,m){return g.index=m,e?(m=g.alternate,m!==null?(m=m.index,m<h?(g.flags|=2,h):m):(g.flags|=2,h)):(g.flags|=1048576,h)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function a(g,h,m,_){return h===null||h.tag!==6?(h=co(m,g.mode,_),h.return=g,h):(h=s(h,m),h.return=g,h)}function l(g,h,m,_){var S=m.type;return S===Pr?d(g,h,m.props.children,_,m.key):h!==null&&(h.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Rt&&wu(S)===h.type)?(_=s(h,m.props),_.ref=pn(g,h,m),_.return=g,_):(_=Hs(m.type,m.key,m.props,null,g.mode,_),_.ref=pn(g,h,m),_.return=g,_)}function c(g,h,m,_){return h===null||h.tag!==4||h.stateNode.containerInfo!==m.containerInfo||h.stateNode.implementation!==m.implementation?(h=ho(m,g.mode,_),h.return=g,h):(h=s(h,m.children||[]),h.return=g,h)}function d(g,h,m,_,S){return h===null||h.tag!==7?(h=hr(m,g.mode,_,S),h.return=g,h):(h=s(h,m),h.return=g,h)}function p(g,h,m){if(typeof h=="string"&&h!==""||typeof h=="number")return h=co(""+h,g.mode,m),h.return=g,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case fs:return m=Hs(h.type,h.key,h.props,null,g.mode,m),m.ref=pn(g,null,h),m.return=g,m;case Ar:return h=ho(h,g.mode,m),h.return=g,h;case Rt:var _=h._init;return p(g,_(h._payload),m)}if(wn(h)||un(h))return h=hr(h,g.mode,m,null),h.return=g,h;Ss(g,h)}return null}function f(g,h,m,_){var S=h!==null?h.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return S!==null?null:a(g,h,""+m,_);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case fs:return m.key===S?l(g,h,m,_):null;case Ar:return m.key===S?c(g,h,m,_):null;case Rt:return S=m._init,f(g,h,S(m._payload),_)}if(wn(m)||un(m))return S!==null?null:d(g,h,m,_,null);Ss(g,m)}return null}function v(g,h,m,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return g=g.get(m)||null,a(h,g,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case fs:return g=g.get(_.key===null?m:_.key)||null,l(h,g,_,S);case Ar:return g=g.get(_.key===null?m:_.key)||null,c(h,g,_,S);case Rt:var x=_._init;return v(g,h,m,x(_._payload),S)}if(wn(_)||un(_))return g=g.get(m)||null,d(h,g,_,S,null);Ss(h,_)}return null}function w(g,h,m,_){for(var S=null,x=null,k=h,T=h=0,U=null;k!==null&&T<m.length;T++){k.index>T?(U=k,k=null):U=k.sibling;var D=f(g,k,m[T],_);if(D===null){k===null&&(k=U);break}e&&k&&D.alternate===null&&t(g,k),h=i(D,h,T),x===null?S=D:x.sibling=D,x=D,k=U}if(T===m.length)return r(g,k),Y&&rr(g,T),S;if(k===null){for(;T<m.length;T++)k=p(g,m[T],_),k!==null&&(h=i(k,h,T),x===null?S=k:x.sibling=k,x=k);return Y&&rr(g,T),S}for(k=n(g,k);T<m.length;T++)U=v(k,g,T,m[T],_),U!==null&&(e&&U.alternate!==null&&k.delete(U.key===null?T:U.key),h=i(U,h,T),x===null?S=U:x.sibling=U,x=U);return e&&k.forEach(function(oe){return t(g,oe)}),Y&&rr(g,T),S}function y(g,h,m,_){var S=un(m);if(typeof S!="function")throw Error(N(150));if(m=S.call(m),m==null)throw Error(N(151));for(var x=S=null,k=h,T=h=0,U=null,D=m.next();k!==null&&!D.done;T++,D=m.next()){k.index>T?(U=k,k=null):U=k.sibling;var oe=f(g,k,D.value,_);if(oe===null){k===null&&(k=U);break}e&&k&&oe.alternate===null&&t(g,k),h=i(oe,h,T),x===null?S=oe:x.sibling=oe,x=oe,k=U}if(D.done)return r(g,k),Y&&rr(g,T),S;if(k===null){for(;!D.done;T++,D=m.next())D=p(g,D.value,_),D!==null&&(h=i(D,h,T),x===null?S=D:x.sibling=D,x=D);return Y&&rr(g,T),S}for(k=n(g,k);!D.done;T++,D=m.next())D=v(k,g,T,D.value,_),D!==null&&(e&&D.alternate!==null&&k.delete(D.key===null?T:D.key),h=i(D,h,T),x===null?S=D:x.sibling=D,x=D);return e&&k.forEach(function(Xe){return t(g,Xe)}),Y&&rr(g,T),S}function E(g,h,m,_){if(typeof m=="object"&&m!==null&&m.type===Pr&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case fs:e:{for(var S=m.key,x=h;x!==null;){if(x.key===S){if(S=m.type,S===Pr){if(x.tag===7){r(g,x.sibling),h=s(x,m.props.children),h.return=g,g=h;break e}}else if(x.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Rt&&wu(S)===x.type){r(g,x.sibling),h=s(x,m.props),h.ref=pn(g,x,m),h.return=g,g=h;break e}r(g,x);break}else t(g,x);x=x.sibling}m.type===Pr?(h=hr(m.props.children,g.mode,_,m.key),h.return=g,g=h):(_=Hs(m.type,m.key,m.props,null,g.mode,_),_.ref=pn(g,h,m),_.return=g,g=_)}return o(g);case Ar:e:{for(x=m.key;h!==null;){if(h.key===x)if(h.tag===4&&h.stateNode.containerInfo===m.containerInfo&&h.stateNode.implementation===m.implementation){r(g,h.sibling),h=s(h,m.children||[]),h.return=g,g=h;break e}else{r(g,h);break}else t(g,h);h=h.sibling}h=ho(m,g.mode,_),h.return=g,g=h}return o(g);case Rt:return x=m._init,E(g,h,x(m._payload),_)}if(wn(m))return w(g,h,m,_);if(un(m))return y(g,h,m,_);Ss(g,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,h!==null&&h.tag===6?(r(g,h.sibling),h=s(h,m),h.return=g,g=h):(r(g,h),h=co(m,g.mode,_),h.return=g,g=h),o(g)):r(g,h)}return E}var tn=Ad(!0),Pd=Ad(!1),ii=Qt(null),oi=null,Br=null,nl=null;function sl(){nl=Br=oi=null}function il(e){var t=ii.current;Q(ii),e._currentValue=t}function na(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Jr(e,t){oi=e,nl=Br=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Re=!0),e.firstContext=null)}function Qe(e){var t=e._currentValue;if(nl!==e)if(e={context:e,memoizedValue:t,next:null},Br===null){if(oi===null)throw Error(N(308));Br=e,oi.dependencies={lanes:0,firstContext:e}}else Br=Br.next=e;return t}var lr=null;function ol(e){lr===null?lr=[e]:lr.push(e)}function Id(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,ol(t)):(r.next=s.next,s.next=r),t.interleaved=r,Et(e,n)}function Et(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var At=!1;function al(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ld(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function bt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Wt(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,F&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Et(e,r)}return s=n.interleaved,s===null?(t.next=t,ol(n)):(t.next=s.next,s.next=t),n.interleaved=t,Et(e,r)}function zs(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Ka(e,r)}}function _u(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function ai(e,t,r,n){var s=e.updateQueue;At=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=e.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var p=s.baseState;o=0,d=c=l=null,a=i;do{var f=a.lane,v=a.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=e,y=a;switch(f=t,v=r,y.tag){case 1:if(w=y.payload,typeof w=="function"){p=w.call(v,p,f);break e}p=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=y.payload,f=typeof w=="function"?w.call(v,p,f):w,f==null)break e;p=te({},p,f);break e;case 2:At=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else v={eventTime:v,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=v,l=p):d=d.next=v,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=p),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);gr|=o,e.lanes=o,e.memoizedState=p}}function xu(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(N(191,s));s.call(n)}}}var ls={},mt=Qt(ls),Kn=Qt(ls),qn=Qt(ls);function ur(e){if(e===ls)throw Error(N(174));return e}function ll(e,t){switch(q(qn,t),q(Kn,e),q(mt,ls),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Uo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Uo(t,e)}Q(mt),q(mt,t)}function rn(){Q(mt),Q(Kn),Q(qn)}function $d(e){ur(qn.current);var t=ur(mt.current),r=Uo(t,e.type);t!==r&&(q(Kn,e),q(mt,r))}function ul(e){Kn.current===e&&(Q(mt),Q(Kn))}var Z=Qt(0);function li(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var so=[];function cl(){for(var e=0;e<so.length;e++)so[e]._workInProgressVersionPrimary=null;so.length=0}var Ms=jt.ReactCurrentDispatcher,io=jt.ReactCurrentBatchConfig,mr=0,ee=null,ce=null,he=null,ui=!1,Tn=!1,Gn=0,im=0;function _e(){throw Error(N(321))}function dl(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!lt(e[r],t[r]))return!1;return!0}function hl(e,t,r,n,s,i){if(mr=i,ee=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ms.current=e===null||e.memoizedState===null?um:cm,e=r(n,s),Tn){i=0;do{if(Tn=!1,Gn=0,25<=i)throw Error(N(301));i+=1,he=ce=null,t.updateQueue=null,Ms.current=dm,e=r(n,s)}while(Tn)}if(Ms.current=ci,t=ce!==null&&ce.next!==null,mr=0,he=ce=ee=null,ui=!1,t)throw Error(N(300));return e}function fl(){var e=Gn!==0;return Gn=0,e}function dt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return he===null?ee.memoizedState=he=e:he=he.next=e,he}function Ye(){if(ce===null){var e=ee.alternate;e=e!==null?e.memoizedState:null}else e=ce.next;var t=he===null?ee.memoizedState:he.next;if(t!==null)he=t,ce=e;else{if(e===null)throw Error(N(310));ce=e,e={memoizedState:ce.memoizedState,baseState:ce.baseState,baseQueue:ce.baseQueue,queue:ce.queue,next:null},he===null?ee.memoizedState=he=e:he=he.next=e}return he}function Jn(e,t){return typeof t=="function"?t(e):t}function oo(e){var t=Ye(),r=t.queue;if(r===null)throw Error(N(311));r.lastRenderedReducer=e;var n=ce,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((mr&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var p={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=p,o=n):l=l.next=p,ee.lanes|=d,gr|=d}c=c.next}while(c!==null&&c!==i);l===null?o=n:l.next=a,lt(n,t.memoizedState)||(Re=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,ee.lanes|=i,gr|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ao(e){var t=Ye(),r=t.queue;if(r===null)throw Error(N(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);lt(i,t.memoizedState)||(Re=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function Ud(){}function Dd(e,t){var r=ee,n=Ye(),s=t(),i=!lt(n.memoizedState,s);if(i&&(n.memoizedState=s,Re=!0),n=n.queue,pl(Bd.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||he!==null&&he.memoizedState.tag&1){if(r.flags|=2048,Qn(9,Md.bind(null,r,n,s,t),void 0,null),fe===null)throw Error(N(349));mr&30||zd(r,t,s)}return s}function zd(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ee.updateQueue,t===null?(t={lastEffect:null,stores:null},ee.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Md(e,t,r,n){t.value=r,t.getSnapshot=n,Fd(t)&&Wd(e)}function Bd(e,t,r){return r(function(){Fd(t)&&Wd(e)})}function Fd(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!lt(e,r)}catch{return!0}}function Wd(e){var t=Et(e,1);t!==null&&at(t,e,1,-1)}function bu(e){var t=dt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jn,lastRenderedState:e},t.queue=e,e=e.dispatch=lm.bind(null,ee,e),[t.memoizedState,e]}function Qn(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ee.updateQueue,t===null?(t={lastEffect:null,stores:null},ee.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Vd(){return Ye().memoizedState}function Bs(e,t,r,n){var s=dt();ee.flags|=e,s.memoizedState=Qn(1|t,r,void 0,n===void 0?null:n)}function Ni(e,t,r,n){var s=Ye();n=n===void 0?null:n;var i=void 0;if(ce!==null){var o=ce.memoizedState;if(i=o.destroy,n!==null&&dl(n,o.deps)){s.memoizedState=Qn(t,r,i,n);return}}ee.flags|=e,s.memoizedState=Qn(1|t,r,i,n)}function ku(e,t){return Bs(8390656,8,e,t)}function pl(e,t){return Ni(2048,8,e,t)}function Hd(e,t){return Ni(4,2,e,t)}function Kd(e,t){return Ni(4,4,e,t)}function qd(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Gd(e,t,r){return r=r!=null?r.concat([e]):null,Ni(4,4,qd.bind(null,t,e),r)}function ml(){}function Jd(e,t){var r=Ye();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&dl(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Qd(e,t){var r=Ye();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&dl(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Yd(e,t,r){return mr&21?(lt(r,t)||(r=rd(),ee.lanes|=r,gr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Re=!0),e.memoizedState=r)}function om(e,t){var r=H;H=r!==0&&4>r?r:4,e(!0);var n=io.transition;io.transition={};try{e(!1),t()}finally{H=r,io.transition=n}}function Xd(){return Ye().memoizedState}function am(e,t,r){var n=Ht(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Zd(e))eh(t,r);else if(r=Id(e,t,r,n),r!==null){var s=je();at(r,e,n,s),th(r,t,n)}}function lm(e,t,r){var n=Ht(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Zd(e))eh(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,a=i(o,r);if(s.hasEagerState=!0,s.eagerState=a,lt(a,o)){var l=t.interleaved;l===null?(s.next=s,ol(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}r=Id(e,t,s,n),r!==null&&(s=je(),at(r,e,n,s),th(r,t,n))}}function Zd(e){var t=e.alternate;return e===ee||t!==null&&t===ee}function eh(e,t){Tn=ui=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function th(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Ka(e,r)}}var ci={readContext:Qe,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useInsertionEffect:_e,useLayoutEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useMutableSource:_e,useSyncExternalStore:_e,useId:_e,unstable_isNewReconciler:!1},um={readContext:Qe,useCallback:function(e,t){return dt().memoizedState=[e,t===void 0?null:t],e},useContext:Qe,useEffect:ku,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Bs(4194308,4,qd.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Bs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bs(4,2,e,t)},useMemo:function(e,t){var r=dt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=dt();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=am.bind(null,ee,e),[n.memoizedState,e]},useRef:function(e){var t=dt();return e={current:e},t.memoizedState=e},useState:bu,useDebugValue:ml,useDeferredValue:function(e){return dt().memoizedState=e},useTransition:function(){var e=bu(!1),t=e[0];return e=om.bind(null,e[1]),dt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ee,s=dt();if(Y){if(r===void 0)throw Error(N(407));r=r()}else{if(r=t(),fe===null)throw Error(N(349));mr&30||zd(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,ku(Bd.bind(null,n,i,e),[e]),n.flags|=2048,Qn(9,Md.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=dt(),t=fe.identifierPrefix;if(Y){var r=xt,n=_t;r=(n&~(1<<32-ot(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Gn++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=im++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},cm={readContext:Qe,useCallback:Jd,useContext:Qe,useEffect:pl,useImperativeHandle:Gd,useInsertionEffect:Hd,useLayoutEffect:Kd,useMemo:Qd,useReducer:oo,useRef:Vd,useState:function(){return oo(Jn)},useDebugValue:ml,useDeferredValue:function(e){var t=Ye();return Yd(t,ce.memoizedState,e)},useTransition:function(){var e=oo(Jn)[0],t=Ye().memoizedState;return[e,t]},useMutableSource:Ud,useSyncExternalStore:Dd,useId:Xd,unstable_isNewReconciler:!1},dm={readContext:Qe,useCallback:Jd,useContext:Qe,useEffect:pl,useImperativeHandle:Gd,useInsertionEffect:Hd,useLayoutEffect:Kd,useMemo:Qd,useReducer:ao,useRef:Vd,useState:function(){return ao(Jn)},useDebugValue:ml,useDeferredValue:function(e){var t=Ye();return ce===null?t.memoizedState=e:Yd(t,ce.memoizedState,e)},useTransition:function(){var e=ao(Jn)[0],t=Ye().memoizedState;return[e,t]},useMutableSource:Ud,useSyncExternalStore:Dd,useId:Xd,unstable_isNewReconciler:!1};function tt(e,t){if(e&&e.defaultProps){t=te({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function sa(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:te({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var ji={isMounted:function(e){return(e=e._reactInternals)?wr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=je(),s=Ht(e),i=bt(n,s);i.payload=t,r!=null&&(i.callback=r),t=Wt(e,i,s),t!==null&&(at(t,e,s,n),zs(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=je(),s=Ht(e),i=bt(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Wt(e,i,s),t!==null&&(at(t,e,s,n),zs(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=je(),n=Ht(e),s=bt(r,n);s.tag=2,t!=null&&(s.callback=t),t=Wt(e,s,n),t!==null&&(at(t,e,n,r),zs(t,e,n))}};function Su(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Fn(r,n)||!Fn(s,i):!0}function rh(e,t,r){var n=!1,s=Gt,i=t.contextType;return typeof i=="object"&&i!==null?i=Qe(i):(s=Pe(t)?fr:Se.current,n=t.contextTypes,i=(n=n!=null)?Zr(e,s):Gt),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ji,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Eu(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&ji.enqueueReplaceState(t,t.state,null)}function ia(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},al(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Qe(i):(i=Pe(t)?fr:Se.current,s.context=Zr(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(sa(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&ji.enqueueReplaceState(s,s.state,null),ai(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function nn(e,t){try{var r="",n=t;do r+=zf(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function lo(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function oa(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var hm=typeof WeakMap=="function"?WeakMap:Map;function nh(e,t,r){r=bt(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){hi||(hi=!0,ga=n),oa(e,t)},r}function sh(e,t,r){r=bt(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){oa(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){oa(e,t),typeof n!="function"&&(Vt===null?Vt=new Set([this]):Vt.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Nu(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new hm;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=Nm.bind(null,e,t,r),t.then(e,e))}function ju(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Tu(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=bt(-1,1),t.tag=2,Wt(r,t,1))),r.lanes|=1),e)}var fm=jt.ReactCurrentOwner,Re=!1;function Ee(e,t,r,n){t.child=e===null?Pd(t,null,r,n):tn(t,e.child,r,n)}function Cu(e,t,r,n,s){r=r.render;var i=t.ref;return Jr(t,s),n=hl(e,t,r,n,i,s),r=fl(),e!==null&&!Re?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Nt(e,t,s)):(Y&&r&&el(t),t.flags|=1,Ee(e,t,n,s),t.child)}function Ou(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!kl(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,ih(e,t,i,n,s)):(e=Hs(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Fn,r(o,n)&&e.ref===t.ref)return Nt(e,t,s)}return t.flags|=1,e=Kt(i,n),e.ref=t.ref,e.return=t,t.child=e}function ih(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(Fn(i,n)&&e.ref===t.ref)if(Re=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(Re=!0);else return t.lanes=e.lanes,Nt(e,t,s)}return aa(e,t,r,n,s)}function oh(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},q(Wr,$e),$e|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,q(Wr,$e),$e|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,q(Wr,$e),$e|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,q(Wr,$e),$e|=n;return Ee(e,t,s,r),t.child}function ah(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function aa(e,t,r,n,s){var i=Pe(r)?fr:Se.current;return i=Zr(t,i),Jr(t,s),r=hl(e,t,r,n,i,s),n=fl(),e!==null&&!Re?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Nt(e,t,s)):(Y&&n&&el(t),t.flags|=1,Ee(e,t,r,s),t.child)}function Ru(e,t,r,n,s){if(Pe(r)){var i=!0;ri(t)}else i=!1;if(Jr(t,s),t.stateNode===null)Fs(e,t),rh(t,r,n),ia(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=Qe(c):(c=Pe(r)?fr:Se.current,c=Zr(t,c));var d=r.getDerivedStateFromProps,p=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==c)&&Eu(t,o,n,c),At=!1;var f=t.memoizedState;o.state=f,ai(t,n,o,s),l=t.memoizedState,a!==n||f!==l||Ae.current||At?(typeof d=="function"&&(sa(t,r,d,n),l=t.memoizedState),(a=At||Su(t,r,a,n,f,l,c))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=c,n=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Ld(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:tt(t.type,a),o.props=c,p=t.pendingProps,f=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=Qe(l):(l=Pe(r)?fr:Se.current,l=Zr(t,l));var v=r.getDerivedStateFromProps;(d=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||f!==l)&&Eu(t,o,n,l),At=!1,f=t.memoizedState,o.state=f,ai(t,n,o,s);var w=t.memoizedState;a!==p||f!==w||Ae.current||At?(typeof v=="function"&&(sa(t,r,v,n),w=t.memoizedState),(c=At||Su(t,r,c,n,f,w,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,w,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=w),o.props=n,o.state=w,o.context=l,n=c):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return la(e,t,r,n,i,s)}function la(e,t,r,n,s,i){ah(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&gu(t,r,!1),Nt(e,t,i);n=t.stateNode,fm.current=t;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=tn(t,e.child,null,i),t.child=tn(t,null,a,i)):Ee(e,t,a,i),t.memoizedState=n.state,s&&gu(t,r,!0),t.child}function lh(e){var t=e.stateNode;t.pendingContext?mu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&mu(e,t.context,!1),ll(e,t.containerInfo)}function Au(e,t,r,n,s){return en(),rl(s),t.flags|=256,Ee(e,t,r,n),t.child}var ua={dehydrated:null,treeContext:null,retryLane:0};function ca(e){return{baseLanes:e,cachePool:null,transitions:null}}function uh(e,t,r){var n=t.pendingProps,s=Z.current,i=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),q(Z,s&1),e===null)return ra(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Oi(o,n,0,null),e=hr(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=ca(r),t.memoizedState=ua,e):gl(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return pm(e,t,o,n,a,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,a=s.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=Kt(s,l),n.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Kt(a,i):(i=hr(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?ca(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=ua,n}return i=e.child,e=i.sibling,n=Kt(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function gl(e,t){return t=Oi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Es(e,t,r,n){return n!==null&&rl(n),tn(t,e.child,null,r),e=gl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function pm(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=lo(Error(N(422))),Es(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=Oi({mode:"visible",children:n.children},s,0,null),i=hr(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&tn(t,e.child,null,o),t.child.memoizedState=ca(o),t.memoizedState=ua,i);if(!(t.mode&1))return Es(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var a=n.dgst;return n=a,i=Error(N(419)),n=lo(i,n,void 0),Es(e,t,o,n)}if(a=(o&e.childLanes)!==0,Re||a){if(n=fe,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Et(e,s),at(n,e,s,-1))}return bl(),n=lo(Error(N(421))),Es(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=jm.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Me=Ft(s.nextSibling),Be=t,Y=!0,it=null,e!==null&&(Ke[qe++]=_t,Ke[qe++]=xt,Ke[qe++]=pr,_t=e.id,xt=e.overflow,pr=t),t=gl(t,n.children),t.flags|=4096,t)}function Pu(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),na(e.return,t,r)}function uo(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function ch(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(Ee(e,t,n.children,r),n=Z.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Pu(e,r,t);else if(e.tag===19)Pu(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(q(Z,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&li(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),uo(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&li(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}uo(t,!0,r,null,i);break;case"together":uo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Fs(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Nt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),gr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(N(153));if(t.child!==null){for(e=t.child,r=Kt(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Kt(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function mm(e,t,r){switch(t.tag){case 3:lh(t),en();break;case 5:$d(t);break;case 1:Pe(t.type)&&ri(t);break;case 4:ll(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;q(ii,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(q(Z,Z.current&1),t.flags|=128,null):r&t.child.childLanes?uh(e,t,r):(q(Z,Z.current&1),e=Nt(e,t,r),e!==null?e.sibling:null);q(Z,Z.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return ch(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),q(Z,Z.current),n)break;return null;case 22:case 23:return t.lanes=0,oh(e,t,r)}return Nt(e,t,r)}var dh,da,hh,fh;dh=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};da=function(){};hh=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,ur(mt.current);var i=null;switch(r){case"input":s=Po(e,s),n=Po(e,n),i=[];break;case"select":s=te({},s,{value:void 0}),n=te({},n,{value:void 0}),i=[];break;case"textarea":s=$o(e,s),n=$o(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=ei)}Do(r,n);var o;r=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ln.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var l=n[c];if(a=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(i||(i=[]),i.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ln.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&G("scroll",e),i||a===l||(i=[])):(i=i||[]).push(c,l))}r&&(i=i||[]).push("style",r);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};fh=function(e,t,r,n){r!==n&&(t.flags|=4)};function mn(e,t){if(!Y)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function xe(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function gm(e,t,r){var n=t.pendingProps;switch(tl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xe(t),null;case 1:return Pe(t.type)&&ti(),xe(t),null;case 3:return n=t.stateNode,rn(),Q(Ae),Q(Se),cl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ks(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,it!==null&&(wa(it),it=null))),da(e,t),xe(t),null;case 5:ul(t);var s=ur(qn.current);if(r=t.type,e!==null&&t.stateNode!=null)hh(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(N(166));return xe(t),null}if(e=ur(mt.current),ks(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[ft]=t,n[Hn]=i,e=(t.mode&1)!==0,r){case"dialog":G("cancel",n),G("close",n);break;case"iframe":case"object":case"embed":G("load",n);break;case"video":case"audio":for(s=0;s<xn.length;s++)G(xn[s],n);break;case"source":G("error",n);break;case"img":case"image":case"link":G("error",n),G("load",n);break;case"details":G("toggle",n);break;case"input":Fl(n,i),G("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},G("invalid",n);break;case"textarea":Vl(n,i),G("invalid",n)}Do(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?n.textContent!==a&&(i.suppressHydrationWarning!==!0&&bs(n.textContent,a,e),s=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&bs(n.textContent,a,e),s=["children",""+a]):Ln.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&G("scroll",n)}switch(r){case"input":ps(n),Wl(n,i,!0);break;case"textarea":ps(n),Hl(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=ei)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Bc(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[ft]=t,e[Hn]=n,dh(e,t,!1,!1),t.stateNode=e;e:{switch(o=zo(r,n),r){case"dialog":G("cancel",e),G("close",e),s=n;break;case"iframe":case"object":case"embed":G("load",e),s=n;break;case"video":case"audio":for(s=0;s<xn.length;s++)G(xn[s],e);s=n;break;case"source":G("error",e),s=n;break;case"img":case"image":case"link":G("error",e),G("load",e),s=n;break;case"details":G("toggle",e),s=n;break;case"input":Fl(e,n),s=Po(e,n),G("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=te({},n,{value:void 0}),G("invalid",e);break;case"textarea":Vl(e,n),s=$o(e,n),G("invalid",e);break;default:s=n}Do(r,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Vc(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Fc(e,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&$n(e,l):typeof l=="number"&&$n(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ln.hasOwnProperty(i)?l!=null&&i==="onScroll"&&G("scroll",e):l!=null&&Ma(e,i,l,o))}switch(r){case"input":ps(e),Wl(e,n,!1);break;case"textarea":ps(e),Hl(e);break;case"option":n.value!=null&&e.setAttribute("value",""+qt(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Hr(e,!!n.multiple,i,!1):n.defaultValue!=null&&Hr(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=ei)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return xe(t),null;case 6:if(e&&t.stateNode!=null)fh(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(N(166));if(r=ur(qn.current),ur(mt.current),ks(t)){if(n=t.stateNode,r=t.memoizedProps,n[ft]=t,(i=n.nodeValue!==r)&&(e=Be,e!==null))switch(e.tag){case 3:bs(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&bs(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ft]=t,t.stateNode=n}return xe(t),null;case 13:if(Q(Z),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Y&&Me!==null&&t.mode&1&&!(t.flags&128))Rd(),en(),t.flags|=98560,i=!1;else if(i=ks(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(N(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(N(317));i[ft]=t}else en(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;xe(t),i=!1}else it!==null&&(wa(it),it=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Z.current&1?de===0&&(de=3):bl())),t.updateQueue!==null&&(t.flags|=4),xe(t),null);case 4:return rn(),da(e,t),e===null&&Wn(t.stateNode.containerInfo),xe(t),null;case 10:return il(t.type._context),xe(t),null;case 17:return Pe(t.type)&&ti(),xe(t),null;case 19:if(Q(Z),i=t.memoizedState,i===null)return xe(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)mn(i,!1);else{if(de!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=li(e),o!==null){for(t.flags|=128,mn(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return q(Z,Z.current&1|2),t.child}e=e.sibling}i.tail!==null&&ie()>sn&&(t.flags|=128,n=!0,mn(i,!1),t.lanes=4194304)}else{if(!n)if(e=li(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),mn(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Y)return xe(t),null}else 2*ie()-i.renderingStartTime>sn&&r!==1073741824&&(t.flags|=128,n=!0,mn(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ie(),t.sibling=null,r=Z.current,q(Z,n?r&1|2:r&1),t):(xe(t),null);case 22:case 23:return xl(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?$e&1073741824&&(xe(t),t.subtreeFlags&6&&(t.flags|=8192)):xe(t),null;case 24:return null;case 25:return null}throw Error(N(156,t.tag))}function vm(e,t){switch(tl(t),t.tag){case 1:return Pe(t.type)&&ti(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return rn(),Q(Ae),Q(Se),cl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ul(t),null;case 13:if(Q(Z),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(N(340));en()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Q(Z),null;case 4:return rn(),null;case 10:return il(t.type._context),null;case 22:case 23:return xl(),null;case 24:return null;default:return null}}var Ns=!1,ke=!1,ym=typeof WeakSet=="function"?WeakSet:Set,O=null;function Fr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){se(e,t,n)}else r.current=null}function ha(e,t,r){try{r()}catch(n){se(e,t,n)}}var Iu=!1;function wm(e,t){if(Jo=Ys,e=yd(),Za(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,c=0,d=0,p=e,f=null;t:for(;;){for(var v;p!==r||s!==0&&p.nodeType!==3||(a=o+s),p!==i||n!==0&&p.nodeType!==3||(l=o+n),p.nodeType===3&&(o+=p.nodeValue.length),(v=p.firstChild)!==null;)f=p,p=v;for(;;){if(p===e)break t;if(f===r&&++c===s&&(a=o),f===i&&++d===n&&(l=o),(v=p.nextSibling)!==null)break;p=f,f=p.parentNode}p=v}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(Qo={focusedElem:e,selectionRange:r},Ys=!1,O=t;O!==null;)if(t=O,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,O=e;else for(;O!==null;){t=O;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var y=w.memoizedProps,E=w.memoizedState,g=t.stateNode,h=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:tt(t.type,y),E);g.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var m=t.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(N(163))}}catch(_){se(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,O=e;break}O=t.return}return w=Iu,Iu=!1,w}function Cn(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&ha(t,r,i)}s=s.next}while(s!==n)}}function Ti(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function fa(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function ph(e){var t=e.alternate;t!==null&&(e.alternate=null,ph(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ft],delete t[Hn],delete t[Zo],delete t[tm],delete t[rm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function mh(e){return e.tag===5||e.tag===3||e.tag===4}function Lu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||mh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function pa(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ei));else if(n!==4&&(e=e.child,e!==null))for(pa(e,t,r),e=e.sibling;e!==null;)pa(e,t,r),e=e.sibling}function ma(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(ma(e,t,r),e=e.sibling;e!==null;)ma(e,t,r),e=e.sibling}var ve=null,nt=!1;function Ct(e,t,r){for(r=r.child;r!==null;)gh(e,t,r),r=r.sibling}function gh(e,t,r){if(pt&&typeof pt.onCommitFiberUnmount=="function")try{pt.onCommitFiberUnmount(_i,r)}catch{}switch(r.tag){case 5:ke||Fr(r,t);case 6:var n=ve,s=nt;ve=null,Ct(e,t,r),ve=n,nt=s,ve!==null&&(nt?(e=ve,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ve.removeChild(r.stateNode));break;case 18:ve!==null&&(nt?(e=ve,r=r.stateNode,e.nodeType===8?ro(e.parentNode,r):e.nodeType===1&&ro(e,r),Mn(e)):ro(ve,r.stateNode));break;case 4:n=ve,s=nt,ve=r.stateNode.containerInfo,nt=!0,Ct(e,t,r),ve=n,nt=s;break;case 0:case 11:case 14:case 15:if(!ke&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&ha(r,t,o),s=s.next}while(s!==n)}Ct(e,t,r);break;case 1:if(!ke&&(Fr(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){se(r,t,a)}Ct(e,t,r);break;case 21:Ct(e,t,r);break;case 22:r.mode&1?(ke=(n=ke)||r.memoizedState!==null,Ct(e,t,r),ke=n):Ct(e,t,r);break;default:Ct(e,t,r)}}function $u(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new ym),t.forEach(function(n){var s=Tm.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Ze(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:ve=a.stateNode,nt=!1;break e;case 3:ve=a.stateNode.containerInfo,nt=!0;break e;case 4:ve=a.stateNode.containerInfo,nt=!0;break e}a=a.return}if(ve===null)throw Error(N(160));gh(i,o,s),ve=null,nt=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){se(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)vh(t,e),t=t.sibling}function vh(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ze(t,e),ct(e),n&4){try{Cn(3,e,e.return),Ti(3,e)}catch(y){se(e,e.return,y)}try{Cn(5,e,e.return)}catch(y){se(e,e.return,y)}}break;case 1:Ze(t,e),ct(e),n&512&&r!==null&&Fr(r,r.return);break;case 5:if(Ze(t,e),ct(e),n&512&&r!==null&&Fr(r,r.return),e.flags&32){var s=e.stateNode;try{$n(s,"")}catch(y){se(e,e.return,y)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&zc(s,i),zo(a,o);var c=zo(a,i);for(o=0;o<l.length;o+=2){var d=l[o],p=l[o+1];d==="style"?Vc(s,p):d==="dangerouslySetInnerHTML"?Fc(s,p):d==="children"?$n(s,p):Ma(s,d,p,c)}switch(a){case"input":Io(s,i);break;case"textarea":Mc(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?Hr(s,!!i.multiple,v,!1):f!==!!i.multiple&&(i.defaultValue!=null?Hr(s,!!i.multiple,i.defaultValue,!0):Hr(s,!!i.multiple,i.multiple?[]:"",!1))}s[Hn]=i}catch(y){se(e,e.return,y)}}break;case 6:if(Ze(t,e),ct(e),n&4){if(e.stateNode===null)throw Error(N(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(y){se(e,e.return,y)}}break;case 3:if(Ze(t,e),ct(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Mn(t.containerInfo)}catch(y){se(e,e.return,y)}break;case 4:Ze(t,e),ct(e);break;case 13:Ze(t,e),ct(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(wl=ie())),n&4&&$u(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(ke=(c=ke)||d,Ze(t,e),ke=c):Ze(t,e),ct(e),n&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!d&&e.mode&1)for(O=e,d=e.child;d!==null;){for(p=O=d;O!==null;){switch(f=O,v=f.child,f.tag){case 0:case 11:case 14:case 15:Cn(4,f,f.return);break;case 1:Fr(f,f.return);var w=f.stateNode;if(typeof w.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(y){se(n,r,y)}}break;case 5:Fr(f,f.return);break;case 22:if(f.memoizedState!==null){Du(p);continue}}v!==null?(v.return=f,O=v):Du(p)}d=d.sibling}e:for(d=null,p=e;;){if(p.tag===5){if(d===null){d=p;try{s=p.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Wc("display",o))}catch(y){se(e,e.return,y)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(y){se(e,e.return,y)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Ze(t,e),ct(e),n&4&&$u(e);break;case 21:break;default:Ze(t,e),ct(e)}}function ct(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(mh(r)){var n=r;break e}r=r.return}throw Error(N(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&($n(s,""),n.flags&=-33);var i=Lu(e);ma(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,a=Lu(e);pa(e,a,o);break;default:throw Error(N(161))}}catch(l){se(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function _m(e,t,r){O=e,yh(e)}function yh(e,t,r){for(var n=(e.mode&1)!==0;O!==null;){var s=O,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Ns;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||ke;a=Ns;var c=ke;if(Ns=o,(ke=l)&&!c)for(O=s;O!==null;)o=O,l=o.child,o.tag===22&&o.memoizedState!==null?zu(s):l!==null?(l.return=o,O=l):zu(s);for(;i!==null;)O=i,yh(i),i=i.sibling;O=s,Ns=a,ke=c}Uu(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,O=i):Uu(e)}}function Uu(e){for(;O!==null;){var t=O;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ke||Ti(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!ke)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:tt(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&xu(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}xu(t,o,r)}break;case 5:var a=t.stateNode;if(r===null&&t.flags&4){r=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&Mn(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(N(163))}ke||t.flags&512&&fa(t)}catch(f){se(t,t.return,f)}}if(t===e){O=null;break}if(r=t.sibling,r!==null){r.return=t.return,O=r;break}O=t.return}}function Du(e){for(;O!==null;){var t=O;if(t===e){O=null;break}var r=t.sibling;if(r!==null){r.return=t.return,O=r;break}O=t.return}}function zu(e){for(;O!==null;){var t=O;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ti(4,t)}catch(l){se(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(l){se(t,s,l)}}var i=t.return;try{fa(t)}catch(l){se(t,i,l)}break;case 5:var o=t.return;try{fa(t)}catch(l){se(t,o,l)}}}catch(l){se(t,t.return,l)}if(t===e){O=null;break}var a=t.sibling;if(a!==null){a.return=t.return,O=a;break}O=t.return}}var xm=Math.ceil,di=jt.ReactCurrentDispatcher,vl=jt.ReactCurrentOwner,Je=jt.ReactCurrentBatchConfig,F=0,fe=null,le=null,ye=0,$e=0,Wr=Qt(0),de=0,Yn=null,gr=0,Ci=0,yl=0,On=null,Oe=null,wl=0,sn=1/0,vt=null,hi=!1,ga=null,Vt=null,js=!1,Dt=null,fi=0,Rn=0,va=null,Ws=-1,Vs=0;function je(){return F&6?ie():Ws!==-1?Ws:Ws=ie()}function Ht(e){return e.mode&1?F&2&&ye!==0?ye&-ye:sm.transition!==null?(Vs===0&&(Vs=rd()),Vs):(e=H,e!==0||(e=window.event,e=e===void 0?16:ud(e.type)),e):1}function at(e,t,r,n){if(50<Rn)throw Rn=0,va=null,Error(N(185));is(e,r,n),(!(F&2)||e!==fe)&&(e===fe&&(!(F&2)&&(Ci|=r),de===4&&Lt(e,ye)),Ie(e,n),r===1&&F===0&&!(t.mode&1)&&(sn=ie()+500,Ei&&Yt()))}function Ie(e,t){var r=e.callbackNode;sp(e,t);var n=Qs(e,e===fe?ye:0);if(n===0)r!==null&&Gl(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Gl(r),t===1)e.tag===0?nm(Mu.bind(null,e)):Td(Mu.bind(null,e)),Zp(function(){!(F&6)&&Yt()}),r=null;else{switch(nd(n)){case 1:r=Ha;break;case 4:r=ed;break;case 16:r=Js;break;case 536870912:r=td;break;default:r=Js}r=Nh(r,wh.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function wh(e,t){if(Ws=-1,Vs=0,F&6)throw Error(N(327));var r=e.callbackNode;if(Qr()&&e.callbackNode!==r)return null;var n=Qs(e,e===fe?ye:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=pi(e,n);else{t=n;var s=F;F|=2;var i=xh();(fe!==e||ye!==t)&&(vt=null,sn=ie()+500,dr(e,t));do try{Sm();break}catch(a){_h(e,a)}while(!0);sl(),di.current=i,F=s,le!==null?t=0:(fe=null,ye=0,t=de)}if(t!==0){if(t===2&&(s=Vo(e),s!==0&&(n=s,t=ya(e,s))),t===1)throw r=Yn,dr(e,0),Lt(e,n),Ie(e,ie()),r;if(t===6)Lt(e,n);else{if(s=e.current.alternate,!(n&30)&&!bm(s)&&(t=pi(e,n),t===2&&(i=Vo(e),i!==0&&(n=i,t=ya(e,i))),t===1))throw r=Yn,dr(e,0),Lt(e,n),Ie(e,ie()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(N(345));case 2:nr(e,Oe,vt);break;case 3:if(Lt(e,n),(n&130023424)===n&&(t=wl+500-ie(),10<t)){if(Qs(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){je(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Xo(nr.bind(null,e,Oe,vt),t);break}nr(e,Oe,vt);break;case 4:if(Lt(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-ot(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=ie()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*xm(n/1960))-n,10<n){e.timeoutHandle=Xo(nr.bind(null,e,Oe,vt),n);break}nr(e,Oe,vt);break;case 5:nr(e,Oe,vt);break;default:throw Error(N(329))}}}return Ie(e,ie()),e.callbackNode===r?wh.bind(null,e):null}function ya(e,t){var r=On;return e.current.memoizedState.isDehydrated&&(dr(e,t).flags|=256),e=pi(e,t),e!==2&&(t=Oe,Oe=r,t!==null&&wa(t)),e}function wa(e){Oe===null?Oe=e:Oe.push.apply(Oe,e)}function bm(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!lt(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Lt(e,t){for(t&=~yl,t&=~Ci,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ot(t),n=1<<r;e[r]=-1,t&=~n}}function Mu(e){if(F&6)throw Error(N(327));Qr();var t=Qs(e,0);if(!(t&1))return Ie(e,ie()),null;var r=pi(e,t);if(e.tag!==0&&r===2){var n=Vo(e);n!==0&&(t=n,r=ya(e,n))}if(r===1)throw r=Yn,dr(e,0),Lt(e,t),Ie(e,ie()),r;if(r===6)throw Error(N(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,nr(e,Oe,vt),Ie(e,ie()),null}function _l(e,t){var r=F;F|=1;try{return e(t)}finally{F=r,F===0&&(sn=ie()+500,Ei&&Yt())}}function vr(e){Dt!==null&&Dt.tag===0&&!(F&6)&&Qr();var t=F;F|=1;var r=Je.transition,n=H;try{if(Je.transition=null,H=1,e)return e()}finally{H=n,Je.transition=r,F=t,!(F&6)&&Yt()}}function xl(){$e=Wr.current,Q(Wr)}function dr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Xp(r)),le!==null)for(r=le.return;r!==null;){var n=r;switch(tl(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ti();break;case 3:rn(),Q(Ae),Q(Se),cl();break;case 5:ul(n);break;case 4:rn();break;case 13:Q(Z);break;case 19:Q(Z);break;case 10:il(n.type._context);break;case 22:case 23:xl()}r=r.return}if(fe=e,le=e=Kt(e.current,null),ye=$e=t,de=0,Yn=null,yl=Ci=gr=0,Oe=On=null,lr!==null){for(t=0;t<lr.length;t++)if(r=lr[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}lr=null}return e}function _h(e,t){do{var r=le;try{if(sl(),Ms.current=ci,ui){for(var n=ee.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}ui=!1}if(mr=0,he=ce=ee=null,Tn=!1,Gn=0,vl.current=null,r===null||r.return===null){de=1,Yn=t,le=null;break}e:{var i=e,o=r.return,a=r,l=t;if(t=ye,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var v=ju(o);if(v!==null){v.flags&=-257,Tu(v,o,a,i,t),v.mode&1&&Nu(i,c,t),t=v,l=c;var w=t.updateQueue;if(w===null){var y=new Set;y.add(l),t.updateQueue=y}else w.add(l);break e}else{if(!(t&1)){Nu(i,c,t),bl();break e}l=Error(N(426))}}else if(Y&&a.mode&1){var E=ju(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),Tu(E,o,a,i,t),rl(nn(l,a));break e}}i=l=nn(l,a),de!==4&&(de=2),On===null?On=[i]:On.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=nh(i,l,t);_u(i,g);break e;case 1:a=l;var h=i.type,m=i.stateNode;if(!(i.flags&128)&&(typeof h.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Vt===null||!Vt.has(m)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=sh(i,a,t);_u(i,_);break e}}i=i.return}while(i!==null)}kh(r)}catch(S){t=S,le===r&&r!==null&&(le=r=r.return);continue}break}while(!0)}function xh(){var e=di.current;return di.current=ci,e===null?ci:e}function bl(){(de===0||de===3||de===2)&&(de=4),fe===null||!(gr&268435455)&&!(Ci&268435455)||Lt(fe,ye)}function pi(e,t){var r=F;F|=2;var n=xh();(fe!==e||ye!==t)&&(vt=null,dr(e,t));do try{km();break}catch(s){_h(e,s)}while(!0);if(sl(),F=r,di.current=n,le!==null)throw Error(N(261));return fe=null,ye=0,de}function km(){for(;le!==null;)bh(le)}function Sm(){for(;le!==null&&!Jf();)bh(le)}function bh(e){var t=Eh(e.alternate,e,$e);e.memoizedProps=e.pendingProps,t===null?kh(e):le=t,vl.current=null}function kh(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=vm(r,t),r!==null){r.flags&=32767,le=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{de=6,le=null;return}}else if(r=gm(r,t,$e),r!==null){le=r;return}if(t=t.sibling,t!==null){le=t;return}le=t=e}while(t!==null);de===0&&(de=5)}function nr(e,t,r){var n=H,s=Je.transition;try{Je.transition=null,H=1,Em(e,t,r,n)}finally{Je.transition=s,H=n}return null}function Em(e,t,r,n){do Qr();while(Dt!==null);if(F&6)throw Error(N(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(N(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(ip(e,i),e===fe&&(le=fe=null,ye=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||js||(js=!0,Nh(Js,function(){return Qr(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Je.transition,Je.transition=null;var o=H;H=1;var a=F;F|=4,vl.current=null,wm(e,r),vh(r,e),Hp(Qo),Ys=!!Jo,Qo=Jo=null,e.current=r,_m(r),Qf(),F=a,H=o,Je.transition=i}else e.current=r;if(js&&(js=!1,Dt=e,fi=s),i=e.pendingLanes,i===0&&(Vt=null),Zf(r.stateNode),Ie(e,ie()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(hi)throw hi=!1,e=ga,ga=null,e;return fi&1&&e.tag!==0&&Qr(),i=e.pendingLanes,i&1?e===va?Rn++:(Rn=0,va=e):Rn=0,Yt(),null}function Qr(){if(Dt!==null){var e=nd(fi),t=Je.transition,r=H;try{if(Je.transition=null,H=16>e?16:e,Dt===null)var n=!1;else{if(e=Dt,Dt=null,fi=0,F&6)throw Error(N(331));var s=F;for(F|=4,O=e.current;O!==null;){var i=O,o=i.child;if(O.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(O=c;O!==null;){var d=O;switch(d.tag){case 0:case 11:case 15:Cn(8,d,i)}var p=d.child;if(p!==null)p.return=d,O=p;else for(;O!==null;){d=O;var f=d.sibling,v=d.return;if(ph(d),d===c){O=null;break}if(f!==null){f.return=v,O=f;break}O=v}}}var w=i.alternate;if(w!==null){var y=w.child;if(y!==null){w.child=null;do{var E=y.sibling;y.sibling=null,y=E}while(y!==null)}}O=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,O=o;else e:for(;O!==null;){if(i=O,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Cn(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,O=g;break e}O=i.return}}var h=e.current;for(O=h;O!==null;){o=O;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,O=m;else e:for(o=h;O!==null;){if(a=O,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ti(9,a)}}catch(S){se(a,a.return,S)}if(a===o){O=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,O=_;break e}O=a.return}}if(F=s,Yt(),pt&&typeof pt.onPostCommitFiberRoot=="function")try{pt.onPostCommitFiberRoot(_i,e)}catch{}n=!0}return n}finally{H=r,Je.transition=t}}return!1}function Bu(e,t,r){t=nn(r,t),t=nh(e,t,1),e=Wt(e,t,1),t=je(),e!==null&&(is(e,1,t),Ie(e,t))}function se(e,t,r){if(e.tag===3)Bu(e,e,r);else for(;t!==null;){if(t.tag===3){Bu(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Vt===null||!Vt.has(n))){e=nn(r,e),e=sh(t,e,1),t=Wt(t,e,1),e=je(),t!==null&&(is(t,1,e),Ie(t,e));break}}t=t.return}}function Nm(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=je(),e.pingedLanes|=e.suspendedLanes&r,fe===e&&(ye&r)===r&&(de===4||de===3&&(ye&130023424)===ye&&500>ie()-wl?dr(e,0):yl|=r),Ie(e,t)}function Sh(e,t){t===0&&(e.mode&1?(t=vs,vs<<=1,!(vs&130023424)&&(vs=4194304)):t=1);var r=je();e=Et(e,t),e!==null&&(is(e,t,r),Ie(e,r))}function jm(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Sh(e,r)}function Tm(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(N(314))}n!==null&&n.delete(t),Sh(e,r)}var Eh;Eh=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ae.current)Re=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Re=!1,mm(e,t,r);Re=!!(e.flags&131072)}else Re=!1,Y&&t.flags&1048576&&Cd(t,si,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Fs(e,t),e=t.pendingProps;var s=Zr(t,Se.current);Jr(t,r),s=hl(null,t,n,e,s,r);var i=fl();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pe(n)?(i=!0,ri(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,al(t),s.updater=ji,t.stateNode=s,s._reactInternals=t,ia(t,n,e,r),t=la(null,t,n,!0,i,r)):(t.tag=0,Y&&i&&el(t),Ee(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Fs(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=Om(n),e=tt(n,e),s){case 0:t=aa(null,t,n,e,r);break e;case 1:t=Ru(null,t,n,e,r);break e;case 11:t=Cu(null,t,n,e,r);break e;case 14:t=Ou(null,t,n,tt(n.type,e),r);break e}throw Error(N(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:tt(n,s),aa(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:tt(n,s),Ru(e,t,n,s,r);case 3:e:{if(lh(t),e===null)throw Error(N(387));n=t.pendingProps,i=t.memoizedState,s=i.element,Ld(e,t),ai(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=nn(Error(N(423)),t),t=Au(e,t,n,r,s);break e}else if(n!==s){s=nn(Error(N(424)),t),t=Au(e,t,n,r,s);break e}else for(Me=Ft(t.stateNode.containerInfo.firstChild),Be=t,Y=!0,it=null,r=Pd(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(en(),n===s){t=Nt(e,t,r);break e}Ee(e,t,n,r)}t=t.child}return t;case 5:return $d(t),e===null&&ra(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Yo(n,s)?o=null:i!==null&&Yo(n,i)&&(t.flags|=32),ah(e,t),Ee(e,t,o,r),t.child;case 6:return e===null&&ra(t),null;case 13:return uh(e,t,r);case 4:return ll(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=tn(t,null,n,r):Ee(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:tt(n,s),Cu(e,t,n,s,r);case 7:return Ee(e,t,t.pendingProps,r),t.child;case 8:return Ee(e,t,t.pendingProps.children,r),t.child;case 12:return Ee(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,q(ii,n._currentValue),n._currentValue=o,i!==null)if(lt(i.value,o)){if(i.children===s.children&&!Ae.current){t=Nt(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=bt(-1,r&-r),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),na(i.return,r,t),a.lanes|=r;break}l=l.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(N(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),na(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ee(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Jr(t,r),s=Qe(s),n=n(s),t.flags|=1,Ee(e,t,n,r),t.child;case 14:return n=t.type,s=tt(n,t.pendingProps),s=tt(n.type,s),Ou(e,t,n,s,r);case 15:return ih(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:tt(n,s),Fs(e,t),t.tag=1,Pe(n)?(e=!0,ri(t)):e=!1,Jr(t,r),rh(t,n,s),ia(t,n,s,r),la(null,t,n,!0,e,r);case 19:return ch(e,t,r);case 22:return oh(e,t,r)}throw Error(N(156,t.tag))};function Nh(e,t){return Zc(e,t)}function Cm(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ge(e,t,r,n){return new Cm(e,t,r,n)}function kl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Om(e){if(typeof e=="function")return kl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Fa)return 11;if(e===Wa)return 14}return 2}function Kt(e,t){var r=e.alternate;return r===null?(r=Ge(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Hs(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")kl(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Pr:return hr(r.children,s,i,t);case Ba:o=8,s|=8;break;case Co:return e=Ge(12,r,t,s|2),e.elementType=Co,e.lanes=i,e;case Oo:return e=Ge(13,r,t,s),e.elementType=Oo,e.lanes=i,e;case Ro:return e=Ge(19,r,t,s),e.elementType=Ro,e.lanes=i,e;case $c:return Oi(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ic:o=10;break e;case Lc:o=9;break e;case Fa:o=11;break e;case Wa:o=14;break e;case Rt:o=16,n=null;break e}throw Error(N(130,e==null?e:typeof e,""))}return t=Ge(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function hr(e,t,r,n){return e=Ge(7,e,n,t),e.lanes=r,e}function Oi(e,t,r,n){return e=Ge(22,e,n,t),e.elementType=$c,e.lanes=r,e.stateNode={isHidden:!1},e}function co(e,t,r){return e=Ge(6,e,null,t),e.lanes=r,e}function ho(e,t,r){return t=Ge(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Rm(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hi(0),this.expirationTimes=Hi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hi(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Sl(e,t,r,n,s,i,o,a,l){return e=new Rm(e,t,r,a,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ge(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},al(i),e}function Am(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ar,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function jh(e){if(!e)return Gt;e=e._reactInternals;e:{if(wr(e)!==e||e.tag!==1)throw Error(N(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pe(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(N(171))}if(e.tag===1){var r=e.type;if(Pe(r))return jd(e,r,t)}return t}function Th(e,t,r,n,s,i,o,a,l){return e=Sl(r,n,!0,e,s,i,o,a,l),e.context=jh(null),r=e.current,n=je(),s=Ht(r),i=bt(n,s),i.callback=t??null,Wt(r,i,s),e.current.lanes=s,is(e,s,n),Ie(e,n),e}function Ri(e,t,r,n){var s=t.current,i=je(),o=Ht(s);return r=jh(r),t.context===null?t.context=r:t.pendingContext=r,t=bt(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Wt(s,t,o),e!==null&&(at(e,s,o,i),zs(e,s,o)),o}function mi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Fu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function El(e,t){Fu(e,t),(e=e.alternate)&&Fu(e,t)}function Pm(){return null}var Ch=typeof reportError=="function"?reportError:function(e){console.error(e)};function Nl(e){this._internalRoot=e}Ai.prototype.render=Nl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(N(409));Ri(e,t,null,null)};Ai.prototype.unmount=Nl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;vr(function(){Ri(null,e,null,null)}),t[St]=null}};function Ai(e){this._internalRoot=e}Ai.prototype.unstable_scheduleHydration=function(e){if(e){var t=od();e={blockedOn:null,target:e,priority:t};for(var r=0;r<It.length&&t!==0&&t<It[r].priority;r++);It.splice(r,0,e),r===0&&ld(e)}};function jl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Pi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Wu(){}function Im(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var c=mi(o);i.call(c)}}var o=Th(t,n,e,0,null,!1,!1,"",Wu);return e._reactRootContainer=o,e[St]=o.current,Wn(e.nodeType===8?e.parentNode:e),vr(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var a=n;n=function(){var c=mi(l);a.call(c)}}var l=Sl(e,0,!1,null,null,!1,!1,"",Wu);return e._reactRootContainer=l,e[St]=l.current,Wn(e.nodeType===8?e.parentNode:e),vr(function(){Ri(t,l,r,n)}),l}function Ii(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=mi(o);a.call(l)}}Ri(t,o,e,s)}else o=Im(r,t,e,s,n);return mi(o)}sd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=_n(t.pendingLanes);r!==0&&(Ka(t,r|1),Ie(t,ie()),!(F&6)&&(sn=ie()+500,Yt()))}break;case 13:vr(function(){var n=Et(e,1);if(n!==null){var s=je();at(n,e,1,s)}}),El(e,1)}};qa=function(e){if(e.tag===13){var t=Et(e,134217728);if(t!==null){var r=je();at(t,e,134217728,r)}El(e,134217728)}};id=function(e){if(e.tag===13){var t=Ht(e),r=Et(e,t);if(r!==null){var n=je();at(r,e,t,n)}El(e,t)}};od=function(){return H};ad=function(e,t){var r=H;try{return H=e,t()}finally{H=r}};Bo=function(e,t,r){switch(t){case"input":if(Io(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Si(n);if(!s)throw Error(N(90));Dc(n),Io(n,s)}}}break;case"textarea":Mc(e,r);break;case"select":t=r.value,t!=null&&Hr(e,!!r.multiple,t,!1)}};qc=_l;Gc=vr;var Lm={usingClientEntryPoint:!1,Events:[as,Ur,Si,Hc,Kc,_l]},gn={findFiberByHostInstance:ar,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$m={bundleType:gn.bundleType,version:gn.version,rendererPackageName:gn.rendererPackageName,rendererConfig:gn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:jt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Yc(e),e===null?null:e.stateNode},findFiberByHostInstance:gn.findFiberByHostInstance||Pm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ts=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ts.isDisabled&&Ts.supportsFiber)try{_i=Ts.inject($m),pt=Ts}catch{}}We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lm;We.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jl(t))throw Error(N(200));return Am(e,t,null,r)};We.createRoot=function(e,t){if(!jl(e))throw Error(N(299));var r=!1,n="",s=Ch;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Sl(e,1,!1,null,null,r,!1,n,s),e[St]=t.current,Wn(e.nodeType===8?e.parentNode:e),new Nl(t)};We.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(N(188)):(e=Object.keys(e).join(","),Error(N(268,e)));return e=Yc(t),e=e===null?null:e.stateNode,e};We.flushSync=function(e){return vr(e)};We.hydrate=function(e,t,r){if(!Pi(t))throw Error(N(200));return Ii(null,e,t,!0,r)};We.hydrateRoot=function(e,t,r){if(!jl(e))throw Error(N(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=Ch;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=Th(t,null,e,1,r??null,s,!1,i,o),e[St]=t.current,Wn(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Ai(t)};We.render=function(e,t,r){if(!Pi(t))throw Error(N(200));return Ii(null,e,t,!1,r)};We.unmountComponentAtNode=function(e){if(!Pi(e))throw Error(N(40));return e._reactRootContainer?(vr(function(){Ii(null,null,e,!1,function(){e._reactRootContainer=null,e[St]=null})}),!0):!1};We.unstable_batchedUpdates=_l;We.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Pi(r))throw Error(N(200));if(e==null||e._reactInternals===void 0)throw Error(N(38));return Ii(e,t,r,!1,n)};We.version="18.3.1-next-f1338f8080-20240426";function Oh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Oh)}catch(e){console.error(e)}}Oh(),Oc.exports=We;var Um=Oc.exports,Vu=Um;jo.createRoot=Vu.createRoot,jo.hydrateRoot=Vu.hydrateRoot;var Ne=(e=>(e.ALL="ALL",e.DEVELOPMENT="DEVELOPMENT",e.DESIGN="DESIGN",e.MARKETING="MARKETING",e.COPYWRITING="COPYWRITING",e.OTHER="OTHER",e))(Ne||{}),J=(e=>(e.PENDING="PENDING",e.OPEN="OPEN",e.CLOSED="CLOSED",e))(J||{}),be=(e=>(e.JOBS="JOBS",e.CREATE_JOB="CREATE_JOB",e.FREELANCERS="FREELANCERS",e.PROFILE="PROFILE",e.ADMIN="ADMIN",e))(be||{});const Dm={id:123456789,first_name:"Demo",last_name:"User",username:"demo_user",is_premium:!0},us=()=>{var e,t,r;return typeof window<"u"&&((r=(t=(e=window.Telegram)==null?void 0:e.WebApp)==null?void 0:t.initDataUnsafe)!=null&&r.user)?window.Telegram.WebApp.initDataUnsafe.user:Dm},zm=()=>{var e,t;return((t=(e=window.Telegram)==null?void 0:e.WebApp)==null?void 0:t.themeParams)||{}},Mm=()=>{var e;if((e=window.Telegram)!=null&&e.WebApp){window.Telegram.WebApp.ready();try{window.Telegram.WebApp.expand()}catch(t){console.warn("Failed to expand WebApp",t)}}},B=e=>{var t,r;if((r=(t=window.Telegram)==null?void 0:t.WebApp)!=null&&r.HapticFeedback)try{const n=window.Telegram.WebApp.HapticFeedback;e==="success"||e==="error"?n.notificationOccurred(e):e==="selection"?n.selectionChanged():n.impactOccurred(e)}catch(n){console.warn("Haptic feedback error",n)}},Rh=()=>{var e,t,r;return(r=(t=(e=window.Telegram)==null?void 0:e.WebApp)==null?void 0:t.isVersionAtLeast)==null?void 0:r.call(t,"6.9")},Hu=(e,t)=>{var n,s,i;const r=JSON.stringify(t);Rh()?(i=(s=(n=window.Telegram)==null?void 0:n.WebApp)==null?void 0:s.CloudStorage)==null||i.setItem(e,r,(o,a)=>{o&&(console.warn("CloudStorage error, falling back to localStorage",o),localStorage.setItem(e,r))}):localStorage.setItem(e,r)},Bm=e=>new Promise(t=>{var r,n,s;if(Rh())(s=(n=(r=window.Telegram)==null?void 0:r.WebApp)==null?void 0:n.CloudStorage)==null||s.getItem(e,(i,o)=>{if(i){console.warn("CloudStorage error, checking localStorage",i);const a=localStorage.getItem(e);t(a?JSON.parse(a):null)}else t(o?JSON.parse(o):null)});else{const i=localStorage.getItem(e);t(i?JSON.parse(i):null)}}),Li=(e,t)=>{var n;let r=`https://t.me/${e}`;t&&(r+=`?text=${encodeURIComponent(t)}`),(n=window.Telegram)!=null&&n.WebApp?window.Telegram.WebApp.openTelegramLink(r):window.open(r,"_blank")},Fm=(e,t="https://t.me/hey_birazhabot")=>{var n;const r=`https://t.me/share/url?url=${encodeURIComponent(t)}&text=${encodeURIComponent(e)}`;(n=window.Telegram)!=null&&n.WebApp?window.Telegram.WebApp.openTelegramLink(r):window.open(r,"_blank")},Tl=[479936811,123456789,378436952],Wm="yorzhik",fo={card:"2204 3107 7135 1460",bank:"- (Yandex)"},gt={PIN:100,HIGHLIGHT:50,URGENT:25},An={[Ne.ALL]:"",[Ne.DEVELOPMENT]:"",[Ne.DESIGN]:"",[Ne.MARKETING]:"",[Ne.COPYWRITING]:"",[Ne.OTHER]:""},po=[{id:"1",authorId:999,authorName:"Alice Corp",authorUsername:"alice_pm",title:"Frontend  React  ",description:" Senior React        Recharts. : 2 .",budget:"150 000 ",category:Ne.DEVELOPMENT,status:J.OPEN,createdAt:new Date(Date.now()-864e5).toISOString(),isPinned:!0,isHighlighted:!0,proposalsCount:3},{id:"2",authorId:888,authorName:"Bob Studio",authorUsername:"bob_design",title:"  ",description:"        .",budget:"30 000 ",category:Ne.DESIGN,status:J.OPEN,createdAt:new Date(Date.now()-1728e5).toISOString(),isUrgent:!0,proposalsCount:0}],vn=[{userId:777,displayName:" ",username:"ivan_dev",bio:"Full Stack JS . 5    Node.js  React.",skills:["React","Node.js","PostgreSQL"],portfolioLinks:["https://github.com/ivan","https://ivan.dev"]},{userId:666,displayName:" ",username:"maria_ui",bio:"UI/UX ,    .",skills:["Figma","Tailwind","UI Design"],portfolioLinks:["https://behance.net/maria"]}],mo={dbSchema:`
-- 1.   (TABLES)

CREATE TABLE IF NOT EXISTS public.users (
    tg_id BIGINT PRIMARY KEY,
    first_name TEXT NOT NULL,
    last_name TEXT,
    username TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

CREATE TABLE IF NOT EXISTS public.jobs (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    author_id BIGINT REFERENCES public.users(tg_id),
    title TEXT NOT NULL,
    description TEXT NOT NULL,
    budget TEXT,
    category TEXT DEFAULT 'OTHER', 
    status TEXT DEFAULT 'PENDING',
    is_active BOOLEAN DEFAULT TRUE,
    is_pinned BOOLEAN DEFAULT FALSE,
    is_highlighted BOOLEAN DEFAULT FALSE,
    is_urgent BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

CREATE TABLE IF NOT EXISTS public.profiles (
    user_id BIGINT PRIMARY KEY REFERENCES public.users(tg_id),
    bio TEXT,
    skills TEXT[],
    portfolio_links TEXT[],
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

CREATE TABLE IF NOT EXISTS public.proposals (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    job_id BIGINT REFERENCES public.jobs(id) ON DELETE CASCADE,
    freelancer_id BIGINT REFERENCES public.profiles(user_id),
    cover_letter TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    UNIQUE(job_id, freelancer_id)
);

-- 2.   (RLS POLICIES)
--   !       .

ALTER TABLE public.users ENABLE ROW LEVEL SECURITY;
CREATE POLICY "Allow public access" ON public.users FOR ALL USING (true);

ALTER TABLE public.jobs ENABLE ROW LEVEL SECURITY;
CREATE POLICY "Allow public access" ON public.jobs FOR ALL USING (true);

ALTER TABLE public.profiles ENABLE ROW LEVEL SECURITY;
CREATE POLICY "Allow public access" ON public.profiles FOR ALL USING (true);

ALTER TABLE public.proposals ENABLE ROW LEVEL SECURITY;
CREATE POLICY "Allow public access" ON public.proposals FOR ALL USING (true);
`,edgeFunction:`
// supabase/functions/telegram-bot/index.ts
import { serve } from "https://deno.land/std@0.168.0/http/server.ts"
import { createClient } from "https://esm.sh/@supabase/supabase-js@2"

const BOT_TOKEN = Deno.env.get('BOT_TOKEN')!
const SUPABASE_URL = Deno.env.get('SUPABASE_URL')!
const SUPABASE_SERVICE_ROLE_KEY = Deno.env.get('SUPABASE_SERVICE_ROLE_KEY')!

const supabase = createClient(SUPABASE_URL, SUPABASE_SERVICE_ROLE_KEY)

// Helper to send message
const sendMessage = async (chat_id: number | string, text: string) => {
  if (!chat_id) return
  await fetch(\`https://api.telegram.org/bot\${BOT_TOKEN}/sendMessage\`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ chat_id, text, parse_mode: 'HTML' })
  })
}

serve(async (req) => {
  try {
    const payload = await req.json()
    const { type, table, record, old_record } = payload

    // 1. NEW JOB -> NOTIFY ADMINS
    if (table === 'jobs' && type === 'INSERT') {
       // Replace with your real Admin IDs
       const ADMIN_IDS = [${Tl.join(", ")}] 
       const text = \` <b>   !</b>\\n\\nTitle: \${record.title}\\nBudget: \${record.budget}\\n\\n<a href="https://t.me/TeleLanceBot"> </a>\`
       
       await Promise.all(ADMIN_IDS.map(id => sendMessage(id, text)))
    }

    // 2. JOB STATUS CHANGE -> NOTIFY AUTHOR
    if (table === 'jobs' && type === 'UPDATE' && record.status !== old_record.status) {
       const statusText = record.status === 'OPEN' ? ' ' : ' /'
       const text = \`   <b>"\${record.title}"</b> :\\n\${statusText}\`
       await sendMessage(record.author_id, text)
    }

    // 3. NEW PROPOSAL -> NOTIFY JOB AUTHOR
    if (table === 'proposals' && type === 'INSERT') {
       // Fetch Job Title
       const { data: job } = await supabase.from('jobs').select('title, author_id').eq('id', record.job_id).single()
       if (job) {
         const text = \` <b>   !</b>\\n\\n: \${job.title}\\n: "<i>\${record.cover_letter.slice(0, 50)}...</i>"\`
         await sendMessage(job.author_id, text)
       }
    }

    return new Response("OK", { status: 200 })
  } catch (error) {
    return new Response(JSON.stringify({ error: error.message }), { status: 500 })
  }
})
`,webhookSql:`
-- 3.   (WEBHOOKS)

-- A.    HTTP 
create extension if not exists pg_net;

-- B.   
create or replace function public.handle_telegram_notification()
returns trigger as $$
declare
  --        SUPABASE SETTINGS 
  project_ref text := '[YOUR_PROJECT_REF]'; 
  service_role_key text := '[YOUR_SERVICE_ROLE_KEY]';
  
  --   Edge Function
  url text := 'https://' || project_ref || '.supabase.co/functions/v1/telegram-bot';
begin
  perform net.http_post(
    url := url,
    headers := jsonb_build_object(
      'Content-Type', 'application/json',
      'Authorization', 'Bearer ' || service_role_key
    ),
    body := jsonb_build_object(
      'type', TG_OP,
      'table', TG_TABLE_NAME,
      'schema', TG_TABLE_SCHEMA,
      'record', row_to_json(NEW),
      'old_record', CASE WHEN TG_OP = 'INSERT' THEN null ELSE row_to_json(OLD) END
    )
  );
  return NEW;
end;
$$ language plpgsql;

-- C.  
drop trigger if exists on_job_change on public.jobs;
create trigger on_job_change
after insert or update on public.jobs
for each row execute function public.handle_telegram_notification();

drop trigger if exists on_proposal_new on public.proposals;
create trigger on_proposal_new
after insert on public.proposals
for each row execute function public.handle_telegram_notification();
`};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vm={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),$=(e,t)=>{const r=P.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,...c},d)=>P.createElement("svg",{ref:d,...Vm,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${Hm(e)}`,a].join(" "),...c},[...t.map(([p,f])=>P.createElement(p,f)),...Array.isArray(l)?l:[l]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=$("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ah=$("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ph=$("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ih=$("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Km=$("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=$("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=$("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qm=$("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gm=$("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jm=$("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qm=$("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $h=$("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ym=$("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=$("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dh=$("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xm=$("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=$("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zm=$("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0=$("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t0=$("FileCode",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 13-2 2 2 2",key:"17smn8"}],["path",{d:"m14 17 2-2-2-2",key:"14mezr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mh=$("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r0=$("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=$("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n0=$("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s0=$("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i0=$("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bh=$("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0=$("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a0=$("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fh=$("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wh=$("Pin",[["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z",key:"13yl11"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l0=$("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ku=$("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u0=$("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=$("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=$("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c0=$("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d0=$("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h0=$("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cl=$("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f0=$("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vh=$("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ol=$("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hh=$("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p0=$("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=$("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m0=$("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),g0=({children:e,currentView:t,setView:r})=>{const n=us(),s=Tl.includes(n.id);P.useEffect(()=>{var o;Mm(),(o=window.Telegram)!=null&&o.WebApp&&(window.Telegram.WebApp.setHeaderColor("#0f172a"),window.Telegram.WebApp.setBackgroundColor("#0f172a"))},[]);const i=({view:o,icon:a,label:l})=>{const c=t===o;return u.jsxs("button",{onClick:()=>r(o),className:`flex flex-col items-center justify-center w-full py-3 transition-all duration-300 relative ${c?"text-blue-400":"text-slate-500 hover:text-slate-300"}`,children:[u.jsx("div",{className:`p-1 rounded-xl transition-all ${c?"bg-blue-500/10":""}`,children:u.jsx(a,{size:24,strokeWidth:c?2.5:2})}),u.jsx("span",{className:`text-[10px] mt-1 font-medium ${c?"opacity-100":"opacity-70"}`,children:l}),c&&u.jsx("span",{className:"absolute top-0 w-8 h-1 bg-blue-500 rounded-b-full shadow-[0_0_10px_rgba(59,130,246,0.5)]"})]})};return u.jsxs("div",{className:"flex flex-col h-screen overflow-hidden bg-slate-900 text-slate-100 selection:bg-blue-500 selection:text-white",children:[u.jsxs("div",{className:"fixed top-0 left-0 w-full h-full overflow-hidden pointer-events-none z-0",children:[u.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-blue-900/20 rounded-full blur-[80px]"}),u.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-purple-900/20 rounded-full blur-[80px]"})]}),u.jsx("main",{className:"flex-1 overflow-y-auto pb-24 relative custom-scrollbar",children:e}),u.jsxs("nav",{className:"fixed bottom-4 left-4 right-4 h-16 rounded-2xl flex justify-around items-center z-50 border border-white/5 shadow-2xl backdrop-blur-xl bg-slate-800/80",children:[u.jsx(i,{view:be.JOBS,icon:o0,label:""}),u.jsx(i,{view:be.CREATE_JOB,icon:l0,label:""}),u.jsx(i,{view:be.FREELANCERS,icon:Ih,label:""}),u.jsx(i,{view:be.PROFILE,icon:Qm,label:""}),s&&u.jsx(i,{view:be.ADMIN,icon:h0,label:""})]})]})};function $i(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function v0(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(d){try{c(n.next(d))}catch(p){o(p)}}function l(d){try{c(n.throw(d))}catch(p){o(p)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((n=n.apply(e,t||[])).next())})}const y0=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Rl extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class w0 extends Rl{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Gu extends Rl{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Ju extends Rl{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var ka;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(ka||(ka={}));class _0{constructor(t,{headers:r={},customFetch:n,region:s=ka.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=y0(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return v0(this,arguments,void 0,function*(r,n={}){var s;let i,o;try{const{headers:a,method:l,body:c,signal:d,timeout:p}=n;let f={},{region:v}=n;v||(v=this.region);const w=new URL(`${this.url}/${r}`);v&&v!=="any"&&(f["x-region"]=v,w.searchParams.set("forceFunctionRegion",v));let y;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",y=c):typeof c=="string"?(f["Content-Type"]="text/plain",y=c):typeof FormData<"u"&&c instanceof FormData?y=c:(f["Content-Type"]="application/json",y=JSON.stringify(c)):y=c;let E=d;p&&(o=new AbortController,i=setTimeout(()=>o.abort(),p),d?(E=o.signal,d.addEventListener("abort",()=>o.abort())):E=o.signal);const g=yield this.fetch(w.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:y,signal:E}).catch(S=>{throw new w0(S)}),h=g.headers.get("x-relay-error");if(h&&h==="true")throw new Gu(g);if(!g.ok)throw new Ju(g);let m=((s=g.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),_;return m==="application/json"?_=yield g.json():m==="application/octet-stream"||m==="application/pdf"?_=yield g.blob():m==="text/event-stream"?_=g:m==="multipart/form-data"?_=yield g.formData():_=yield g.text(),{data:_,error:null,response:g}}catch(a){return{data:null,error:a,response:a instanceof Ju||a instanceof Gu?a.context:void 0}}finally{i&&clearTimeout(i)}})}}var x0=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},b0=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,a=null,l=null,c=i.status,d=i.statusText;if(i.ok){var p,f;if(r.method!=="HEAD"){var v;const g=await i.text();g===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((v=r.headers.get("Accept"))===null||v===void 0)&&v.includes("application/vnd.pgrst.plan+text"))?a=g:a=JSON.parse(g))}const y=(p=r.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),E=(f=i.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");y&&E&&E.length>1&&(l=parseInt(E[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,c=406,d="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var w;const y=await i.text();try{o=JSON.parse(y),Array.isArray(o)&&i.status===404&&(a=[],o=null,c=200,d="OK")}catch{i.status===404&&y===""?(c=204,d="No Content"):o={message:y}}if(o&&r.isMaybeSingle&&(!(o==null||(w=o.details)===null||w===void 0)&&w.includes("0 rows"))&&(o=null,c=200,d="OK"),o&&r.shouldThrowOnError)throw new x0(o)}return{error:o,data:a,count:l,status:c,statusText:d}});return this.shouldThrowOnError||(s=s.catch(i=>{var o;let a="";const l=i==null?void 0:i.cause;if(l){var c,d,p,f;const w=(c=l==null?void 0:l.message)!==null&&c!==void 0?c:"",y=(d=l==null?void 0:l.code)!==null&&d!==void 0?d:"";a=`${(p=i==null?void 0:i.name)!==null&&p!==void 0?p:"FetchError"}: ${i==null?void 0:i.message}`,a+=`

Caused by: ${(f=l==null?void 0:l.name)!==null&&f!==void 0?f:"Error"}: ${w}`,y&&(a+=` (${y})`),l!=null&&l.stack&&(a+=`
${l.stack}`)}else{var v;a=(v=i==null?void 0:i.stack)!==null&&v!==void 0?v:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},k0=class extends b0{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:i="text"}={}){var o;const a=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${l}"; options=${a};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const Qu=new RegExp("[,()]");var Cr=class extends k0{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&Qu.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&Qu.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},S0=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}select(e,t){const{head:r=!1,count:n}=t??{},s=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new Cr({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const s="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const i=e.reduce((o,a)=>o.concat(Object.keys(a)),[]);if(i.length>0){const o=[...new Set(i)].map(a=>`"${a}"`);this.url.searchParams.set("columns",o.join(","))}}return new Cr({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){var i;const o="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),n&&this.headers.append("Prefer",`count=${n}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Cr({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var r;const n="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new Cr({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Cr({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},E0=class Kh{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new S0(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Kh(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${t}`);let c;n||s?(a=n?"HEAD":"GET",Object.entries(r).filter(([p,f])=>f!==void 0).map(([p,f])=>[p,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([p,f])=>{l.searchParams.append(p,f)})):(a="POST",c=r);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new Cr({method:a,url:l,headers:d,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class N0{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const j0="2.89.0",T0=`realtime-js/${j0}`,qh="1.0.0",C0="2.0.0",Yu=qh,Sa=1e4,O0=1e3,R0=100;var Pt;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Pt||(Pt={}));var ue;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ue||(ue={}));var st;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(st||(st={}));var Ea;(function(e){e.websocket="websocket"})(Ea||(Ea={}));var ir;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ir||(ir={}));class A0{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,r,n){var s,i;const o=t.topic,a=(s=t.ref)!==null&&s!==void 0?s:"",l=(i=t.join_ref)!==null&&i!==void 0?i:"",c=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},p=Object.keys(d).length===0?"":JSON.stringify(d);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`metadata length ${p.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+c.length+p.length,v=new ArrayBuffer(this.HEADER_LENGTH+f);let w=new DataView(v),y=0;w.setUint8(y++,this.KINDS.userBroadcastPush),w.setUint8(y++,l.length),w.setUint8(y++,a.length),w.setUint8(y++,o.length),w.setUint8(y++,c.length),w.setUint8(y++,p.length),w.setUint8(y++,r),Array.from(l,g=>w.setUint8(y++,g.charCodeAt(0))),Array.from(a,g=>w.setUint8(y++,g.charCodeAt(0))),Array.from(o,g=>w.setUint8(y++,g.charCodeAt(0))),Array.from(c,g=>w.setUint8(y++,g.charCodeAt(0))),Array.from(p,g=>w.setUint8(y++,g.charCodeAt(0)));var E=new Uint8Array(v.byteLength+n.byteLength);return E.set(new Uint8Array(v),0),E.set(new Uint8Array(n),v.byteLength),E.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[s,i,o,a,l]=n;return r({join_ref:s,ref:i,topic:o,event:a,payload:l})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,s)}}_decodeUserBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),a=r.getUint8(4);let l=this.HEADER_LENGTH+4;const c=n.decode(t.slice(l,l+s));l=l+s;const d=n.decode(t.slice(l,l+i));l=l+i;const p=n.decode(t.slice(l,l+o));l=l+o;const f=t.slice(l,t.byteLength),v=a===this.JSON_ENCODING?JSON.parse(n.decode(f)):f,w={type:this.BROADCAST_EVENT,event:d,payload:v};return o>0&&(w.meta=JSON.parse(p)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:w}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class Gh{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var K;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(K||(K={}));const Xu=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=P0(o,e,t,s),i),{}):{}},P0=(e,t,r,n)=>{const s=t.find(a=>a.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?Jh(i,o):Na(o)},Jh=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return U0(t,r)}switch(e){case K.bool:return I0(t);case K.float4:case K.float8:case K.int2:case K.int4:case K.int8:case K.numeric:case K.oid:return L0(t);case K.json:case K.jsonb:return $0(t);case K.timestamp:return D0(t);case K.abstime:case K.date:case K.daterange:case K.int4range:case K.int8range:case K.money:case K.reltime:case K.text:case K.time:case K.timestamptz:case K.timetz:case K.tsrange:case K.tstzrange:return Na(t);default:return Na(t)}},Na=e=>e,I0=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},L0=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},$0=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},U0=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>Jh(t,a))}return e},D0=e=>typeof e=="string"?e.replace(" ","T"):e,Qh=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class vo{constructor(t,r,n={},s=Sa){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Zu;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Zu||(Zu={}));class Pn{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Pn.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=Pn.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Pn.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),a={},l={};return this.map(i,(c,d)=>{o[c]||(l[c]=d)}),this.map(o,(c,d)=>{const p=i[c];if(p){const f=d.map(E=>E.presence_ref),v=p.map(E=>E.presence_ref),w=d.filter(E=>v.indexOf(E.presence_ref)<0),y=p.filter(E=>f.indexOf(E.presence_ref)<0);w.length>0&&(a[c]=w),y.length>0&&(l[c]=y)}else a[c]=d}),this.syncDiff(i,{joins:a,leaves:l},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var c;const d=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),d.length>0){const p=t[a].map(v=>v.presence_ref),f=d.filter(v=>p.indexOf(v.presence_ref)<0);t[a].unshift(...f)}n(a,d,l)}),this.map(o,(a,l)=>{let c=t[a];if(!c)return;const d=l.map(p=>p.presence_ref);c=c.filter(p=>d.indexOf(p.presence_ref)<0),t[a]=c,s(a,c,l),c.length===0&&delete t[a]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ec;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(ec||(ec={}));var In;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(In||(In={}));var yt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(yt||(yt={}));class Vr{constructor(t,r={config:{}},n){var s,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=ue.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new vo(this,st.join,this.params,this.timeout),this.rejoinTimer=new Gh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ue.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ue.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ue.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ue.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ue.errored,this.rejoinTimer.scheduleTimeout())}),this._on(st.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Pn(this),this.broadcastEndpointURL=Qh(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ue.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(v=>v.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[In.PRESENCE]&&this.bindings[In.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,p={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:d}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(v=>t==null?void 0:t(yt.CHANNEL_ERROR,v)),this._onClose(()=>t==null?void 0:t(yt.CLOSED)),this.updateJoinPayload(Object.assign({config:f},p)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:v})=>{var w;if(this.socket._isManualToken()||this.socket.setAuth(),v===void 0){t==null||t(yt.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,E=(w=y==null?void 0:y.length)!==null&&w!==void 0?w:0,g=[];for(let h=0;h<E;h++){const m=y[h],{filter:{event:_,schema:S,table:x,filter:k}}=m,T=v&&v[h];if(T&&T.event===_&&Vr.isFilterValueEqual(T.schema,S)&&Vr.isFilterValueEqual(T.table,x)&&Vr.isFilterValueEqual(T.filter,k))g.push(Object.assign(Object.assign({},m),{id:T.id}));else{this.unsubscribe(),this.state=ue.errored,t==null||t(yt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(yt.SUBSCRIBED);return}}).receive("error",v=>{this.state=ue.errored,t==null||t(yt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(yt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===ue.joined&&t===In.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var s;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ue.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(st.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new vo(this,st.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ue.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new vo(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>R0){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:d}=st;if(n&&[a,l,c,d].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(v=>{var w,y,E;return((w=v.filter)===null||w===void 0?void 0:w.event)==="*"||((E=(y=v.filter)===null||y===void 0?void 0:y.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===o}).map(v=>v.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(v=>{var w,y,E,g,h,m;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in v){const _=v.id,S=(w=v.filter)===null||w===void 0?void 0:w.event;return _&&((y=r.ids)===null||y===void 0?void 0:y.includes(_))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((E=r.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const _=(h=(g=v==null?void 0:v.filter)===null||g===void 0?void 0:g.event)===null||h===void 0?void 0:h.toLocaleLowerCase();return _==="*"||_===((m=r==null?void 0:r.event)===null||m===void 0?void 0:m.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===o}).map(v=>{if(typeof f=="object"&&"ids"in f){const w=f.data,{schema:y,table:E,commit_timestamp:g,type:h,errors:m}=w;f=Object.assign(Object.assign({},{schema:y,table:E,commit_timestamp:g,eventType:h,new:{},old:{},errors:m}),this._getPayloadRecords(w))}v.callback(f,n)})}_isClosed(){return this.state===ue.closed}_isJoined(){return this.state===ue.joined}_isJoining(){return this.state===ue.joining}_isLeaving(){return this.state===ue.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Vr.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(st.close,{},t)}_onError(t){this._on(st.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ue.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Xu(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Xu(t.columns,t.old_record)),r}}const yo=()=>{},Cs={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},z0=[1e3,2e3,5e3,1e4],M0=1e4,B0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class F0{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Sa,this.transport=null,this.heartbeatIntervalMs=Cs.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=yo,this.ref=0,this.reconnectTimer=null,this.vsn=Yu,this.logger=yo,this.conn=null,this.sendBuffer=[],this.serializer=new A0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Ea.websocket}`,this.httpEndpoint=Qh(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=N0.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Pt.connecting:return ir.Connecting;case Pt.open:return ir.Open;case Pt.closing:return ir.Closing;default:return ir.Closed}}isConnected(){return this.connectionState()===ir.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new Vr(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(O0,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Cs.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:o}=r,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${n} ${s} ${a}`.trim(),i),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Pt.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Pt.open||this.conn.readyState===Pt.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(st.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([B0],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const i={access_token:r,version:T0};r&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(st.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Gh(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Cs.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,o,a,l,c,d,p,f,v;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Sa,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Cs.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=t==null?void 0:t.heartbeatCallback)!==null&&a!==void 0?a:yo,this.vsn=(l=t==null?void 0:t.vsn)!==null&&l!==void 0?l:Yu,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:w=>z0[w-1]||M0,this.vsn){case qh:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(w,y)=>y(JSON.stringify(w)),this.decode=(p=t==null?void 0:t.decode)!==null&&p!==void 0?p:(w,y)=>y(JSON.parse(w));break;case C0:this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(v=t==null?void 0:t.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Xn=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function W0(e,t,r){const n=new URL(t,e);if(r)for(const[s,i]of Object.entries(r))i!==void 0&&n.searchParams.set(s,i);return n.toString()}async function V0(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function H0(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:s,body:i,headers:o}){const a=W0(e.baseUrl,n,s),l=await V0(e.auth),c=await t(a,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...l,...o},body:i?JSON.stringify(i):void 0}),d=await c.text(),p=(c.headers.get("content-type")||"").includes("application/json"),f=p&&d?JSON.parse(d):d;if(!c.ok){const v=p?f:void 0,w=v==null?void 0:v.error;throw new Xn((w==null?void 0:w.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:w==null?void 0:w.type,icebergCode:w==null?void 0:w.code,details:v})}return{status:c.status,headers:c.headers,data:f}}}}function Os(e){return e.join("")}var K0=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Os(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Os(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Os(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Os(e.namespace)}`}),!0}catch(t){if(t instanceof Xn&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof Xn&&r.status===409)return;throw r}}};function br(e){return e.join("")}var q0=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${br(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${br(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${br(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${br(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${br(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${br(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof Xn&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof Xn&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},G0=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=H0({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new K0(this.client,t),this.tableOps=new q0(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},Ui=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function X(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var J0=class extends Ui{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},ja=class extends Ui{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const Al=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Q0=()=>Response,Ta=e=>{if(Array.isArray(e))return e.map(r=>Ta(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Ta(n)}),t},Y0=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},X0=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Zn(e){"@babel/helpers - typeof";return Zn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zn(e)}function Z0(e,t){if(Zn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Zn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eg(e){var t=Z0(e,"string");return Zn(t)=="symbol"?t:t+""}function tg(e,t,r){return(t=eg(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tc(Object(r),!0).forEach(function(n){tg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tc(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const wo=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},rg=async(e,t,r)=>{e instanceof await Q0()&&!(r!=null&&r.noResolveJson)?e.json().then(n=>{const s=e.status||500,i=(n==null?void 0:n.statusCode)||s+"";t(new J0(wo(n),s,i))}).catch(n=>{t(new ja(wo(n),n))}):t(new ja(wo(e),e))},ng=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(Y0(n)?(s.headers=L({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),L(L({},s),r))};async function cs(e,t,r,n,s,i){return new Promise((o,a)=>{e(r,ng(t,n,s,i)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>rg(l,a,n))})}async function es(e,t,r,n){return cs(e,"GET",t,r,n)}async function rt(e,t,r,n,s){return cs(e,"POST",t,n,s,r)}async function Ca(e,t,r,n,s){return cs(e,"PUT",t,n,s,r)}async function sg(e,t,r,n){return cs(e,"HEAD",t,L(L({},r),{},{noResolveJson:!0}),n)}async function Pl(e,t,r,n,s){return cs(e,"DELETE",t,n,s,r)}var ig=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(X(t))return{data:null,error:t};throw t}}};let Yh;Yh=Symbol.toStringTag;var og=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Yh]="BlobDownloadBuilder",this.promise=null}asStream(){return new ig(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(X(t))return{data:null,error:t};throw t}}};const ag={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},rc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var lg=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=Al(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,r,n){var s=this;try{let i;const o=L(L({},rc),n);let a=L(L({},s.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",s.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),l&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=s.toBase64(s.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),n!=null&&n.headers&&(a=L(L({},a),n.headers));const c=s._removeEmptyFolders(t),d=s._getFinalPath(c),p=await(e=="PUT"?Ca:rt)(s.fetch,`${s.url}/object/${d}`,i,L({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:p.Id,fullPath:p.Key},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(X(i))return{data:null,error:i};throw i}}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var s=this;const i=s._removeEmptyFolders(e),o=s._getFinalPath(i),a=new URL(s.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const c=L({upsert:rc.upsert},n),d=L(L({},s.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType),{data:{path:i,fullPath:(await Ca(s.fetch,a.toString(),l,{headers:d})).Key},error:null}}catch(l){if(s.shouldThrowOnError)throw l;if(X(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(e,t){var r=this;try{let n=r._getFinalPath(e);const s=L({},r.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=await rt(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(r.url+i.url),a=o.searchParams.get("token");if(!a)throw new Ui("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;try{return{data:await rt(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(X(s))return{data:null,error:s};throw s}}async copy(e,t,r){var n=this;try{return{data:{path:(await rt(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(X(s))return{data:null,error:s};throw s}}async createSignedUrl(e,t,r){var n=this;try{let s=n._getFinalPath(e),i=await rt(n.fetch,`${n.url}/object/sign/${s}`,L({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${n.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(X(s))return{data:null,error:s};throw s}}async createSignedUrls(e,t,r){var n=this;try{const s=await rt(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>L(L({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(X(s))return{data:null,error:s};throw s}}download(e,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),s=n?`?${n}`:"",i=this._getFinalPath(e),o=()=>es(this.fetch,`${this.url}/${r}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new og(o,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);try{return{data:Ta(await es(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await sg(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(X(n)&&n instanceof ja){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&n.push(s);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});o!==""&&n.push(o);let a=n.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${a}`)}}}async remove(e){var t=this;try{return{data:await Pl(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(X(r))return{data:null,error:r};throw r}}async list(e,t,r){var n=this;try{const s=L(L(L({},ag),t),{},{prefix:e||""});return{data:await rt(n.fetch,`${n.url}/object/list/${n.bucketId}`,s,{headers:n.headers},r),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(X(s))return{data:null,error:s};throw s}}async listV2(e,t){var r=this;try{const n=L({},e);return{data:await rt(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const Xh="2.89.0",Zh={"X-Client-Info":`storage-js/${Xh}`};var ug=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1;const s=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=L(L({},Zh),t),this.fetch=Al(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const r=t.listBucketOptionsToQueryString(e);return{data:await es(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(X(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await es(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(X(r))return{data:null,error:r};throw r}}async createBucket(e,t={public:!1}){var r=this;try{return{data:await rt(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}}async updateBucket(e,t){var r=this;try{return{data:await Ca(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}}async emptyBucket(e){var t=this;try{return{data:await rt(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(X(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await Pl(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(X(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},cg=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=L(L({},Zh),t),this.fetch=Al(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await rt(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(X(r))return{data:null,error:r};throw r}}async listBuckets(e){var t=this;try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),s=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return{data:await es(t.fetch,s,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(X(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await Pl(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(X(r))return{data:null,error:r};throw r}}from(e){var t=this;if(!X0(e))throw new Ui("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new G0({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(s,i){const o=s[i];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(s,a),error:null}}catch(l){if(n)throw l;return{data:null,error:l}}}}})}};const Il={"X-Client-Info":`storage-js/${Xh}`,"Content-Type":"application/json"};var ef=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Ue(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var _o=class extends ef{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},dg=class extends ef{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const Ll=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),hg=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},nc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),fg=async(e,t,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const n=e.status||500,s=e;if(typeof s.json=="function")s.json().then(i=>{const o=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||n+"";t(new _o(nc(i),n,o))}).catch(()=>{const i=n+"";t(new _o(s.statusText||`HTTP ${n} error`,n,i))});else{const i=n+"";t(new _o(s.statusText||`HTTP ${n} error`,n,i))}}else t(new dg(nc(e),e))},pg=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(hg(n)?(s.headers=L({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,L(L({},s),r)):s};async function mg(e,t,r,n,s,i){return new Promise((o,a)=>{e(r,pg(t,n,s,i)).then(l=>{if(!l.ok)throw l;if(n!=null&&n.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>fg(l,a,n))})}async function De(e,t,r,n,s){return mg(e,"POST",t,n,s,r)}var gg=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=L(L({},Il),t),this.fetch=Ll(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await De(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ue(r))return{data:null,error:r};throw r}}async getIndex(e,t){var r=this;try{return{data:await De(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Ue(n))return{data:null,error:n};throw n}}async listIndexes(e){var t=this;try{return{data:await De(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ue(r))return{data:null,error:r};throw r}}async deleteIndex(e,t){var r=this;try{return{data:await De(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Ue(n))return{data:null,error:n};throw n}}},vg=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=L(L({},Il),t),this.fetch=Ll(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await De(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ue(r))return{data:null,error:r};throw r}}async getVectors(e){var t=this;try{return{data:await De(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ue(r))return{data:null,error:r};throw r}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await De(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ue(r))return{data:null,error:r};throw r}}async queryVectors(e){var t=this;try{return{data:await De(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ue(r))return{data:null,error:r};throw r}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await De(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ue(r))return{data:null,error:r};throw r}}},yg=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=L(L({},Il),t),this.fetch=Ll(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await De(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ue(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await De(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ue(r))return{data:null,error:r};throw r}}async listBuckets(e={}){var t=this;try{return{data:await De(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ue(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await De(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ue(r))return{data:null,error:r};throw r}}},wg=class extends yg{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new _g(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},_g=class extends gg{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,L(L({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,L(L({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new xg(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},xg=class extends vg{constructor(e,t,r,n,s){super(e,t,s),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,L(L({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,L(L({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,L(L({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,L(L({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,L(L({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},bg=class extends ug{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new lg(this.url,this.headers,e,this.fetch)}get vectors(){return new wg(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new cg(this.url+"/iceberg",this.headers,this.fetch)}};const tf="2.89.0",Or=30*1e3,Oa=3,xo=Oa*Or,kg="http://localhost:9999",Sg="supabase.auth.token",Eg={"X-Client-Info":`gotrue-js/${tf}`},Ra="X-Supabase-Api-Version",rf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Ng=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,jg=10*60*1e3;class ts extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function R(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Tg extends ts{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Cg(e){return R(e)&&e.name==="AuthApiError"}class or extends ts{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Tt extends ts{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Le extends Tt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Og(e){return R(e)&&e.name==="AuthSessionMissingError"}class kr extends Tt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Rs extends Tt{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class As extends Tt{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Rg(e){return R(e)&&e.name==="AuthImplicitGrantRedirectError"}class sc extends Tt{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ag extends Tt{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Aa extends Tt{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function bo(e){return R(e)&&e.name==="AuthRetryableFetchError"}class ic extends Tt{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Pa extends Tt{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const gi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),oc=` 	
\r=`.split(""),Pg=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<oc.length;t+=1)e[oc[t].charCodeAt(0)]=-2;for(let t=0;t<gi.length;t+=1)e[gi[t].charCodeAt(0)]=t;return e})();function ac(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(gi[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(gi[n]),t.queuedBits-=6}}function nf(e,t,r){const n=Pg[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function lc(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{$g(o,n,r)};for(let o=0;o<e.length;o+=1)nf(e.charCodeAt(o),s,i);return t.join("")}function Ig(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Lg(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}Ig(n,t)}}function $g(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Yr(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)nf(e.charCodeAt(s),r,n);return new Uint8Array(t)}function Ug(e){const t=[];return Lg(e,r=>t.push(r)),new Uint8Array(t)}function cr(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>ac(s,r,n)),ac(null,r,n),t.join("")}function Dg(e){return Math.round(Date.now()/1e3)+e}function zg(){return Symbol("auth-callback")}const ge=()=>typeof window<"u"&&typeof document<"u",er={tested:!1,writable:!1},sf=()=>{if(!ge())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(er.tested)return er.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),er.tested=!0,er.writable=!0}catch{er.tested=!0,er.writable=!1}return er.writable};function Mg(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const of=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Bg=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Rr=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},tr=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},pe=async(e,t)=>{await e.removeItem(t)};class Di{constructor(){this.promise=new Di.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Di.promiseConstructor=Promise;function ko(e){const t=e.split(".");if(t.length!==3)throw new Pa("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Ng.test(t[n]))throw new Pa("JWT not in base64url format");return{header:JSON.parse(lc(t[0])),payload:JSON.parse(lc(t[1])),signature:Yr(t[2]),raw:{header:t[0],payload:t[1]}}}async function Fg(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Wg(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function Vg(e){return("0"+e.toString(16)).substr(-2)}function Hg(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,Vg).join("")}async function Kg(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function qg(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await Kg(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Sr(e,t,r=!1){const n=Hg();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Rr(e,`${t}-code-verifier`,s);const i=await qg(n);return[i,n===i?"plain":"s256"]}const Gg=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Jg(e){const t=e.headers.get(Ra);if(!t||!t.match(Gg))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Qg(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Yg(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Xg=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Er(e){if(!Xg.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function So(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Zg(e,t){return new Proxy(e,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,s)}})}function uc(e){return JSON.parse(JSON.stringify(e))}const sr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ev=[502,503,504];async function cc(e){var t;if(!Bg(e))throw new Aa(sr(e),0);if(ev.includes(e.status))throw new Aa(sr(e),e.status);let r;try{r=await e.json()}catch(i){throw new or(sr(i),i)}let n;const s=Jg(e);if(s&&s.getTime()>=rf["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new ic(sr(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Le}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new ic(sr(r),e.status,r.weak_password.reasons);throw new Tg(sr(r),e.status||500,n)}const tv=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function I(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Ra]||(i[Ra]=rf["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await rv(e,t,r+a,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function rv(e,t,r,n,s,i){const o=tv(t,n,s,i);let a;try{a=await e(r,Object.assign({},o))}catch(l){throw console.error(l),new Aa(sr(l),0)}if(a.ok||await cc(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await cc(l)}}function et(e){var t;let r=null;iv(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Dg(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function dc(e){const t=et(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function $t(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function nv(e){return{data:e,error:null}}function sv(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=$i(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function hc(e){return e}function iv(e){return e.access_token&&e.refresh_token&&e.expires_in}const Eo=["global","local","others"];class ov{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=of(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Eo[0]){if(Eo.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Eo.join(", ")}`);try{return await I(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(R(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await I(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:$t})}catch(n){if(R(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=$i(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await I(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:sv,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(R(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await I(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:$t})}catch(r){if(R(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},d=await I(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:hc});if(d.error)throw d.error;const p=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,v=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return v.length>0&&(v.forEach(w=>{const y=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(w.split(";")[1].split("=")[1]);c[`${E}Page`]=y}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},p),c),error:null}}catch(c){if(R(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){Er(t);try{return await I(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:$t})}catch(r){if(R(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Er(t);try{return await I(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:$t})}catch(n){if(R(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Er(t);try{return await I(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:$t})}catch(n){if(R(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Er(t.userId);try{const{data:r,error:n}=await I(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(R(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Er(t.userId),Er(t.id);try{return{data:await I(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(R(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},d=await I(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:hc});if(d.error)throw d.error;const p=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,v=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return v.length>0&&(v.forEach(w=>{const y=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(w.split(";")[1].split("=")[1]);c[`${E}Page`]=y}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},p),c),error:null}}catch(c){if(R(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(t){try{return await I(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(R(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await I(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(R(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await I(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(R(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await I(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(R(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await I(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(R(r))return{data:null,error:r};throw r}}}function fc(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Nr={debug:!!(globalThis&&sf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class af extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class av extends af{}async function lv(e,t,r){Nr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Nr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Nr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Nr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Nr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new av(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Nr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function uv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function lf(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function cv(e){return parseInt(e,16)}function dv(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function hv(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:d,uri:p,version:f}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const v=lf(e.address),w=d?`${d}://${n}`:n,y=e.statement?`${e.statement}
`:"",E=`${w} wants you to sign in with your Ethereum account:
${v}

${y}`;let g=`URI: ${p}
Version: ${f}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(g+=`
Expiration Time: ${s.toISOString()}`),a&&(g+=`
Not Before: ${a.toISOString()}`),l&&(g+=`
Request ID: ${l}`),c){let h=`
Resources:`;for(const m of c){if(!m||typeof m!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${m}`);h+=`
- ${m}`}g+=h}return`${E}
${g}`}class ae extends Error{constructor({message:t,code:r,cause:n,name:s}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class vi extends ae{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function fv({error:e,options:t}){var r,n,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ae({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new ae({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new ae({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new ae({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new ae({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new ae({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new ae({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new ae({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(uf(o)){if(i.rp.id!==o)return new ae({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ae({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new ae({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new ae({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ae({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function pv({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ae({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new ae({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(uf(n)){if(r.rpId!==n)return new ae({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ae({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new ae({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ae({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class mv{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const gv=new mv;function vv(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=$i(e,["challenge","user","excludeCredentials"]),i=Yr(t).buffer,o=Object.assign(Object.assign({},r),{id:Yr(r.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:i,user:o});if(n&&n.length>0){a.excludeCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const c=n[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Yr(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function yv(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=$i(e,["challenge","allowCredentials"]),s=Yr(t).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const a=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:Yr(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function wv(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:cr(new Uint8Array(e.response.attestationObject)),clientDataJSON:cr(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function _v(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:cr(new Uint8Array(s.authenticatorData)),clientDataJSON:cr(new Uint8Array(s.clientDataJSON)),signature:cr(new Uint8Array(s.signature)),userHandle:s.userHandle?cr(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function uf(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function pc(){var e,t;return!!(ge()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function xv(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new vi("Browser returned unexpected credential type",t)}:{data:null,error:new vi("Empty credential response",t)}}catch(t){return{data:null,error:fv({error:t,options:e})}}}async function bv(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new vi("Browser returned unexpected credential type",t)}:{data:null,error:new vi("Empty credential response",t)}}catch(t){return{data:null,error:pv({error:t,options:e})}}}const kv={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Sv={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function yi(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(t(o)){const a=n[i];t(a)?n[i]=yi(a,o):n[i]=yi(o)}else n[i]=o}return n}function Ev(e,t){return yi(kv,e,t||{})}function Nv(e,t){return yi(Sv,e,t||{})}class jv{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:a};const l=s??gv.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${n}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=Ev(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:p}=await xv({publicKey:c,signal:l});return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:p}}case"request":{const c=Nv(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:p}=await bv(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:l}));return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:p}}}}catch(o){return R(o)?{data:null,error:o}:{data:null,error:new or("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new ts("rpId is required for WebAuthn authentication")};try{if(!pc())return{data:null,error:new or("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:l.type,rpId:r,rpOrigins:n,credential_response:l.credential_response}})}catch(o){return R(o)?{data:null,error:o}:{data:null,error:new or("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new ts("rpId is required for WebAuthn registration")};try{if(!pc())return{data:null,error:new or("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(d=>{var p;return(p=d.data)===null||p===void 0?void 0:p.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:r,rpOrigins:n,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return R(o)?{data:null,error:o}:{data:null,error:new or("Unexpected error in register",o)}}}}uv();const Tv={url:kg,storageKey:Sg,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Eg,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function mc(e,t,r){return await r()}const jr={};class rs{get jwks(){var t,r;return(r=(t=jr[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){jr[this.storageKey]=Object.assign(Object.assign({},jr[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=jr[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){jr[this.storageKey]=Object.assign(Object.assign({},jr[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},Tv),t);if(this.storageKey=i.storageKey,this.instanceID=(r=rs.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,rs.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&ge()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new ov({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=of(i.fetch),this.lock=i.lock||mc,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&ge()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=lv:this.lock=mc,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new jv(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:sf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=fc(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=fc(this.memoryStorage)),ge()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${tf}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(ge()&&(r=Mg(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),ge()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Rg(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return R(r)?this._returnResult({error:r}):this._returnResult({error:new or("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await I(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:et}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(R(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:d,password:p,options:f}=t;let v=null,w=null;this.flowType==="pkce"&&([v,w]=await Sr(this.storage,this.storageKey)),i=await I(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:p,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:v,code_challenge_method:w},xform:et})}else if("phone"in t){const{phone:d,password:p,options:f}=t;i=await I(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:p,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:et})}else throw new Rs("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return await pe(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(await pe(this.storage,`${this.storageKey}-code-verifier`),R(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:a}=t;r=await I(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:dc})}else if("phone"in t){const{phone:i,password:o,options:a}=t;r=await I(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:dc})}else throw new Rs("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const i=new kr;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(R(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,o,a,l,c,d,p,f;let v,w;if("message"in t)v=t.message,w=t.signature;else{const{chain:y,wallet:E,statement:g,options:h}=t;let m;if(ge())if(typeof E=="object")m=E;else{const U=window;if("ethereum"in U&&typeof U.ethereum=="object"&&"request"in U.ethereum&&typeof U.ethereum.request=="function")m=U.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(h!=null&&h.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");m=E}const _=new URL((r=h==null?void 0:h.url)!==null&&r!==void 0?r:window.location.href),S=await m.request({method:"eth_requestAccounts"}).then(U=>U).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const x=lf(S[0]);let k=(n=h==null?void 0:h.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!k){const U=await m.request({method:"eth_chainId"});k=cv(U)}const T={domain:_.host,address:x,statement:g,uri:_.href,version:"1",chainId:k,nonce:(s=h==null?void 0:h.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=h==null?void 0:h.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=h==null?void 0:h.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=h==null?void 0:h.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=h==null?void 0:h.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(d=h==null?void 0:h.signInWithEthereum)===null||d===void 0?void 0:d.resources};v=hv(T),w=await m.request({method:"personal_sign",params:[dv(v),x]})}try{const{data:y,error:E}=await I(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:v,signature:w},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:et});if(E)throw E;if(!y||!y.session||!y.user){const g=new kr;return this._returnResult({data:{user:null,session:null},error:g})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:E})}catch(y){if(R(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(t){var r,n,s,i,o,a,l,c,d,p,f,v;let w,y;if("message"in t)w=t.message,y=t.signature;else{const{chain:E,wallet:g,statement:h,options:m}=t;let _;if(ge())if(typeof g=="object")_=g;else{const x=window;if("solana"in x&&typeof x.solana=="object"&&("signIn"in x.solana&&typeof x.solana.signIn=="function"||"signMessage"in x.solana&&typeof x.solana.signMessage=="function"))_=x.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=g}const S=new URL((r=m==null?void 0:m.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const x=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},m==null?void 0:m.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),h?{statement:h}:null));let k;if(Array.isArray(x)&&x[0]&&typeof x[0]=="object")k=x[0];else if(x&&typeof x=="object"&&"signedMessage"in x&&"signature"in x)k=x;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)w=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),y=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${S.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...h?["",h,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(n=m==null?void 0:m.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=m==null?void 0:m.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${m.signInWithSolana.notBefore}`]:[],...!((o=m==null?void 0:m.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${m.signInWithSolana.expirationTime}`]:[],...!((a=m==null?void 0:m.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${m.signInWithSolana.chainId}`]:[],...!((l=m==null?void 0:m.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${m.signInWithSolana.nonce}`]:[],...!((c=m==null?void 0:m.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${m.signInWithSolana.requestId}`]:[],...!((p=(d=m==null?void 0:m.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||p===void 0)&&p.length?["Resources",...m.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const x=await _.signMessage(new TextEncoder().encode(w),"utf8");if(!x||!(x instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=x}}try{const{data:E,error:g}=await I(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:cr(y)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:et});if(g)throw g;if(!E||!E.session||!E.user){const h=new kr;return this._returnResult({data:{user:null,session:null},error:h})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:g})}catch(E){if(R(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async _exchangeCodeForSession(t){const r=await tr(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new Ag;const{data:i,error:o}=await I(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:et});if(await pe(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const a=new kr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await pe(this.storage,`${this.storageKey}-code-verifier`),R(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,a=await I(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:et}),{data:l,error:c}=a;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const d=new kr;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(r){if(R(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:a,options:l}=t;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await Sr(this.storage,this.storageKey));const{error:p}=await I(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}if("phone"in t){const{phone:a,options:l}=t,{data:c,error:d}=await I(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d})}throw new Rs("You must provide either an email or phone number.")}catch(a){if(await pe(this.storage,`${this.storageKey}-code-verifier`),R(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await I(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:et});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(R(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var r,n,s,i,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await Sr(this.storage,this.storageKey));const c=await I(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:nv});return!((i=c.data)===null||i===void 0)&&i.url&&ge()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(a){if(await pe(this.storage,`${this.storageKey}-code-verifier`),R(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Le;const{error:s}=await I(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(R(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await I(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:a}=await I(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new Rs("You must provide either an email or phone number and a type")}catch(r){if(R(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await tr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<xo:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await tr(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=So()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=Zg(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await I(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:$t}):await this._useSession(async r=>{var n,s,i;const{data:o,error:a}=r;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Le}:await I(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:$t})})}catch(r){if(R(r))return Og(r)&&(await this._removeSession(),await pe(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Le;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await Sr(this.storage,this.storageKey));const{data:c,error:d}=await I(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:$t});if(d)throw d;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await pe(this.storage,`${this.storageKey}-code-verifier`),R(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Le;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=ko(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{data:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(R(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:a}=r;if(a)throw a;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Le;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(R(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!ge())throw new As("No browser detected.");if(t.error||t.error_description||t.error_code)throw new As(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new sc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new As("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new sc("No code detected.");const{data:h,error:m}=await this._exchangeCodeForSession(t.code);if(m)throw m;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:h.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=t;if(!i||!a||!o||!c)throw new As("No session defined in URL");const d=Math.round(Date.now()/1e3),p=parseInt(a);let f=d+p;l&&(f=parseInt(l));const v=f-d;v*1e3<=Or&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${p}s`);const w=f-p;d-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,f,d):d-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,f,d);const{data:y,error:E}=await this._getUser(i);if(E)throw E;const g={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:p,expires_at:f,refresh_token:o,token_type:c,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:t.type},error:null})}catch(n){if(R(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await tr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({error:i});const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(Cg(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return t!=="others"&&(await this._removeSession(),await pe(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=zg(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Sr(this.storage,this.storageKey,!0));try{return await I(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await pe(this.storage,`${this.storageKey}-code-verifier`),R(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(R(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,a,l,c,d;const{data:p,error:f}=i;if(f)throw f;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await I(this.fetch,"GET",v,{headers:this.headers,jwt:(d=(c=p.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return ge()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(R(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:o,provider:a,token:l,access_token:c,nonce:d}=t,p=await I(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:a,id_token:l,access_token:c,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:et}),{data:f,error:v}=p;return v?this._returnResult({data:{user:null,session:null},error:v}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new kr}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:v}))}catch(s){if(await pe(this.storage,`${this.storageKey}-code-verifier`),R(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await I(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(R(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Wg(async s=>(s>0&&await Fg(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await I(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:et})),(s,i)=>{const o=200*Math.pow(2,s);return i&&bo(i)&&Date.now()+o-n<Or})}catch(n){if(this._debug(r,"error",n),R(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),ge()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await tr(this.storage,this.storageKey);if(s&&this.userStorage){let o=await tr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Rr(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:So()}else if(s&&!s.user&&!s.user){const o=await tr(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await pe(this.storage,this.storageKey+"-user"),await Rr(this.storage,this.storageKey,s)):s.user=So()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<xo;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${xo}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),bo(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Le;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Di;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Le;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),R(i)){const o={data:null,error:i};return bo(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,r)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await pe(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Rr(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=uc(s);await Rr(this.storage,this.storageKey,i)}else{const s=uc(r);await Rr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await pe(this.storage,this.storageKey),await pe(this.storage,this.storageKey+"-code-verifier"),await pe(this.storage,this.storageKey+"-user"),this.userStorage&&await pe(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ge()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Or);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Or);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Or}ms, refresh threshold is ${Oa} ticks`),s<=Oa&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof af)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ge()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Sr(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?this._returnResult({data:null,error:i}):await I(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(R(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:c}=await I(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(t.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(r){if(R(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?wv(t.webauthn.credential_response):_v(t.webauthn.credential_response)})}:{code:t.code}),{data:a,error:l}=await I(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(r){if(R(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await I(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:vv(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:yv(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(R(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=ko(n.access_token);let o=null;i.aal&&(o=i.aal);let a=o;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(a="aal2");const c=i.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await I(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Le})})}catch(r){if(R(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Le});const o=await I(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&ge()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(R(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Le});const o=await I(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&ge()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(R(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await I(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Le})})}catch(t){if(R(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?(await I(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Le})})}catch(r){if(R(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(a=>a.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(a=>a.kid===t),n&&this.jwks_cached_at+jg>s)return n;const{data:i,error:o}=await I(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(a=>a.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:v,error:w}=await this.getSession();if(w||!v.session)return this._returnResult({data:null,error:w});n=v.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=ko(n);r!=null&&r.allowExpired||Qg(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!c){const{error:v}=await this.getUser(n);if(v)throw v;return{data:{claims:i,header:s,signature:o},error:null}}const d=Yg(s.alg),p=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,p,o,Ug(`${a}.${l}`)))throw new Pa("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(R(n))return this._returnResult({data:null,error:n});throw n}}}rs.nextInstanceID={};const Cv=rs,Ov="2.89.0";let bn="";typeof Deno<"u"?bn="deno":typeof document<"u"?bn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?bn="react-native":bn="node";const Rv={"X-Client-Info":`supabase-js-${bn}/${Ov}`},Av={headers:Rv},Pv={schema:"public"},Iv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Lv={};function ns(e){"@babel/helpers - typeof";return ns=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ns(e)}function $v(e,t){if(ns(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ns(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uv(e){var t=$v(e,"string");return ns(t)=="symbol"?t:t+""}function Dv(e,t,r){return(t=Uv(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gc(Object(r),!0).forEach(function(n){Dv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gc(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const zv=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Mv=()=>Headers,Bv=(e,t,r)=>{const n=zv(r),s=Mv();return async(i,o)=>{var a;const l=(a=await t())!==null&&a!==void 0?a:e;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(i,ne(ne({},o),{},{headers:c}))}};function Fv(e){return e.endsWith("/")?e:e+"/"}function Wv(e,t){var r,n;const{db:s,auth:i,realtime:o,global:a}=e,{db:l,auth:c,realtime:d,global:p}=t,f={db:ne(ne({},l),s),auth:ne(ne({},c),i),realtime:ne(ne({},d),o),storage:{},global:ne(ne(ne({},p),a),{},{headers:ne(ne({},(r=p==null?void 0:p.headers)!==null&&r!==void 0?r:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function Vv(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Fv(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Hv=class extends Cv{constructor(e){super(e)}},Kv=class{constructor(e,t,r){var n,s;this.supabaseUrl=e,this.supabaseKey=t;const i=Vv(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,a={db:Pv,realtime:Lv,auth:ne(ne({},Iv),{},{storageKey:o}),global:Av},l=Wv(r??{},a);if(this.storageKey=(n=l.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(s=l.global.headers)!==null&&s!==void 0?s:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(d,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=l.auth)!==null&&c!==void 0?c:{},this.headers,l.global.fetch)}this.fetch=Bv(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(ne({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new E0(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new bg(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new _0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,storageKey:i,flowType:o,lock:a,debug:l,throwOnError:c},d,p){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Hv({url:this.authUrl.href,headers:ne(ne({},f),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,flowType:o,lock:a,debug:l,throwOnError:c,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new F0(this.realtimeUrl.href,ne(ne({},e),{},{params:ne(ne({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const qv=(e,t,r)=>new Kv(e,t,r);function Gv(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Gv()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Jv="https://rufmwhuronrmcooozack.supabase.co",Qv="sb_publishable_lL1oGZquXDcgmmr_aUvB7w_KUsHsp-_",me=qv(Jv,Qv),Ot=e=>(e==null?void 0:e.code)==="PGRST205"||(e==null?void 0:e.code)==="42P01",Ps=e=>(e==null?void 0:e.code)==="42501",ze={async ensureUser(e){if(e.id)try{const{error:t}=await me.from("users").upsert({tg_id:e.id,first_name:e.first_name,last_name:e.last_name||"",username:e.username||""},{onConflict:"tg_id"});if(t)if(Ps(t))console.error(' RLS ERROR: Writing to "users" blocked. Run the SQL from the Documentation tab to enable policies.');else if(Ot(t)){console.warn("Supabase: Tables not found. User sync skipped (Demo Mode).");return}else console.error("Supabase: Error syncing user",JSON.stringify(t,null,2));await me.from("profiles").upsert({user_id:e.id,bio:"",skills:[],portfolio_links:[]},{onConflict:"user_id",ignoreDuplicates:!0})}catch(t){console.error("Supabase: Exception syncing user",t)}},async getJobs(){try{let e=await me.from("jobs").select("*, users!author_id(first_name, last_name, username), proposals(count)").eq("is_active",!0).order("is_pinned",{ascending:!1}).order("created_at",{ascending:!1});e.error&&e.error.code==="PGRST200"&&(console.warn("Supabase: Relationship error (PGRST200). Retrying without proposal counts..."),e=await me.from("jobs").select("*, users!author_id(first_name, last_name, username)").eq("is_active",!0).order("is_pinned",{ascending:!1}).order("created_at",{ascending:!1}),e.error&&e.error.code==="PGRST200"&&(console.warn("Supabase: Relationship error persists. Retrying raw fetch..."),e=await me.from("jobs").select("*").eq("is_active",!0).order("is_pinned",{ascending:!1}).order("created_at",{ascending:!1})));const{data:t,error:r}=e;return r?Ot(r)?(console.warn('Supabase: "jobs" table not found. Using MOCK data.'),po):(console.error("Supabase: Error fetching jobs",JSON.stringify(r,null,2)),po):(t||[]).map(n=>{var s,i,o,a,l;return{id:n.id.toString(),authorId:n.author_id,authorName:[(s=n.users)==null?void 0:s.first_name,(i=n.users)==null?void 0:i.last_name].filter(Boolean).join(" ")||"Unknown",authorUsername:(o=n.users)==null?void 0:o.username,title:n.title,description:n.description,budget:n.budget,category:n.category||Ne.OTHER,status:n.status||J.OPEN,createdAt:n.created_at,isPinned:n.is_pinned||!1,isHighlighted:n.is_highlighted||!1,isUrgent:n.is_urgent||!1,proposalsCount:((l=(a=n.proposals)==null?void 0:a[0])==null?void 0:l.count)||0}})}catch(e){return console.error("Supabase: Exception fetching jobs",e),po}},async createJob(e){var t,r,n;try{const{data:s,error:i}=await me.from("jobs").insert({author_id:e.authorId,title:e.title,description:e.description,budget:e.budget,category:e.category,status:J.PENDING,is_active:!0,is_pinned:e.isPinned||!1,is_highlighted:e.isHighlighted||!1,is_urgent:e.isUrgent||!1}).select("*, users!author_id(first_name, last_name, username)").single();if(i){if(Ps(i))throw console.error(' RLS ERROR: Insert to "jobs" blocked. You must run the SQL to enable policies.'),alert("    (RLS).  SQL  ."),i;if(Ot(i)||i.code==="42703")return console.warn("Supabase: Schema mismatch or missing table. Using Local Mock."),{id:Date.now().toString(),createdAt:new Date().toISOString(),authorName:"You (Demo)",authorUsername:"demo",status:J.PENDING,...e};throw console.error("Supabase: Error creating job",JSON.stringify(i,null,2)),i}return{id:s.id.toString(),authorId:s.author_id,authorName:[(t=s.users)==null?void 0:t.first_name,(r=s.users)==null?void 0:r.last_name].filter(Boolean).join(" ")||"Unknown",authorUsername:(n=s.users)==null?void 0:n.username,title:s.title,description:s.description,budget:s.budget,category:s.category||e.category||Ne.OTHER,status:s.status||J.PENDING,createdAt:s.created_at,isPinned:s.is_pinned||!1,isHighlighted:s.is_highlighted||!1,isUrgent:s.is_urgent||!1}}catch{return{id:Date.now().toString(),createdAt:new Date().toISOString(),authorName:"You (Demo)",authorUsername:"demo",status:J.PENDING,...e}}},async updateJobStatus(e,t){try{const{error:r}=await me.from("jobs").update({status:t}).eq("id",e);return r&&!Ot(r)?(console.error("Error updating status",r),!1):!0}catch(r){return console.error(r),!0}},async deleteJob(e){try{const{error:t}=await me.from("jobs").delete().eq("id",e);return t?(console.error("Supabase: Error deleting job",t),!1):!0}catch(t){return console.error("Supabase: Exception deleting job",t),!1}},async getFreelancers(){try{const{data:e,error:t}=await me.from("profiles").select("*, users!user_id(first_name, last_name, username)");return t?(Ot(t)&&console.warn('Supabase: "profiles" table not found. Using MOCK freelancers.'),vn):(e||[]).map(r=>{var n,s,i;return{userId:r.user_id,username:(n=r.users)==null?void 0:n.username,displayName:[(s=r.users)==null?void 0:s.first_name,(i=r.users)==null?void 0:i.last_name].filter(Boolean).join(" "),bio:r.bio,skills:r.skills||[],portfolioLinks:r.portfolio_links||[]}})}catch{return vn}},async updateProfile(e){const{error:t}=await me.from("profiles").upsert({user_id:e.userId,bio:e.bio,skills:e.skills,portfolio_links:e.portfolioLinks,updated_at:new Date().toISOString()});if(t){if(Ps(t))console.error(" RLS ERROR: Update profile blocked. Run SQL from docs."),alert("    (  ).   .");else if(!Ot(t))throw t}},async getMyProfile(e){var t,r,n;try{const{data:s,error:i}=await me.from("profiles").select("*, users!user_id(first_name, last_name, username)").eq("user_id",e).maybeSingle();return i||!s?null:{userId:s.user_id,username:(t=s.users)==null?void 0:t.username,displayName:[(r=s.users)==null?void 0:r.first_name,(n=s.users)==null?void 0:n.last_name].filter(Boolean).join(" "),bio:s.bio,skills:s.skills||[],portfolioLinks:s.portfolio_links||[]}}catch{return null}},async createProposal(e){var t,r;try{const{error:n}=await me.from("proposals").insert({job_id:e.jobId,freelancer_id:e.freelancerId,cover_letter:e.coverLetter});if(n){if(Ps(n))return console.error(" RLS ERROR: Proposal insert blocked."),alert("  .     ."),!1;if(n.code==="23503"){if((n.message.includes("proposals_freelancer_id_fkey")||(t=n.details)!=null&&t.includes("freelancer_id"))&&(console.warn("Supabase: Profile missing for proposal. Attempting to create stub..."),await me.from("profiles").insert({user_id:e.freelancerId,bio:"",skills:[]}),!(await me.from("proposals").insert({job_id:e.jobId,freelancer_id:e.freelancerId,cover_letter:e.coverLetter})).error))return!0;if(n.message.includes("proposals_job_id_fkey")||(r=n.details)!=null&&r.includes("job_id"))return console.warn("Supabase: Job ID not found in DB (likely a Mock Job). Pretending success."),!0}return n.code==="23505"?(console.warn("Supabase: Proposal already exists."),!0):Ot(n)?(console.warn("Supabase: 'proposals' table missing. Mocking success."),!0):(console.error("Supabase Proposal Error:",n),!1)}return!0}catch(n){return console.error(n),!0}},async getProposalsForJob(e){if(e==="1"||e==="2")return[{id:"mock-p-1",jobId:e,freelancerId:777,coverLetter:"!   .    5    ,     .     .",createdAt:new Date(Date.now()-1e7).toISOString(),freelancer:vn[0]},{id:"mock-p-2",jobId:e,freelancerId:666,coverLetter:" .    .    .",createdAt:new Date(Date.now()-2e7).toISOString(),freelancer:vn[1]}];try{const{data:t,error:r}=await me.from("proposals").select("*").eq("job_id",e).order("created_at",{ascending:!1});if(r)return Ot(r)?[]:(console.error("Error fetching proposals raw:",r),[]);if(!t||t.length===0)return[];const n=[...new Set(t.map(l=>l.freelancer_id))],[s,i]=await Promise.all([me.from("profiles").select("*").in("user_id",n),me.from("users").select("*").in("tg_id",n)]),o=new Map((s.data||[]).map(l=>[l.user_id,l])),a=new Map((i.data||[]).map(l=>[l.tg_id,l]));return t.map(l=>{const c=o.get(l.freelancer_id),d=a.get(l.freelancer_id);return{id:l.id,jobId:l.job_id,freelancerId:l.freelancer_id,coverLetter:l.cover_letter,createdAt:l.created_at,freelancer:{userId:l.freelancer_id,username:(d==null?void 0:d.username)||"",displayName:[d==null?void 0:d.first_name,d==null?void 0:d.last_name].filter(Boolean).join(" ")||"Unknown User",bio:(c==null?void 0:c.bio)||"",skills:(c==null?void 0:c.skills)||[],portfolioLinks:(c==null?void 0:c.portfolio_links)||[]}}})}catch(t){return console.error("Exception in getProposalsForJob:",t),[]}}},vc=({jobs:e})=>{const[t,r]=P.useState(Ne.ALL),[n,s]=P.useState(""),[i,o]=P.useState([]),[a,l]=P.useState([]),[c,d]=P.useState(null),[p,f]=P.useState(""),[v,w]=P.useState(!1),y=us();P.useEffect(()=>{const x=localStorage.getItem("bookmarked_jobs");x&&o(JSON.parse(x))},[]);const E=(x,k)=>{k.stopPropagation(),B("light"),o(T=>{const U=T.includes(x)?T.filter(D=>D!==x):[...T,x];return localStorage.setItem("bookmarked_jobs",JSON.stringify(U)),U})},g=(x,k)=>{k.stopPropagation(),B("selection");const T=` ${x.title}
 : ${x.budget}

  :`;Fm(T)},h=x=>{B("selection"),l(k=>k.includes(x)?k.filter(T=>T!==x):[...k,x])},m=x=>{if(x.authorId===y.id){alert("   !");return}B("medium"),d(x),f("!    .     ...")},_=async()=>{if(c){if(p.length<10){alert("    .");return}w(!0),B("light");try{await ze.createProposal({jobId:c.id,freelancerId:y.id,coverLetter:p})?(B("success"),alert(" !      ."),d(null)):alert(" .")}catch(x){console.error(x),alert(" .")}finally{w(!1)}}},S=e.filter(x=>{if(x.status!==J.OPEN||t!==Ne.ALL&&x.category!==t)return!1;if(n){const k=n.toLowerCase(),T=x.title.toLowerCase().includes(k),U=x.description.toLowerCase().includes(k);if(!T&&!U)return!1}return!0});return u.jsxs("div",{className:"p-0 space-y-4",children:[u.jsxs("div",{className:"sticky top-0 z-20 bg-slate-900/95 backdrop-blur-md pb-2 border-b border-slate-800 pt-4 px-4 space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h1",{className:"text-xl font-bold text-white",children:" "}),u.jsx("div",{className:"p-2 bg-slate-800 rounded-full border border-slate-700",children:u.jsx(r0,{size:16,className:"text-slate-400"})})]}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-3 flex items-center pointer-events-none",children:u.jsx(qu,{size:16,className:"text-slate-500"})}),u.jsx("input",{type:"text",placeholder:"   ...",value:n,onChange:x=>s(x.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-slate-800 border border-slate-700 rounded-xl text-sm text-white placeholder-slate-500 focus:ring-2 focus:ring-blue-500/50 focus:border-transparent outline-none transition-all"})]}),u.jsx("div",{className:"flex overflow-x-auto gap-2 pb-2 hide-scrollbar",children:Object.keys(An).map(x=>{const k=x,T=t===k;return u.jsx("button",{onClick:()=>{B("selection"),r(k)},className:`px-4 py-1.5 rounded-full text-xs font-medium whitespace-nowrap border transition-all ${T?"bg-white text-slate-900 border-white":"bg-slate-800 text-slate-400 border-slate-700 hover:bg-slate-700"}`,children:An[k]},k)})})]}),u.jsx("div",{className:"px-4 pb-20 space-y-4",children:S.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center h-[40vh] text-slate-500",children:[u.jsx("div",{className:"w-16 h-16 bg-slate-800 rounded-full flex items-center justify-center mb-4",children:n?u.jsx(qu,{size:24,className:"opacity-50"}):u.jsx(Ih,{size:24,className:"opacity-50"})}),u.jsx("p",{children:n?"  ":"    "})]}):S.map(x=>{const k=i.includes(x.id),T=a.includes(x.id),U=x.isHighlighted,D=U?"bg-gradient-to-br from-slate-800 to-slate-800/80 border-yellow-500/50 shadow-[0_0_20px_rgba(234,179,8,0.1)]":"bg-slate-800/50 border-slate-700/50";return u.jsxs("div",{className:`group relative overflow-hidden rounded-2xl p-5 border backdrop-blur-sm transition-all ${D}`,children:[U&&u.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-yellow-500/10 rounded-full -mr-10 -mt-10 blur-xl pointer-events-none"}),u.jsxs("div",{className:"flex justify-between items-start mb-3",children:[u.jsxs("div",{className:"flex flex-col gap-1 pr-14",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-wider",children:An[x.category]}),x.isPinned&&u.jsxs("span",{className:"flex items-center gap-1 text-[10px] font-bold bg-blue-500/20 text-blue-400 px-1.5 py-0.5 rounded border border-blue-500/20",children:[u.jsx(Wh,{size:8,fill:"currentColor"})," PIN"]}),x.isUrgent&&u.jsxs("span",{className:"flex items-center gap-1 text-[10px] font-bold bg-rose-500/20 text-rose-400 px-1.5 py-0.5 rounded border border-rose-500/20 animate-pulse",children:[u.jsx(_a,{size:8,fill:"currentColor"})," "]})]}),u.jsx("h2",{className:"text-lg font-semibold text-white leading-tight mt-1",children:x.title})]}),u.jsxs("div",{className:"absolute top-4 right-4 flex gap-1 z-10",children:[u.jsx("button",{onClick:oe=>g(x,oe),className:"p-2 text-slate-500 hover:text-blue-400 transition-colors bg-slate-800/50 rounded-full hover:bg-slate-700",children:u.jsx(c0,{size:18})}),u.jsx("button",{onClick:oe=>E(x.id,oe),className:"p-2 text-slate-500 hover:text-rose-500 transition-colors bg-slate-800/50 rounded-full hover:bg-slate-700",children:u.jsx(s0,{size:18,fill:k?"currentColor":"none",className:k?"text-rose-500":""})})]})]}),u.jsxs("div",{className:"relative mb-5",children:[u.jsx("p",{className:`text-sm text-slate-300 leading-relaxed whitespace-pre-line transition-all duration-300 ${T?"":"line-clamp-3"}`,children:x.description}),x.description.length>100&&u.jsx("button",{onClick:()=>h(x.id),className:"flex items-center gap-1 text-xs text-blue-400 font-medium mt-1 hover:text-blue-300 transition-colors",children:T?u.jsxs(u.Fragment,{children:[" ",u.jsx(Jm,{size:12})]}):u.jsxs(u.Fragment,{children:["  ",u.jsx(qm,{size:12})]})})]}),u.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-700/50 relative z-10",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:`font-bold text-sm ${U?"text-yellow-400":"text-emerald-400"}`,children:x.budget}),u.jsxs("div",{className:"text-[10px] text-slate-500 flex items-center mt-1",children:[u.jsx($h,{size:10,className:"mr-1"}),new Date(x.createdAt).toLocaleDateString("ru-RU")]})]}),u.jsxs("button",{onClick:()=>m(x),className:`flex items-center px-4 py-2 text-xs font-bold uppercase tracking-wide rounded-lg text-white shadow-lg transition-all ${U?"bg-yellow-600 hover:bg-yellow-500 shadow-yellow-600/20":"bg-blue-600 hover:bg-blue-500 shadow-blue-600/20"}`,children:[u.jsx(xa,{size:12,className:"mr-2"}),""]})]})]},x.id)})}),c&&u.jsx("div",{className:"fixed inset-0 z-[60] flex items-end sm:items-center justify-center bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-200",children:u.jsxs("div",{className:"w-full max-w-md bg-slate-800 rounded-t-3xl sm:rounded-3xl border border-slate-700 shadow-2xl overflow-hidden p-6 animate-in slide-in-from-bottom-10 duration-300",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h3",{className:"text-xl font-bold text-white",children:"  "}),u.jsx("button",{onClick:()=>d(null),className:"p-2 bg-slate-700 rounded-full text-slate-400 hover:text-white",children:u.jsx(ba,{size:20})})]}),u.jsxs("div",{className:"mb-4 bg-slate-900/50 p-3 rounded-xl border border-slate-700/50",children:[u.jsx("div",{className:"text-xs text-slate-400",children:"  :"}),u.jsx("div",{className:"font-bold text-white truncate",children:c.title}),u.jsx("div",{className:"text-emerald-400 text-sm font-mono mt-1",children:c.budget})]}),u.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2 ml-1",children:" "}),u.jsx("textarea",{rows:5,autoFocus:!0,className:"w-full p-4 rounded-xl bg-slate-900 border border-slate-700 text-white placeholder-slate-600 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none resize-none mb-6",placeholder:"     ?     ...",value:p,onChange:x=>f(x.target.value)}),u.jsx("button",{onClick:_,disabled:v,className:"w-full py-4 bg-blue-600 hover:bg-blue-500 active:scale-95 text-white font-bold rounded-xl transition-all flex items-center justify-center gap-2",children:v?u.jsx("span",{children:"..."}):u.jsxs(u.Fragment,{children:[u.jsx(xa,{size:18})," "]})})]})})]})},Tr=[{id:1,title:"",subtitle:"  ",icon:Mh},{id:2,title:"",subtitle:" ",icon:Cl},{id:3,title:"",subtitle:"  ",icon:Hh}],Yv=({onJobCreated:e,onCancel:t})=>{const r=us(),[n,s]=P.useState(1),[i,o]=P.useState("forward"),[a,l]=P.useState(!1),[c,d]=P.useState({title:"",description:"",budget:"",category:Ne.OTHER}),[p,f]=P.useState({pin:!1,highlight:!1,urgent:!1}),[v,w]=P.useState({}),[y,E]=P.useState(!1),[g,h]=P.useState(null),m=(p.pin?gt.PIN:0)+(p.highlight?gt.HIGHLIGHT:0)+(p.urgent?gt.URGENT:0);P.useEffect(()=>{Bm("job_draft_v3").then(j=>{j&&(j.formData&&d(j.formData),j.promotions&&f(j.promotions),j.currentStep&&s(j.currentStep))})},[]),P.useEffect(()=>{const j=setTimeout(()=>{Hu("job_draft_v3",{formData:c,promotions:p,currentStep:n})},1e3);return()=>clearTimeout(j)},[c,p,n]),P.useEffect(()=>{var V,Xt,ut;if(y){(Xt=(V=window.Telegram)==null?void 0:V.WebApp)==null||Xt.MainButton.hide();return}const j=(ut=window.Telegram)==null?void 0:ut.WebApp;if(!j)return;j.BackButton.show();const M=()=>{n>1?k():t()};j.BackButton.onClick(M);const re=n===Tr.length,b=S();let C="",A="#2563eb";re?(C=m>0?`   ${m}`:" ",A=m>0?"#10b981":"#2563eb"):C="",j.MainButton.setParams({text:a?"...":C,color:A,text_color:"#ffffff",is_visible:!0,is_active:b&&!a});const W=()=>{B("medium"),re?U():x()};return j.MainButton.onClick(W),()=>{j.MainButton.offClick(W),j.BackButton.offClick(M)}},[n,c,p,a,y,m]);const _=(j,M)=>{switch(j){case"title":return M.length<5?" 5 ":M.length>100?" 100 ":"";case"description":return M.length<20?" 20 ":M.length>2e3?" 2000 ":"";case"budget":return"";default:return""}},S=()=>{switch(n){case 1:return c.title.length>=5;case 2:return c.description.length>=20;case 3:return!0;default:return!1}},x=()=>{if(!S()){B("error");return}n<Tr.length&&(o("forward"),s(j=>j+1),B("light"))},k=()=>{n>1&&(o("backward"),s(j=>j-1),B("light"))},T=j=>{j<=n&&(o(j<n?"backward":"forward"),s(j),B("selection"))},U=async()=>{var j,M,re,b;if(!a){l(!0),(M=(j=window.Telegram)==null?void 0:j.WebApp)==null||M.MainButton.showProgress(!1);try{let C=c.budget.trim();/^[\d\s]+$/.test(C)&&(C=Number(C.replace(/\s/g,"")).toLocaleString("ru-RU")+" ");const A=await ze.createJob({authorId:r.id,title:c.title,description:c.description,budget:C||"",category:c.category,isPinned:p.pin,isHighlighted:p.highlight,isUrgent:p.urgent});Hu("job_draft_v3",null),m>0?(h({id:A.id,title:A.title,price:m}),E(!0)):(B("success"),e(A))}catch(C){console.error(C),B("error"),w({submit:"   "})}finally{l(!1),(b=(re=window.Telegram)==null?void 0:re.WebApp)==null||b.MainButton.hideProgress()}}},D=j=>{navigator.clipboard.writeText(j),B("selection")},oe=()=>{if(!g)return;const j=` !    #${g.id} "${g.title}".
: ${g.price}.

(  )`;Li(Wm,j),e({...g,status:"PENDING"})},Xe="w-full p-4 rounded-xl bg-slate-800 border border-slate-700 text-white placeholder-slate-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all disabled:opacity-50",He="block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2 ml-1",_r=["5 000","15 000","30 000","50 000",""];return y&&g?u.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-slate-900/95 backdrop-blur-md",children:u.jsxs("div",{className:"bg-slate-800 w-full max-w-sm rounded-3xl border border-slate-700 shadow-2xl overflow-hidden animate-in zoom-in-95 duration-300",children:[u.jsxs("div",{className:"p-6 text-center",children:[u.jsx("div",{className:"w-20 h-20 bg-emerald-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx("div",{className:"w-14 h-14 bg-emerald-500/30 rounded-full flex items-center justify-center animate-pulse",children:u.jsx(Dh,{className:"text-emerald-400",size:28})})}),u.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:""}),u.jsxs("p",{className:"text-slate-400 text-sm mb-6",children:[" ",u.jsxs("span",{className:"text-white font-mono",children:["#",g.id]})," "]}),u.jsxs("div",{className:"bg-gradient-to-br from-emerald-500/20 to-emerald-600/10 rounded-2xl p-5 mb-6 border border-emerald-500/20",children:[u.jsx("div",{className:"text-emerald-400/70 text-xs uppercase tracking-widest mb-1",children:" "}),u.jsxs("div",{className:"text-4xl font-black text-white",children:[g.price," "]})]}),u.jsxs("div",{className:"space-y-3 text-left",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"text-xs text-slate-500 ml-1 mb-1 block",children:[" (",fo.bank,")"]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("div",{className:"flex-1 bg-slate-900 p-3.5 rounded-xl text-white font-mono text-sm border border-slate-700 tracking-wider",children:fo.card}),u.jsx("button",{onClick:()=>D(fo.card),className:"px-4 bg-slate-700 rounded-xl text-white hover:bg-slate-600 active:scale-95 transition-all",children:u.jsx(Uh,{size:18})})]})]}),u.jsx("p",{className:"text-xs text-slate-500 text-center pt-2",children:"    "})]})]}),u.jsxs("button",{onClick:oe,className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-bold py-4 flex items-center justify-center gap-2 transition-colors active:bg-emerald-700",children:[u.jsx(xa,{size:18})," "]})]})}):u.jsxs("div",{className:"min-h-screen bg-slate-900 pb-32",children:[u.jsxs("div",{className:"sticky top-0 z-20 bg-slate-900/95 backdrop-blur-md border-b border-slate-800 px-5 pt-4 pb-5",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-xl font-bold text-white",children:" "}),u.jsxs("p",{className:"text-xs text-slate-500",children:[" ",n,"  ",Tr.length]})]}),u.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-slate-800 rounded-full border border-slate-700",children:[u.jsx(u0,{size:14,className:"text-blue-400"}),u.jsxs("span",{className:"text-xs text-slate-300 font-medium",children:[Math.round(n/Tr.length*100),"%"]})]})]}),u.jsx("div",{className:"flex items-center gap-2",children:Tr.map((j,M)=>{const re=n>j.id,b=n===j.id;return j.icon,u.jsxs(Tc.Fragment,{children:[u.jsxs("button",{onClick:()=>T(j.id),disabled:j.id>n,className:`flex items-center gap-2 px-3 py-2 rounded-xl transition-all ${b?"bg-blue-500/20 border border-blue-500/30":re?"bg-emerald-500/10 border border-emerald-500/20":"bg-slate-800 border border-slate-700 opacity-50"}`,children:[u.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${b?"bg-blue-500 text-white":re?"bg-emerald-500 text-white":"bg-slate-700 text-slate-500"}`,children:re?u.jsx(ht,{size:14}):u.jsx("span",{className:"text-xs font-bold",children:j.id})}),u.jsx("span",{className:`text-xs font-medium hidden sm:block ${b?"text-blue-400":re?"text-emerald-400":"text-slate-500"}`,children:j.title})]}),M<Tr.length-1&&u.jsx("div",{className:`flex-1 h-0.5 rounded-full transition-colors ${n>j.id?"bg-emerald-500":"bg-slate-700"}`})]},j.id)})})]}),u.jsxs("div",{className:"px-5 pt-6",children:[u.jsxs("div",{className:`animate-in duration-300 ${i==="forward"?"slide-in-from-right-4":"slide-in-from-left-4"} fade-in`,children:[n===1&&u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-2xl p-4 mb-6",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-xl flex items-center justify-center",children:u.jsx(Mh,{className:"text-blue-400",size:20})}),u.jsxs("div",{children:[u.jsx("h2",{className:"font-bold text-white",children:"  ?"}),u.jsx("p",{className:"text-xs text-slate-400",children:"    "})]})]})}),u.jsxs("div",{children:[u.jsx("label",{className:He,children:"  *"}),u.jsx("input",{type:"text",placeholder:".  Telegram   ",className:`${Xe} ${v.title?"border-rose-500 focus:ring-rose-500":""}`,value:c.title,onChange:j=>{d(M=>({...M,title:j.target.value})),w(M=>({...M,title:_("title",j.target.value)}))},maxLength:100}),u.jsxs("div",{className:"flex justify-between mt-2",children:[v.title?u.jsxs("p",{className:"text-xs text-rose-400 flex items-center gap-1",children:[u.jsx(go,{size:12})," ",v.title]}):u.jsx("p",{className:"text-xs text-slate-500",children:"    "}),u.jsxs("span",{className:`text-xs ${c.title.length>90?"text-rose-400":"text-slate-500"}`,children:[c.title.length,"/100"]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:He,children:""}),u.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.keys(An).filter(j=>j!==Ne.ALL).map(j=>{const M=c.category===j;return u.jsx("button",{onClick:()=>{B("selection"),d(re=>({...re,category:j}))},className:`p-3 rounded-xl text-sm font-medium border transition-all text-left ${M?"bg-blue-500/20 border-blue-500 text-blue-400 shadow-lg shadow-blue-500/10":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-600"}`,children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:An[j]}),M&&u.jsx(ht,{size:16})]})},j)})})]})]}),n===2&&u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-2xl p-4 mb-6",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-xl flex items-center justify-center",children:u.jsx(Cl,{className:"text-purple-400",size:20})}),u.jsxs("div",{children:[u.jsx("h2",{className:"font-bold text-white",children:" "}),u.jsx("p",{className:"text-xs text-slate-400",children:"     "})]})]})}),u.jsxs("div",{children:[u.jsx("label",{className:He,children:" *"}),u.jsx("textarea",{rows:8,placeholder:`  :
   ?
   ?
   ?
   ?`,className:`${Xe} resize-none ${v.description?"border-rose-500":""}`,value:c.description,onChange:j=>{d(M=>({...M,description:j.target.value})),w(M=>({...M,description:_("description",j.target.value)}))},maxLength:2e3}),u.jsxs("div",{className:"flex justify-between mt-2",children:[v.description?u.jsxs("p",{className:"text-xs text-rose-400 flex items-center gap-1",children:[u.jsx(go,{size:12})," ",v.description]}):u.jsx("p",{className:"text-xs text-slate-500",children:c.description.length<20?` ${20-c.description.length} `:"!  "}),u.jsxs("span",{className:`text-xs ${c.description.length>1900?"text-rose-400":"text-slate-500"}`,children:[c.description.length,"/2000"]})]})]}),u.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50",children:[u.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-3",children:" "}),u.jsxs("ul",{className:"space-y-2 text-xs text-slate-400",children:[u.jsxs("li",{className:"flex items-start gap-2",children:[u.jsx(ht,{size:14,className:"text-emerald-400 mt-0.5 flex-shrink-0"}),u.jsx("span",{children:"   ,   "})]}),u.jsxs("li",{className:"flex items-start gap-2",children:[u.jsx(ht,{size:14,className:"text-emerald-400 mt-0.5 flex-shrink-0"}),u.jsx("span",{children:"   ,  "})]}),u.jsxs("li",{className:"flex items-start gap-2",children:[u.jsx(ht,{size:14,className:"text-emerald-400 mt-0.5 flex-shrink-0"}),u.jsx("span",{children:"   "})]})]})]})]}),n===3&&u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"bg-emerald-500/10 border border-emerald-500/20 rounded-2xl p-4 mb-6",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 bg-emerald-500/20 rounded-xl flex items-center justify-center",children:u.jsx(Hh,{className:"text-emerald-400",size:20})}),u.jsxs("div",{children:[u.jsx("h2",{className:"font-bold text-white",children:"  "}),u.jsx("p",{className:"text-xs text-slate-400",children:"    "})]})]})}),u.jsxs("div",{children:[u.jsx("label",{className:He,children:""}),u.jsx("input",{type:"text",placeholder:". 15000",className:Xe,value:c.budget,onChange:j=>{const M=j.target.value.replace(/[^0-9\s]/g,"");d(re=>({...re,budget:M}))}}),u.jsx("div",{className:"flex gap-2 mt-3 overflow-x-auto pb-2 -mx-1 px-1",children:_r.map(j=>u.jsx("button",{onClick:()=>{B("selection"),d(M=>({...M,budget:j===""?"":j.replace(/\s/g,"")}))},className:`px-4 py-2 rounded-xl text-xs font-medium whitespace-nowrap transition-all ${j===""&&!c.budget||c.budget===j.replace(/\s/g,"")?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-slate-800 text-slate-400 border border-slate-700 hover:border-slate-600"}`,children:j===""?j:`${j} `},j))})]}),u.jsxs("div",{className:"pt-4 border-t border-slate-800",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(_a,{className:"text-orange-400",size:18}),u.jsx("h3",{className:"text-sm font-bold text-white",children:""})]}),m>0&&u.jsx("div",{className:"px-3 py-1 bg-emerald-500/20 rounded-full",children:u.jsxs("span",{className:"text-xs font-bold text-emerald-400",children:["+",m," "]})})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("button",{onClick:()=>{B("selection"),f(j=>({...j,pin:!j.pin}))},className:`w-full p-4 rounded-xl border transition-all flex items-center justify-between ${p.pin?"bg-blue-500/10 border-blue-500/50 shadow-lg shadow-blue-500/10":"bg-slate-800 border-slate-700"}`,children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${p.pin?"bg-blue-500 text-white":"bg-slate-700 text-slate-400"}`,children:u.jsx(Wh,{size:18})}),u.jsxs("div",{className:"text-left",children:[u.jsx("div",{className:"font-bold text-white text-sm",children:"  "}),u.jsx("div",{className:"text-xs text-slate-400",children:"24    "})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"text-sm font-bold text-white",children:[gt.PIN," "]}),u.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${p.pin?"bg-blue-500 border-blue-500":"border-slate-600"}`,children:p.pin&&u.jsx(ht,{size:14,className:"text-white"})})]})]}),u.jsxs("button",{onClick:()=>{B("selection"),f(j=>({...j,highlight:!j.highlight}))},className:`w-full p-4 rounded-xl border transition-all flex items-center justify-between ${p.highlight?"bg-yellow-500/10 border-yellow-500/50 shadow-lg shadow-yellow-500/10":"bg-slate-800 border-slate-700"}`,children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${p.highlight?"bg-yellow-500 text-white":"bg-slate-700 text-slate-400"}`,children:u.jsx(m0,{size:18})}),u.jsxs("div",{className:"text-left",children:[u.jsx("div",{className:"font-bold text-white text-sm",children:" "}),u.jsx("div",{className:"text-xs text-slate-400",children:"   "})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"text-sm font-bold text-white",children:[gt.HIGHLIGHT," "]}),u.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${p.highlight?"bg-yellow-500 border-yellow-500":"border-slate-600"}`,children:p.highlight&&u.jsx(ht,{size:14,className:"text-white"})})]})]}),u.jsxs("button",{onClick:()=>{B("selection"),f(j=>({...j,urgent:!j.urgent}))},className:`w-full p-4 rounded-xl border transition-all flex items-center justify-between ${p.urgent?"bg-rose-500/10 border-rose-500/50 shadow-lg shadow-rose-500/10":"bg-slate-800 border-slate-700"}`,children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${p.urgent?"bg-rose-500 text-white":"bg-slate-700 text-slate-400"}`,children:u.jsx(_a,{size:18})}),u.jsxs("div",{className:"text-left",children:[u.jsx("div",{className:"font-bold text-white text-sm",children:" "}),u.jsx("div",{className:"text-xs text-slate-400",children:" "})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"text-sm font-bold text-white",children:[gt.URGENT," "]}),u.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${p.urgent?"bg-rose-500 border-rose-500":"border-slate-600"}`,children:p.urgent&&u.jsx(ht,{size:14,className:"text-white"})})]})]})]})]}),u.jsxs("div",{className:"bg-slate-800/50 rounded-2xl p-4 border border-slate-700/50 mt-6",children:[u.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-3",children:""}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-slate-400",children:" "}),u.jsx("span",{className:"text-emerald-400 font-medium",children:""})]}),p.pin&&u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-slate-400",children:""}),u.jsxs("span",{className:"text-white",children:[gt.PIN," "]})]}),p.highlight&&u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-slate-400",children:""}),u.jsxs("span",{className:"text-white",children:[gt.HIGHLIGHT," "]})]}),p.urgent&&u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-slate-400",children:" "}),u.jsxs("span",{className:"text-white",children:[gt.URGENT," "]})]}),u.jsxs("div",{className:"pt-2 mt-2 border-t border-slate-700 flex justify-between",children:[u.jsx("span",{className:"font-bold text-white",children:" "}),u.jsx("span",{className:"font-bold text-lg text-white",children:m>0?`${m} `:""})]})]})]})]})]},n),v.submit&&u.jsxs("div",{className:"mt-4 p-4 bg-rose-500/10 border border-rose-500/20 rounded-xl flex items-center gap-3",children:[u.jsx(go,{className:"text-rose-400 flex-shrink-0",size:20}),u.jsx("p",{className:"text-sm text-rose-400",children:v.submit})]})]})]})},Xv=({freelancers:e})=>{const t=r=>{var s,i;const n=r.startsWith("http")?r:`https://${r}`;(i=(s=window.Telegram)==null?void 0:s.WebApp)==null||i.openLink(n)};return u.jsxs("div",{className:"p-5 space-y-5",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Cl,{className:"text-yellow-400",size:20}),u.jsx("h1",{className:"text-2xl font-bold text-white",children:" "})]}),e.map(r=>u.jsxs("div",{className:"rounded-2xl p-5 bg-slate-800/80 border border-slate-700 backdrop-blur-sm flex flex-col gap-4 shadow-md",children:[u.jsxs("div",{className:"flex gap-4 items-start",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx("div",{className:"w-14 h-14 rounded-full bg-gradient-to-tr from-blue-500 to-cyan-400 flex items-center justify-center text-white shadow-lg shadow-blue-500/20",children:u.jsx(Ol,{size:24})})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-lg text-white truncate",children:r.displayName}),r.username&&u.jsxs("p",{className:"text-xs text-blue-400 font-mono",children:["@",r.username]})]}),r.username&&u.jsx("button",{onClick:()=>Li(r.username),className:"p-2 text-slate-400 hover:text-white bg-slate-700/50 rounded-lg hover:bg-slate-700 transition-colors",children:u.jsx(zh,{size:18})})]}),u.jsx("p",{className:"text-sm mt-3 text-slate-300 line-clamp-3 leading-relaxed",children:r.bio})]})]}),u.jsxs("div",{className:"border-t border-slate-700/50 pt-3",children:[u.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:r.skills.map(n=>u.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] font-medium bg-slate-700 text-slate-300 border border-slate-600",children:n},n))}),r.portfolioLinks&&r.portfolioLinks.length>0&&u.jsx("div",{className:"flex flex-col gap-2",children:r.portfolioLinks.map((n,s)=>u.jsxs("button",{onClick:()=>t(n),className:"flex items-center gap-2 text-xs text-blue-400 hover:text-blue-300 truncate w-full",children:[u.jsx(Bh,{size:12,className:"flex-shrink-0"}),u.jsx("span",{className:"truncate",children:n})]},s))})]})]},r.userId))]})},Zv=({proposals:e,jobTitle:t,onClose:r})=>u.jsxs("div",{className:"fixed inset-0 z-[60] flex flex-col bg-slate-900 animate-in slide-in-from-right duration-300",children:[u.jsxs("div",{className:"p-4 border-b border-slate-800 bg-slate-900/95 backdrop-blur flex justify-between items-center shrink-0",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-wider",children:"  "}),u.jsx("h2",{className:"text-lg font-bold text-white line-clamp-1 pr-4",children:t})]}),u.jsx("button",{onClick:r,className:"px-4 py-2 bg-slate-800 rounded-lg text-sm font-bold text-slate-300 hover:text-white",children:""})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:e.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-slate-500",children:[u.jsx(Fh,{size:48,className:"opacity-20 mb-4"}),u.jsx("p",{children:"  "})]}):e.map(n=>{var s,i,o,a,l;return u.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-2xl p-5 shadow-lg",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-bold",children:((i=(s=n.freelancer)==null?void 0:s.displayName)==null?void 0:i[0])||u.jsx(Ol,{size:16})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-white text-sm",children:((o=n.freelancer)==null?void 0:o.displayName)||"Unknown User"}),((a=n.freelancer)==null?void 0:a.username)&&u.jsxs("div",{className:"text-xs text-blue-400",children:["@",n.freelancer.username]})]})]}),u.jsxs("div",{className:"text-[10px] text-slate-500 flex items-center gap-1",children:[u.jsx(Km,{size:10}),new Date(n.createdAt).toLocaleDateString()]})]}),u.jsx("div",{className:"bg-slate-900/50 p-3 rounded-xl rounded-tl-none border border-slate-700/50 text-sm text-slate-300 leading-relaxed whitespace-pre-line mb-4",children:n.coverLetter}),((l=n.freelancer)==null?void 0:l.skills)&&n.freelancer.skills.length>0&&u.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:n.freelancer.skills.slice(0,3).map(c=>u.jsx("span",{className:"px-2 py-0.5 bg-slate-700 rounded text-[10px] text-slate-400",children:c},c))}),u.jsxs("button",{onClick:()=>{var c;return(c=n.freelancer)!=null&&c.username?Li(n.freelancer.username):alert("Username ")},className:"w-full py-3 bg-blue-600 hover:bg-blue-500 rounded-xl text-white font-bold text-sm flex items-center justify-center gap-2 transition-all active:scale-95",children:[u.jsx(zh,{size:16}),"  TELEGRAM"]})]},n.id)})})]}),ey=({currentProfile:e,onSave:t,myJobs:r,onJobDelete:n,onJobStatusChange:s})=>{const i=us(),[o,a]=P.useState("profile"),[l,c]=P.useState(!1),[d,p]=P.useState((e==null?void 0:e.bio)||""),[f,v]=P.useState((e==null?void 0:e.skills)||[]),[w,y]=P.useState((e==null?void 0:e.portfolioLinks)||[]),[E,g]=P.useState(""),[h,m]=P.useState(""),[_,S]=P.useState(null),[x,k]=P.useState([]),[T,U]=P.useState(!1);P.useEffect(()=>{e&&(p(b=>b||e.bio),v(b=>b.length?b:e.skills),y(b=>b.length?b:e.portfolioLinks||[]))},[e]),P.useEffect(()=>{var C,A,W;if(o==="jobs"||_){(A=(C=window.Telegram)==null?void 0:C.WebApp)==null||A.MainButton.hide();return}const b=(W=window.Telegram)==null?void 0:W.WebApp;if(b){const V=()=>{B("medium"),D()};return b.MainButton.onClick(V),b.MainButton.setParams({text:l?"...":" ",color:"#7c3aed",is_visible:!0,is_active:!l}),()=>{b.MainButton.offClick(V),b.MainButton.hide()}}},[o,l,d,f,w,_]);const D=async()=>{var b,C,A,W;c(!0),(C=(b=window.Telegram)==null?void 0:b.WebApp)==null||C.MainButton.showProgress(!1);try{const V={userId:i.id,username:i.username,displayName:[i.first_name,i.last_name].filter(Boolean).join(" "),bio:d,skills:f,portfolioLinks:w};await ze.updateProfile(V),t(V)}catch(V){console.error(V),B("error")}finally{c(!1),(W=(A=window.Telegram)==null?void 0:A.WebApp)==null||W.MainButton.hideProgress()}},oe=()=>{const b=E.trim();b&&!f.includes(b)&&(v([...f,b]),g(""),B("light"))},Xe=()=>{const b=h.trim();b&&(y([...w,b]),m(""),B("light"))},He=async(b,C)=>{if(C.stopPropagation(),!confirm("   ?"))return;B("medium"),await ze.deleteJob(b)&&n(b)},_r=async(b,C)=>{C.stopPropagation();const A=b.status===J.OPEN?J.CLOSED:J.OPEN;B("light"),await ze.updateJobStatus(b.id,A)&&s(b.id,A)},j=async b=>{S(b.id),U(!0),B("selection");try{const C=await ze.getProposalsForJob(b.id);k(C)}catch(C){console.error(C)}finally{U(!1)}},M="block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2 ml-1",re="w-full p-4 rounded-xl bg-slate-800 border border-slate-700 text-white placeholder-slate-500 focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all disabled:opacity-50";if(_){const b=r.find(C=>C.id===_);return u.jsx(Zv,{proposals:x,jobTitle:(b==null?void 0:b.title)||"",onClose:()=>S(null)})}return u.jsxs("div",{className:"pb-32",children:[u.jsxs("div",{className:"p-5 pb-0",children:[u.jsxs("div",{className:"relative mb-6 p-6 rounded-3xl bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-600 shadow-2xl shadow-purple-500/20 text-center overflow-hidden border border-white/10",children:[u.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16 blur-3xl"}),u.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[u.jsx("div",{className:"w-16 h-16 rounded-full bg-white/10 backdrop-blur-md border border-white/30 flex items-center justify-center text-white text-2xl font-black mb-2 shadow-2xl",children:i.first_name[0]}),u.jsxs("h1",{className:"text-xl font-black text-white leading-none",children:[i.first_name," ",i.last_name]})]})]}),u.jsxs("div",{className:"mb-6 bg-slate-800/50 border border-slate-700 rounded-xl p-3 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-blue-500/20 text-blue-400 rounded-lg",children:u.jsx(Ph,{size:20})}),u.jsxs("div",{className:"text-sm",children:[u.jsx("div",{className:"font-bold text-white",children:""}),u.jsx("div",{className:"text-xs text-slate-400",children:" "})]})]}),u.jsx("button",{onClick:()=>Li("hey_birazhabot","/start"),className:"px-3 py-1.5 bg-blue-600 text-white text-xs font-bold rounded-lg hover:bg-blue-500",children:"Connect"})]}),u.jsxs("div",{className:"flex p-1 bg-slate-800 rounded-xl mb-6",children:[u.jsx("button",{onClick:()=>a("profile"),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${o==="profile"?"bg-slate-700 text-white shadow":"text-slate-400"}`,children:" "}),u.jsxs("button",{onClick:()=>a("jobs"),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${o==="jobs"?"bg-slate-700 text-white shadow":"text-slate-400"}`,children:["  (",r.length,")"]})]})]}),o==="profile"?u.jsxs("div",{className:"px-5 space-y-8 animate-in slide-in-from-left-4 fade-in duration-300",children:[u.jsxs("div",{children:[u.jsx("label",{className:M,children:" "}),u.jsx("textarea",{rows:4,disabled:l,className:re,value:d,onChange:b=>p(b.target.value),placeholder:"   ..."})]}),u.jsxs("div",{children:[u.jsx("label",{className:M,children:""}),u.jsxs("div",{className:"flex gap-2 mb-3",children:[u.jsx("input",{type:"text",disabled:l,className:`${re} !p-3`,value:E,onChange:b=>g(b.target.value),onKeyPress:b=>b.key==="Enter"&&oe(),placeholder:". React"}),u.jsx("button",{onClick:oe,className:"p-3 rounded-xl bg-slate-700 text-white active:scale-95",children:u.jsx(Ku,{size:24})})]}),u.jsx("div",{className:"flex flex-wrap gap-2",children:f.map(b=>u.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-slate-800 border border-slate-700 text-slate-200 text-sm",children:[b,u.jsx("button",{onClick:()=>v(f.filter(C=>C!==b)),children:u.jsx(ba,{size:14,className:"text-slate-500"})})]},b))})]}),u.jsxs("div",{children:[u.jsx("label",{className:M,children:" ()"}),u.jsxs("div",{className:"flex gap-2 mb-3",children:[u.jsx("input",{type:"text",disabled:l,className:`${re} !p-3`,value:h,onChange:b=>m(b.target.value),placeholder:"https://..."}),u.jsx("button",{onClick:Xe,className:"p-3 rounded-xl bg-slate-700 text-white active:scale-95",children:u.jsx(Ku,{size:24})})]}),u.jsx("div",{className:"space-y-2",children:w.map((b,C)=>u.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-slate-800 border border-slate-700 text-xs",children:[u.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[u.jsx(Bh,{size:12,className:"text-blue-400 flex-shrink-0"}),u.jsx("span",{className:"truncate text-blue-300",children:b})]}),u.jsx("button",{onClick:()=>y(w.filter(A=>A!==b)),children:u.jsx(ba,{size:14,className:"text-slate-500"})})]},C))})]})]}):u.jsx("div",{className:"px-5 space-y-4 animate-in slide-in-from-right-4 fade-in duration-300",children:r.length===0?u.jsx("div",{className:"text-center text-slate-500 py-10",children:"    "}):r.map(b=>u.jsxs("div",{onClick:()=>j(b),className:`group p-4 rounded-xl border relative transition-all active:scale-[0.98] ${b.status===J.CLOSED?"bg-slate-800/30 border-slate-800 opacity-60":"bg-slate-800 border-slate-700 hover:border-slate-600"}`,children:[u.jsxs("div",{className:"absolute top-4 right-4 flex items-center gap-2",children:[b.status===J.PENDING&&u.jsxs("span",{className:"flex items-center gap-1 text-[10px] font-bold bg-yellow-500/20 text-yellow-400 px-2 py-1 rounded-full border border-yellow-500/20",children:[u.jsx(Ah,{size:10})," "]}),b.status===J.OPEN&&u.jsxs("span",{className:"flex items-center gap-1 text-[10px] font-bold bg-emerald-500/20 text-emerald-400 px-2 py-1 rounded-full border border-emerald-500/20",children:[u.jsx(Lh,{size:10})," "]})]}),u.jsx("div",{className:"flex justify-between items-start mb-2 pr-24",children:u.jsx("h3",{className:"font-bold text-white text-sm line-clamp-1",children:b.title})}),u.jsx("span",{className:"text-emerald-400 text-xs font-mono",children:b.budget}),u.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-blue-600/10 text-blue-400 border border-blue-500/20",children:[u.jsx(Fh,{size:14}),u.jsxs("span",{className:"text-xs font-bold",children:[b.proposalsCount||0," "]}),u.jsx(Gm,{size:12,className:"opacity-50"})]}),u.jsxs("div",{className:"flex gap-2",children:[b.status!==J.PENDING&&u.jsx("button",{onClick:C=>_r(b,C),className:"p-2 rounded bg-slate-700 text-slate-300 hover:bg-slate-600",children:b.status===J.OPEN?u.jsx(Zm,{size:14}):u.jsx(e0,{size:14})}),u.jsx("button",{onClick:C=>He(b.id,C),className:"p-2 rounded bg-rose-500/10 text-rose-400 border border-rose-500/20",children:u.jsx(Vh,{size:14})})]})]})]},b.id))})]})},No=({title:e,code:t,icon:r,lang:n="sql"})=>{const[s,i]=P.useState(!1),o=()=>{navigator.clipboard.writeText(t),i(!0),setTimeout(()=>i(!1),2e3)};return u.jsxs("div",{className:"mb-8 rounded-lg overflow-hidden border border-gray-700 shadow-sm bg-slate-800",children:[u.jsxs("div",{className:"px-4 py-2 bg-slate-900 border-b border-gray-700 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2 font-semibold text-slate-200",children:[u.jsx(r,{size:16,className:"text-blue-400"}),e]}),u.jsxs("button",{onClick:o,className:"text-xs bg-slate-700 px-2 py-1 rounded border border-slate-600 hover:bg-slate-600 text-slate-200 flex items-center gap-1 transition-colors",children:[s?u.jsx(ht,{size:12,className:"text-emerald-400"}):u.jsx(Uh,{size:12}),s?"Copied":"Copy"]})]}),u.jsx("pre",{className:"p-4 overflow-x-auto text-xs font-mono leading-relaxed bg-[#1e1e1e] text-[#d4d4d4]",children:t.trim()})]})},ty=()=>{zm();const[e,t]=P.useState("notify");return u.jsxs("div",{className:"p-4 pb-24",children:[u.jsxs("div",{className:"mb-6",children:[u.jsx("h1",{className:"text-2xl font-bold mb-2 text-white",children:""}),u.jsx("p",{className:"text-sm text-slate-400",children:"    ."})]}),u.jsxs("div",{className:"flex gap-2 mb-6",children:[u.jsx("button",{onClick:()=>t("notify"),className:`px-4 py-2 rounded-lg text-xs font-bold transition-all border ${e==="notify"?"bg-blue-600 border-blue-500 text-white":"bg-slate-800 border-slate-700 text-slate-400"}`,children:" (Bot)"}),u.jsx("button",{onClick:()=>t("schema"),className:`px-4 py-2 rounded-lg text-xs font-bold transition-all border ${e==="schema"?"bg-blue-600 border-blue-500 text-white":"bg-slate-800 border-slate-700 text-slate-400"}`,children:" "})]}),e==="notify"?u.jsxs("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:[u.jsxs("div",{className:"bg-emerald-500/10 border border-emerald-500/30 p-4 rounded-xl mb-6",children:[u.jsxs("h3",{className:"flex items-center gap-2 text-emerald-400 font-bold mb-2",children:[u.jsx(Ph,{size:18}),":  "]}),u.jsxs("ol",{className:"list-decimal list-inside text-xs text-slate-300 space-y-2",children:[u.jsxs("li",{children:["   ",u.jsx("b",{children:"@BotFather"}),"   ."]}),u.jsxs("li",{children:[" Supabase Dashboard   ",u.jsx("b",{children:"Edge Functions"}),"."]}),u.jsxs("li",{children:["  ",u.jsx("code",{children:"telegram-bot"}),"    ",u.jsx("code",{children:"BOT_TOKEN"}),"."]}),u.jsx("li",{children:"      ."}),u.jsx("li",{children:" Database Webhooks (SQL )."})]})]}),u.jsx(No,{title:"1. Edge Function Code (Deno/TS)",icon:Ym,code:mo.edgeFunction,lang:"typescript"}),u.jsx(No,{title:"2. SQL Triggers (Enable Webhook)",icon:f0,code:mo.webhookSql,lang:"sql"})]}):u.jsxs("div",{className:"animate-in fade-in slide-in-from-left-4 duration-300",children:[u.jsxs("div",{className:"mb-8 p-4 bg-purple-500/10 border border-purple-500/30 rounded-lg",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx(Dh,{className:"text-purple-400",size:20}),u.jsx("h3",{className:"font-bold text-purple-400",children:"  (P2P)"})]}),u.jsx("p",{className:"text-xs text-slate-300 mb-2",children:"   Telegram Stars      ."}),u.jsxs("ol",{className:"list-decimal list-inside text-xs text-slate-300 space-y-2",children:[u.jsx("li",{children:"     ."}),u.jsxs("li",{children:["      ",u.jsx("code",{children:"PENDING"}),"."]}),u.jsx("li",{children:"     ."}),u.jsx("li",{children:'     " ".'}),u.jsx("li",{children:"      ."}),u.jsxs("li",{children:["       ",u.jsx("code",{children:"OPEN"}),"."]})]})]}),u.jsx(No,{title:" PostgreSQL",icon:Xm,code:mo.dbSchema})]})]})},ry=({jobs:e,onJobDeleted:t,onJobStatusChange:r})=>{const[n,s]=P.useState(null),[i,o]=P.useState(null),[a,l]=P.useState("pending"),[c,d]=P.useState(!1),p=async y=>{if(window.confirm(" ,     ?   .")){s(y),B("medium");try{await ze.deleteJob(y)?(B("success"),t(y)):(B("error"),alert(" "))}catch(E){console.error(E),alert(" ")}finally{s(null)}}},f=async y=>{o(y),B("medium");try{await ze.updateJobStatus(y,J.OPEN)&&(B("success"),r(y,J.OPEN))}catch(E){console.error(E)}finally{o(null)}};if(c)return u.jsxs("div",{className:"relative",children:[u.jsx("button",{onClick:()=>d(!1),className:"absolute top-4 right-4 z-10 px-3 py-1 bg-slate-800 border border-slate-700 rounded-lg text-xs text-white",children:"  "}),u.jsx(ty,{})]});const v=e.filter(y=>y.status===J.PENDING),w=a==="pending"?v:e;return u.jsxs("div",{className:"p-5 pb-32",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6 p-4 bg-rose-500/10 border border-rose-500/20 rounded-xl",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(d0,{className:"text-rose-500",size:24}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-lg font-bold text-white",children:" "}),u.jsxs("p",{className:"text-xs text-rose-300",children:[": ",v.length," "]})]})]}),u.jsx("button",{onClick:()=>d(!0),className:"p-2 bg-slate-800 rounded-lg text-slate-400 hover:text-white border border-slate-700",children:u.jsx(t0,{size:20})})]}),u.jsxs("div",{className:"flex mb-6 bg-slate-800 rounded-lg p-1",children:[u.jsxs("button",{onClick:()=>l("pending"),className:`flex-1 py-2 text-xs font-bold rounded ${a==="pending"?"bg-slate-700 text-white":"text-slate-400"}`,children:[" (",v.length,")"]}),u.jsx("button",{onClick:()=>l("all"),className:`flex-1 py-2 text-xs font-bold rounded ${a==="all"?"bg-slate-700 text-white":"text-slate-400"}`,children:" "})]}),u.jsxs("div",{className:"space-y-4",children:[w.map(y=>u.jsxs("div",{className:`rounded-xl p-4 border flex flex-col gap-3 relative overflow-hidden ${y.status===J.PENDING?"bg-slate-800/80 border-yellow-500/30":"bg-slate-800 border-slate-700"}`,children:[y.status===J.PENDING&&u.jsxs("div",{className:"absolute top-0 right-0 bg-yellow-500/20 px-2 py-0.5 rounded-bl-lg text-[10px] text-yellow-400 font-bold flex items-center gap-1",children:[u.jsx(Ah,{size:8})," Needs Review"]}),u.jsxs("div",{className:"flex justify-between items-start mt-2",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded bg-slate-700/50 text-slate-400 text-[10px] font-mono mb-2 border border-slate-600/50",children:[u.jsx(n0,{size:10})," ID: ",u.jsx("span",{className:"text-white select-all font-bold",children:y.id})]}),u.jsx("h3",{className:"font-bold text-white text-sm line-clamp-1",children:y.title}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[u.jsxs("span",{className:"text-xs text-slate-400 flex items-center gap-1",children:[u.jsx(Ol,{size:10})," ",y.authorName]}),u.jsxs("span",{className:"text-xs text-slate-400 flex items-center gap-1",children:[u.jsx($h,{size:10})," ",new Date(y.createdAt).toLocaleDateString()]})]})]}),u.jsx("div",{className:"text-emerald-400 font-mono text-xs font-bold border border-emerald-500/20 bg-emerald-500/10 px-2 py-1 rounded",children:y.budget})]}),u.jsx("p",{className:"text-xs text-slate-300 line-clamp-2 bg-slate-900/50 p-2 rounded border border-slate-700/50",children:y.description}),u.jsxs("div",{className:"flex justify-end pt-2 border-t border-slate-700/50 gap-2",children:[y.status===J.PENDING&&u.jsxs("button",{onClick:()=>f(y.id),disabled:!!i,className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-emerald-500 text-white hover:bg-emerald-600 transition-all shadow-lg shadow-emerald-500/20",children:[u.jsx(ht,{size:14}),i===y.id?"...":""]}),u.jsxs("button",{onClick:()=>p(y.id),disabled:n===y.id,className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-rose-500/10 text-rose-400 border border-rose-500/20 hover:bg-rose-500/20 transition-all disabled:opacity-50",children:[u.jsx(Vh,{size:14}),n===y.id?"...":""]})]})]},y.id)),w.length===0&&u.jsx("div",{className:"text-center text-slate-500 py-10",children:" "})]})]})},ny=({message:e,type:t,onClose:r})=>{P.useEffect(()=>{const i=setTimeout(r,3e3);return()=>clearTimeout(i)},[r]);const n={success:u.jsx(Lh,{className:"text-emerald-400",size:20}),error:u.jsx(p0,{className:"text-rose-400",size:20}),info:u.jsx(i0,{className:"text-blue-400",size:20})},s={success:"border-emerald-500/30 bg-emerald-500/10",error:"border-rose-500/30 bg-rose-500/10",info:"border-blue-500/30 bg-blue-500/10"};return u.jsxs("div",{className:`fixed top-6 left-4 right-4 z-[100] flex items-center gap-3 p-4 rounded-2xl border backdrop-blur-xl shadow-2xl animate-in fade-in slide-in-from-top-4 duration-300 ${s[t]}`,children:[n[t],u.jsx("p",{className:"text-sm font-medium text-white",children:e})]})},sy=()=>{const[e,t]=P.useState(!0),[r,n]=P.useState(be.JOBS),[s,i]=P.useState([]),[o,a]=P.useState([]),[l,c]=P.useState(null),d=us(),[p,f]=P.useState({userId:d.id,displayName:[d.first_name,d.last_name].filter(Boolean).join(" "),username:d.username,bio:"",skills:[],portfolioLinks:[]});P.useEffect(()=>{(async()=>{try{await ze.ensureUser(d);const[S,x,k]=await Promise.all([ze.getJobs(),ze.getFreelancers(),ze.getMyProfile(d.id)]);i(S),a(x),k&&f(k)}catch(S){console.error("Initialization failed:",JSON.stringify(S,null,2)),v("    ","error")}finally{t(!1)}})()},[]);const v=(_,S="success")=>{c({message:_,type:S}),B(S==="error"?"error":"success")},w=_=>{if(_!==r){if(_===be.ADMIN&&!Tl.includes(d.id)){v(" ","error");return}B("light"),n(_),_===be.FREELANCERS&&o.length===0&&ze.getFreelancers().then(a).catch(console.error)}},y=_=>{i(S=>[_,...S]),n(be.PROFILE),v("   ","info")},E=_=>{i(S=>S.filter(x=>x.id!==_)),v(" ")},g=(_,S)=>{i(x=>x.map(k=>k.id===_?{...k,status:S}:k)),v(` : ${S===J.OPEN?"":S===J.PENDING?" ":""}`)},h=_=>{f(_),a(S=>S.find(k=>k.userId===_.userId)?S.map(k=>k.userId===_.userId?_:k):[...S,_]),v(" ")},m=()=>u.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-2 duration-500",children:(()=>{switch(r){case be.JOBS:return u.jsx(vc,{jobs:s});case be.CREATE_JOB:return u.jsx(Yv,{onJobCreated:y,onCancel:()=>w(be.JOBS)});case be.FREELANCERS:return u.jsx(Xv,{freelancers:o});case be.PROFILE:return u.jsx(ey,{currentProfile:p,onSave:h,myJobs:s.filter(_=>_.authorId===d.id),onJobDelete:E,onJobStatusChange:g});case be.ADMIN:return u.jsx(ry,{jobs:s,onJobDeleted:E,onJobStatusChange:g});default:return u.jsx(vc,{jobs:s})}})()});return e?u.jsxs("div",{className:"fixed inset-0 bg-slate-900 flex flex-col items-center justify-center z-50",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-0 bg-blue-500 blur-2xl opacity-20 animate-pulse rounded-full"}),u.jsx(a0,{size:48,className:"text-blue-500 animate-spin relative z-10"})]}),u.jsx("h2",{className:"mt-6 text-white font-black text-2xl tracking-[0.3em] animate-pulse",children:", !"}),u.jsx("div",{className:"mt-2 text-slate-500 text-xs font-mono",children:"..."})]}):u.jsxs(g0,{currentView:r,setView:w,children:[l&&u.jsx(ny,{message:l.message,type:l.type,onClose:()=>c(null)}),m()]})},cf=document.getElementById("root");if(!cf)throw new Error("Could not find root element to mount to");const iy=jo.createRoot(cf);iy.render(u.jsx(Tc.StrictMode,{children:u.jsx(sy,{})}));
